---
phase: 22-dark-mode-theme
plan: 03
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - apps/frontend/src/components/ui/status-badge.tsx
  - apps/frontend/src/components/ui/severity-badge.tsx
  - apps/frontend/src/components/ui/progress.tsx
  - apps/frontend/src/components/ui/alert.tsx
  - apps/frontend/src/components/ui/dialog.tsx
  - apps/frontend/src/components/ui/dropdown-menu.tsx
  - apps/frontend/src/components/ui/sheet.tsx
  - apps/frontend/src/components/ui/badge.tsx
  - apps/frontend/src/components/ui/skeleton.tsx
autonomous: true

must_haves:
  truths:
    - "All 30 shadcn/ui components render correctly in dark mode"
    - "status-badge and severity-badge use theme-colors.ts utility"
    - "progress bar track has dark mode variant"
    - "No hardcoded bg-white, bg-gray-*, text-gray-* in UI primitives"
  artifacts:
    - path: "apps/frontend/src/components/ui/status-badge.tsx"
      provides: "Theme-aware status badge using centralized color mappings"
      contains: "theme-colors"
    - path: "apps/frontend/src/components/ui/severity-badge.tsx"
      provides: "Theme-aware severity badge using centralized color mappings"
      contains: "theme-colors"
  key_links:
    - from: "status-badge.tsx"
      to: "lib/theme-colors.ts"
      via: "import statusColors"
      pattern: "from.*theme-colors"
---

<objective>
Audit and fix all 30 shadcn/ui primitive components to ensure they render correctly in dark mode. Most auto-adapt via CSS variables, but ~7 files have hardcoded color overrides that need dark variants. Also migrate status-badge and severity-badge to use the centralized theme-colors utility.

Purpose: UI primitives are the foundation used by all feature components. Fixing them first ensures base elements (buttons, dialogs, badges, tables) look correct in dark mode.
Output: All UI primitives in components/ui/ are dark-mode-compatible.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-dark-mode-theme/22-RESEARCH.md
@apps/frontend/src/components/ui/status-badge.tsx
@apps/frontend/src/components/ui/severity-badge.tsx
@apps/frontend/src/components/ui/progress.tsx
@apps/frontend/src/components/ui/dialog.tsx
@apps/frontend/src/components/ui/dropdown-menu.tsx
@apps/frontend/src/components/ui/alert.tsx
@apps/frontend/src/components/ui/sheet.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate status-badge and severity-badge to theme-colors utility</name>
  <files>
    apps/frontend/src/components/ui/status-badge.tsx
    apps/frontend/src/components/ui/severity-badge.tsx
  </files>
  <action>
1. Update `status-badge.tsx`:
   - Import `getStatusColor` from `@/lib/theme-colors`
   - Replace the hardcoded `STATUS_COLORS` Record with calls to `getStatusColor(status)`
   - The component should use the centralized mapping instead of maintaining its own color map
   - Keep the Badge/component structure the same, just change where colors come from

2. Update `severity-badge.tsx`:
   - Import `getSeverityColor` from `@/lib/theme-colors`
   - Replace the hardcoded `SEVERITY_COLORS` Record with calls to `getSeverityColor(severity)`
   - Same pattern: keep component structure, change color source

Both components should now automatically get dark mode variants from the centralized utility.
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - Status badges should render with dark variants when `.dark` class is on html
  </verify>
  <done>status-badge and severity-badge use centralized theme-colors utility, getting dark mode variants automatically.</done>
</task>

<task type="auto">
  <name>Task 2: Fix remaining UI primitive hardcoded colors</name>
  <files>
    apps/frontend/src/components/ui/progress.tsx
    apps/frontend/src/components/ui/alert.tsx
    apps/frontend/src/components/ui/dialog.tsx
    apps/frontend/src/components/ui/dropdown-menu.tsx
    apps/frontend/src/components/ui/sheet.tsx
    apps/frontend/src/components/ui/badge.tsx
    apps/frontend/src/components/ui/skeleton.tsx
  </files>
  <action>
Audit each file and add dark mode variants where hardcoded colors exist:

1. **progress.tsx**:
   - Replace `bg-gray-200` track with `bg-gray-200 dark:bg-gray-700` (or `bg-secondary` if it maps correctly)
   - The fill (`bg-primary`) is already themed

2. **alert.tsx**:
   - Already has some `dark:` variants. Verify all variants of the alert (default, destructive) have dark mode coverage
   - Check for any hardcoded `bg-white` or `text-gray-*` classes

3. **dialog.tsx**:
   - Overlay: `bg-black/80` is fine (opacity-based)
   - Content: should use `bg-background` not `bg-white`
   - Any `text-gray-*` should become `text-muted-foreground`
   - Close button styling if hardcoded

4. **dropdown-menu.tsx**:
   - Check for hardcoded `bg-white` on menu content (should be `bg-popover`)
   - Separator: should use `bg-border` or `bg-muted`
   - Item hover states: should use `bg-accent`
   - Any `text-gray-*` on labels or descriptions

5. **sheet.tsx**:
   - Content background should be `bg-background` not `bg-white`
   - Check overlay and close button

6. **badge.tsx**:
   - Verify all CVA variants use semantic classes (bg-primary, bg-secondary, bg-destructive)
   - Add `outline` variant dark mode if missing

7. **skeleton.tsx**:
   - Animation background should be `bg-muted` (usually already is)
   - Verify no hardcoded gray

**Pattern for replacements:**
- `bg-white` → `bg-background` or `bg-card`
- `bg-gray-50` → `bg-muted` or `bg-muted/50`
- `bg-gray-100` → `bg-muted`
- `bg-gray-200` → `bg-border` or add `dark:bg-gray-700`
- `text-gray-500` / `text-gray-600` → `text-muted-foreground`
- `text-gray-900` / `text-gray-800` → `text-foreground`
- `border-gray-200` / `border-gray-300` → `border-border` or `border`
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - All UI primitives in components/ui/ use semantic tokens or have dark: variants
  </verify>
  <done>All shadcn/ui primitive components are dark-mode-compatible. No hardcoded colors remain in the ui/ directory that don't have dark variants.</done>
</task>

</tasks>

<verification>
- `cd apps/frontend && npx tsc --noEmit` passes
- Grep for `bg-white` in components/ui/ returns 0 results (or all have dark: variant)
- Status badges show correct colors in both light and dark mode
- Progress bar visible in both modes
</verification>

<success_criteria>
- All 30 UI primitives dark-mode-compatible
- status-badge and severity-badge use centralized theme-colors
- No unhandled hardcoded colors in components/ui/
</success_criteria>

<output>
After completion, create `.planning/phases/22-dark-mode-theme/22-03-SUMMARY.md`
</output>
