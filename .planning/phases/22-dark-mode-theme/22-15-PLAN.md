---
phase: 22-dark-mode-theme
plan: 15
type: execute
wave: 5
depends_on: ["22-07"]
files_modified:
  - apps/frontend/src/components/views/DataTable.tsx
autonomous: true

must_haves:
  truths:
    - "DataTable columns can shrink to minimum width (determined by column header text including sort chevrons)"
    - "DataTable columns can expand wider than their current fixed minimum"
    - "Summary column is flexible, not locked to a large minimum width"
    - "Case # column can expand beyond its current fixed narrow width"
    - "Column widths are fluid and adapt to content and available viewport space"
  artifacts:
    - path: "apps/frontend/src/components/views/DataTable.tsx"
      provides: "Flexible column width implementation"
      contains: "flexible width logic"
  key_links:
    - from: "DataTable.tsx"
      to: "CSS table layout"
      via: "table-layout or width properties"
      pattern: "width"
---

<objective>
Fix DataTable column width inflexibility on Cases page and other saved views pages. Currently, columns have rigid minimum widths (Summary cannot shrink, Case # cannot expand), making the table layout suboptimal.

Purpose: Improve UX by allowing columns to resize naturally based on content while maintaining readable minimum widths determined by header text.
Output: DataTable with flexible column widths that can both expand and shrink appropriately.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-dark-mode-theme/22-RESEARCH.md
@apps/frontend/src/components/views/DataTable.tsx
@apps/frontend/src/lib/views/configs/cases.config.ts
@apps/frontend/src/app/(authenticated)/cases/page.tsx
</context>

<problem_description>
**Current Behavior:**
- "Summary" column has a large minimum width and cannot shrink, even when viewport is constrained
- "Case #" column is locked to a narrow width and cannot expand
- Column widths are inflexible in both directions (cannot expand wider OR shrink narrower)

**Desired Behavior:**
- Columns should have flexible widths that can both expand and shrink
- Minimum width should be determined by the column header text length (including sort chevrons if present)
- Example: If "Summary" header text + chevrons = ~10 characters wide, column should be able to shrink to that width but also expand as needed
- Case # column should be able to expand wider if content requires it
- Table should adapt fluidly to viewport size and content

**Root Cause:**
Likely rigid CSS width constraints or table-layout rules in DataTable.tsx that prevent natural column flexing.
</problem_description>

<tasks>

<task type="auto">
  <name>Task 1: Analyze and fix DataTable column width constraints</name>
  <files>apps/frontend/src/components/views/DataTable.tsx</files>
  <action>
1. **Investigate current width constraints:**
   - Find all CSS width, minWidth, maxWidth, or table-layout properties applied to:
     - `<table>` element
     - `<th>` (column headers)
     - `<td>` (table cells)
     - Parent containers
   - Look for hardcoded pixel widths, rigid percentage widths, or `table-layout: fixed`

2. **Implement flexible column width logic:**
   - Remove or adjust rigid width constraints that prevent both shrinking and expanding
   - Consider using `table-layout: auto` (default) instead of `fixed` to allow browser-driven column sizing
   - For column headers (`<th>`), consider:
     - `min-width: fit-content` or `min-width: min-content` to let header text determine minimum
     - Allowing natural expansion with no explicit max-width
   - For cells (`<td>`):
     - Remove fixed widths
     - Use flexible units or no explicit width to allow natural sizing
   - If specific columns need constraints (e.g., action buttons), apply those selectively, not globally

3. **Test edge cases:**
   - Long content in Summary field (should wrap or truncate gracefully, not overflow)
   - Short content in Case # field (column should shrink to header width, not lock wide)
   - Viewport resize (columns should adapt fluidly)

4. **Preserve existing frozen column behavior:**
   - If the DataTable has sticky/frozen column functionality (left-pinned columns), ensure width flexibility doesn't break the sticky positioning
   - From 22-07-PLAN.md, we know frozen columns use shadows â€” maintain that while fixing widths

**Implementation hints:**
- Remove any `w-[200px]` or similar Tailwind width classes from column definitions
- If using Tanstack Table (React Table), check columnDef width properties
- Consider using CSS Grid or flexbox for more control if table layout is too limiting
- Ensure header sort chevrons are accounted for in minimum width calculations
  </action>
  <verify>
  - Cases page DataTable columns shrink and expand fluidly with viewport resize
  - Summary column can shrink to header text width (not locked to large minimum)
  - Case # column can expand wider (not locked to narrow width)
  - Column headers remain readable (not truncated below header text width)
  - Frozen/sticky columns still work correctly
  - `cd apps/frontend && npx tsc --noEmit` passes without errors
  </verify>
  <done>DataTable columns have flexible widths that can expand and shrink appropriately, with minimum width determined by header text.</done>
</task>

</tasks>

<verification>
- Navigate to Cases page (authenticated/cases) in browser
- Resize viewport from wide to narrow and back
- Verify Summary column shrinks below its previous minimum width
- Verify Case # column can expand wider when needed
- Verify all columns adapt fluidly to viewport size
- TypeScript compiles without errors: `cd apps/frontend && npx tsc --noEmit`
</verification>

<success_criteria>
- DataTable columns are flexible in both directions (expand wider AND shrink narrower)
- Minimum column width is determined by header text length (including sort chevrons)
- Summary column no longer locked to large minimum width
- Case # column can expand beyond previous narrow constraint
- Table layout adapts fluidly to viewport size
</success_criteria>

<output>
After completion, create `.planning/phases/22-dark-mode-theme/22-15-SUMMARY.md`
</output>
