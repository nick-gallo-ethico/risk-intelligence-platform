---
phase: 22-dark-mode-theme
plan: 06
type: execute
wave: 3
depends_on: ["22-02", "22-03"]
files_modified:
  - apps/frontend/src/components/cases/case-properties-panel.tsx
  - apps/frontend/src/components/cases/case-investigations-panel.tsx
  - apps/frontend/src/components/cases/case-activity-timeline.tsx
  - apps/frontend/src/components/cases/activity-entry.tsx
  - apps/frontend/src/components/cases/activity-filters.tsx
  - apps/frontend/src/components/cases/case-creation-form.tsx
  - apps/frontend/src/components/cases/editable-field.tsx
  - apps/frontend/src/components/cases/property-section.tsx
  - apps/frontend/src/components/cases/search-input.tsx
  - apps/frontend/src/components/cases/filter-chips.tsx
  - apps/frontend/src/components/cases/pagination.tsx
  - apps/frontend/src/components/cases/investigation-card.tsx
  - apps/frontend/src/components/cases/create-investigation-dialog.tsx
autonomous: true

must_haves:
  truths:
    - "Case detail panels (properties, investigations, activity) render correctly in dark mode"
    - "Case creation form renders correctly in dark mode"
    - "Activity timeline with entries and filters renders correctly in dark mode"
    - "Investigation cards within case detail render correctly in dark mode"
  artifacts:
    - path: "apps/frontend/src/components/cases/case-activity-timeline.tsx"
      provides: "Dark-mode-compatible activity timeline"
    - path: "apps/frontend/src/components/cases/investigation-card.tsx"
      provides: "Dark-mode-compatible investigation card"
  key_links:
    - from: "investigation-card.tsx"
      to: "lib/theme-colors.ts"
      via: "statusColors import"
      pattern: "theme-colors"
---

<objective>
Theme the remaining case detail components — panels, activity timeline, forms, investigation cards. These are the interactive elements inside the case detail page that users engage with daily.

Purpose: Complete dark mode coverage for the case management module, the most-used feature area.
Output: All 13 case sub-components fully dark-mode-compatible.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-dark-mode-theme/22-RESEARCH.md
@apps/frontend/src/lib/theme-colors.ts
@apps/frontend/src/components/cases/case-activity-timeline.tsx
@apps/frontend/src/components/cases/investigation-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Theme case panels, activity timeline, and forms</name>
  <files>
    apps/frontend/src/components/cases/case-properties-panel.tsx
    apps/frontend/src/components/cases/case-investigations-panel.tsx
    apps/frontend/src/components/cases/case-activity-timeline.tsx
    apps/frontend/src/components/cases/activity-entry.tsx
    apps/frontend/src/components/cases/activity-filters.tsx
    apps/frontend/src/components/cases/case-creation-form.tsx
    apps/frontend/src/components/cases/editable-field.tsx
    apps/frontend/src/components/cases/property-section.tsx
  </files>
  <action>
Apply the standard color migration pattern to each file:

**Replacement rules:**
- `bg-white` → `bg-card` (for panels/cards) or `bg-background` (for page backgrounds)
- `bg-gray-50` → `bg-muted/50` or `bg-muted`
- `bg-gray-100` → `bg-muted`
- `text-gray-900` / `text-gray-800` → `text-foreground`
- `text-gray-700` → `text-foreground` or `text-muted-foreground` (context-dependent)
- `text-gray-500` / `text-gray-600` → `text-muted-foreground`
- `text-gray-400` / `text-gray-300` → `text-muted-foreground/70`
- `border-gray-200` / `border-gray-300` → `border-border`
- `hover:bg-gray-50` / `hover:bg-gray-100` → `hover:bg-muted/50` or `hover:bg-accent`
- `divide-gray-200` → `divide-border`
- `ring-gray-300` → `ring-border`

**Specific components:**

**Activity Timeline (`case-activity-timeline.tsx` — ~12 hardcoded colors):**
- Timeline connector: `bg-gray-200` → `bg-border`
- Activity entry backgrounds: `bg-white` → `bg-card`
- Empty state: `text-gray-500` / `text-gray-300` → `text-muted-foreground`
- Modal: `bg-white` → `bg-card`, `bg-black/50` overlay is fine

**Activity Entry (`activity-entry.tsx`):**
- Entry card: replace hardcoded backgrounds/text
- Type indicators: use `semanticBgColors` and `semanticTextColors` from theme-colors.ts
- Timestamp text: `text-gray-400` → `text-muted-foreground`

**Case Creation Form (`case-creation-form.tsx`):**
- Form background and sections
- Input field styling should already work via shadcn Input component
- Section headers and descriptions

**Editable Field (`editable-field.tsx`):**
- Display mode text colors
- Edit mode input styling
- Hover indicator

**Property Section (`property-section.tsx`):**
- Section header styling
- Property label/value pairs
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  </verify>
  <done>Case panels, activity timeline, and forms all render correctly in dark mode.</done>
</task>

<task type="auto">
  <name>Task 2: Theme case sub-components (search, filters, cards, tabs content)</name>
  <files>
    apps/frontend/src/components/cases/search-input.tsx
    apps/frontend/src/components/cases/filter-chips.tsx
    apps/frontend/src/components/cases/pagination.tsx
    apps/frontend/src/components/cases/investigation-card.tsx
    apps/frontend/src/components/cases/create-investigation-dialog.tsx
    apps/frontend/src/components/cases/linked-riu-list.tsx
    apps/frontend/src/components/cases/messages-tab.tsx
    apps/frontend/src/components/cases/remediation-tab.tsx
    apps/frontend/src/components/cases/remediation-step-card.tsx
    apps/frontend/src/components/cases/files-tab.tsx
  </files>
  <action>
Apply the same standard color migration pattern plus:

**Investigation Card (`investigation-card.tsx` — ~27 hardcoded colors):**
- Card background: `bg-white` → `bg-card`
- Status indicator: use `getStatusColor()` from theme-colors.ts
- Progress bar track: add dark variant
- Assignee info, dates, labels: semantic tokens
- Border: `border-gray-200` → `border-border`

**Linked RIU List (`linked-riu-list.tsx` — ~31 hardcoded colors):**
- RIU item backgrounds and borders
- Source type indicators: use `semanticColors` from theme-colors.ts
- Status badges: use `getStatusColor()` from theme-colors.ts
- Text colors: standard migration

**Remediation Tab (`remediation-tab.tsx` — ~15 hardcoded colors):**
- Step cards: `bg-white` → `bg-card`
- Status indicators: use theme-colors.ts
- Progress section
- Drag handle

**Remediation Step Card (`remediation-step-card.tsx`):**
- Card background: `bg-white` → `bg-card`
- Drag handle hover: `hover:bg-gray-100` → `hover:bg-muted`
- Status badges: use `getStatusColor()` from theme-colors.ts instead of hardcoded per-status colors

**Messages Tab, Files Tab, Search Input, Filter Chips, Pagination:**
- Standard color migration: bg-white → bg-card, text-gray → semantic tokens
- Pagination buttons: check hover/active states
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - All case sub-components render correctly in dark mode
  </verify>
  <done>All remaining case components (investigation cards, linked RIUs, remediation, messages, files, search, filters, pagination) render correctly in dark mode.</done>
</task>

</tasks>

<verification>
- `cd apps/frontend && npx tsc --noEmit` passes
- Case detail page with all tabs renders correctly in dark mode
- Case creation form usable in dark mode
- Investigation cards and linked RIUs visible in dark mode
</verification>

<success_criteria>
- All 23 case management components fully dark-mode-compatible
- Activity timeline readable in both modes
- Investigation cards, remediation steps, and linked RIUs properly themed
</success_criteria>

<output>
After completion, create `.planning/phases/22-dark-mode-theme/22-06-SUMMARY.md`
</output>
