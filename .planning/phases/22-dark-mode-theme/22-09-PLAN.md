---
phase: 22-dark-mode-theme
plan: 09
type: execute
wave: 4
depends_on: ["22-03", "22-04"]
files_modified:
  - apps/frontend/src/components/ethics/ethics-home.tsx
  - apps/frontend/src/components/ethics/ethics-header.tsx
  - apps/frontend/src/components/ethics/ethics-footer.tsx
  - apps/frontend/src/components/ethics/ethics-nav.tsx
  - apps/frontend/src/components/ethics/report-form.tsx
  - apps/frontend/src/components/ethics/category-selector.tsx
  - apps/frontend/src/components/ethics/confirmation-page.tsx
  - apps/frontend/src/components/ethics/status-view.tsx
  - apps/frontend/src/components/ethics/status-badge.tsx
  - apps/frontend/src/components/ethics/anonymity-selector.tsx
  - apps/frontend/src/components/ethics/access-code-input.tsx
  - apps/frontend/src/components/ethics/access-code-display.tsx
  - apps/frontend/src/components/ethics/smart-prompts.tsx
  - apps/frontend/src/components/ethics/quick-actions.tsx
  - apps/frontend/src/components/ethics/attachment-upload.tsx
  - apps/frontend/src/components/ethics/language-switcher.tsx
  - apps/frontend/src/components/ethics/message-thread.tsx
  - apps/frontend/src/components/ethics/message-composer.tsx
  - apps/frontend/src/components/ethics/tenant-theme-provider.tsx
  - apps/frontend/src/components/ethics/theme-skeleton.tsx
  - apps/frontend/src/components/conflicts/ConflictAlert.tsx
  - apps/frontend/src/components/conflicts/ConflictQueue.tsx
  - apps/frontend/src/components/conflicts/EntityTimeline.tsx
  - apps/frontend/src/app/ethics/[tenant]/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Ethics portal renders correctly in dark mode (all 20 components)"
    - "Tenant branding system coordinates with dark mode (not conflicts)"
    - "Conflict review components render correctly in dark mode"
    - "Ethics portal skeleton loading state respects dark mode"
  artifacts:
    - path: "apps/frontend/src/components/ethics/tenant-theme-provider.tsx"
      provides: "Tenant theming that coordinates with dark mode"
    - path: "apps/frontend/src/components/conflicts/ConflictAlert.tsx"
      provides: "Dark-mode-compatible conflict alert"
  key_links:
    - from: "tenant-theme-provider.tsx"
      to: "next-themes"
      via: "Dark mode layered on tenant branding"
      pattern: "dark"
---

<objective>
Theme the ethics portal (20 components, ~40 hardcoded colors — partially done) and conflict review components (3 components, ~26+ hardcoded colors). The ethics portal has a unique challenge: its TenantThemeProvider applies tenant-specific branding colors, and dark mode must layer on top of those without conflicts.

Purpose: The ethics portal is the public-facing anonymous reporting interface. It must look professional in dark mode. The conflict review is a compliance-critical feature.
Output: Ethics portal and conflict components fully dark-mode-compatible, with tenant branding coordination.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-dark-mode-theme/22-RESEARCH.md
@apps/frontend/src/lib/theme-colors.ts
@apps/frontend/src/components/ethics/tenant-theme-provider.tsx
@apps/frontend/src/components/conflicts/ConflictAlert.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Theme ethics portal components</name>
  <files>
    apps/frontend/src/components/ethics/ethics-home.tsx
    apps/frontend/src/components/ethics/ethics-header.tsx
    apps/frontend/src/components/ethics/ethics-footer.tsx
    apps/frontend/src/components/ethics/ethics-nav.tsx
    apps/frontend/src/components/ethics/report-form.tsx
    apps/frontend/src/components/ethics/category-selector.tsx
    apps/frontend/src/components/ethics/confirmation-page.tsx
    apps/frontend/src/components/ethics/status-view.tsx
    apps/frontend/src/components/ethics/status-badge.tsx
    apps/frontend/src/components/ethics/anonymity-selector.tsx
    apps/frontend/src/components/ethics/access-code-input.tsx
    apps/frontend/src/components/ethics/access-code-display.tsx
    apps/frontend/src/components/ethics/smart-prompts.tsx
    apps/frontend/src/components/ethics/quick-actions.tsx
    apps/frontend/src/components/ethics/attachment-upload.tsx
    apps/frontend/src/components/ethics/language-switcher.tsx
    apps/frontend/src/components/ethics/message-thread.tsx
    apps/frontend/src/components/ethics/message-composer.tsx
    apps/frontend/src/components/ethics/tenant-theme-provider.tsx
    apps/frontend/src/components/ethics/theme-skeleton.tsx
    apps/frontend/src/app/ethics/[tenant]/layout.tsx
  </files>
  <action>
**Ethics portal is PARTIALLY themed** — 20 files have some `dark:` variants already (67 occurrences across the portal). Complete the remaining hardcoded colors.

**Standard migration pattern for remaining hardcoded colors:**
- `bg-white` → `bg-card` or `bg-background`
- `bg-gray-50` → `bg-muted/50`
- `text-gray-*` → semantic tokens
- `border-gray-*` → `border-border`

**Specific attention:**

**tenant-theme-provider.tsx:**
- The TenantThemeProvider injects CSS custom properties for tenant branding
- The TenantBranding type already includes `theme: 'LIGHT' | 'DARK' | 'SYSTEM'`
- Dark mode from next-themes (on `<html>`) should layer OVER tenant branding
- No conflict expected: tenant branding sets `--primary`, `--accent`, etc., which work in both modes
- Verify: when dark mode is active AND tenant has custom branding, both should apply correctly
- The ethics portal layout should respect the global dark mode class from next-themes

**Ethics portal layout (`app/ethics/[tenant]/layout.tsx`):**
- Ensure the layout passes through the dark mode class from `<html>`
- The TenantThemeProvider injects CSS — this should work with `.dark` class
- Background: should use `bg-background` (responds to both tenant branding and dark mode)

**theme-skeleton.tsx (~21 hardcoded colors):**
- Loading skeleton: `bg-gray-*` → `bg-muted` with appropriate pulse animation
- Text placeholders: use skeleton bg colors

**Ethics status-badge.tsx:**
- Already has dark variants — verify all statuses covered

**confirmation-page.tsx, access-code-display.tsx, smart-prompts.tsx:**
- Already have some dark variants — verify and complete any remaining hardcoded colors

**report-form.tsx:**
- Has 1 dark variant — complete remaining form styling
- Form sections, labels, inputs (inputs use shadcn components, auto-adapt)
- Category selector styling

**message-thread.tsx, message-composer.tsx:**
- Message bubbles: outgoing vs incoming distinction should work in dark mode
- Compose area: `bg-white` → `bg-card`
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - Ethics portal with tenant branding renders correctly in dark mode
  - Report submission flow usable in dark mode
  </verify>
  <done>All 20 ethics portal components render correctly in dark mode. Tenant branding coordinates with dark mode without conflicts.</done>
</task>

<task type="auto">
  <name>Task 2: Theme conflict review components</name>
  <files>
    apps/frontend/src/components/conflicts/ConflictAlert.tsx
    apps/frontend/src/components/conflicts/ConflictQueue.tsx
    apps/frontend/src/components/conflicts/EntityTimeline.tsx
  </files>
  <action>
**ConflictAlert (`ConflictAlert.tsx` — ~26 hardcoded colors):**
- Alert card background: `bg-white` → `bg-card`
- Conflict type indicators: use `semanticColors` from theme-colors.ts
  - VENDOR_MATCH, GIFT_AGGREGATE → info (blue)
  - APPROVAL_AUTHORITY, SELF_DEALING → warning (amber)
  - PRIOR_CASE_HISTORY → neutral (gray)
  - RELATIONSHIP_PATTERN → purple
  - HRIS_MATCH → info (blue)
- Severity indicators: use `getSeverityColor()` from theme-colors.ts
- Confidence score bars: add dark variants for the track
- Dismiss/resolve buttons: check hover states
- Section headers, labels: semantic tokens
- Evidence section backgrounds: `bg-gray-50` → `bg-muted/50`
- Dismissal reason dropdown content should auto-adapt via shadcn Select

**ConflictQueue (`ConflictQueue.tsx`):**
- Queue list items: standard migration
- Filter bar: standard migration
- Status indicators: use theme-colors.ts

**EntityTimeline (`EntityTimeline.tsx`):**
- Timeline line: already uses `bg-muted` (good)
- Event type color badges are hardcoded: `bg-blue-100 text-blue-600`, `bg-orange-100 text-orange-600`, etc.
- Add dark variants to all event type colors:
  - Disclosure events: `bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400`
  - Conflict events: `bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400`
  - Case events: `bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400`
  - Exclusion events: `bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400`
- Event content cards: standard migration
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - Conflict review page readable in dark mode
  - Entity timeline visible with proper color coding in dark mode
  </verify>
  <done>All 3 conflict components render correctly in dark mode. Conflict type and event type indicators have dark variants.</done>
</task>

</tasks>

<verification>
- `cd apps/frontend && npx tsc --noEmit` passes
- Ethics portal report flow works in dark mode
- Tenant branding + dark mode layer correctly
- Conflict queue and entity timeline readable in dark mode
</verification>

<success_criteria>
- Ethics portal fully dark-mode-compatible with tenant branding coordination
- Conflict review components properly themed
- All status indicators use centralized color system
</success_criteria>

<output>
After completion, create `.planning/phases/22-dark-mode-theme/22-09-SUMMARY.md`
</output>
