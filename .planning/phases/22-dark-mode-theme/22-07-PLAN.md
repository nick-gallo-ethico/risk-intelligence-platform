---
phase: 22-dark-mode-theme
plan: 07
type: execute
wave: 3
depends_on: ["22-02", "22-03"]
files_modified:
  - apps/frontend/src/components/investigations/investigation-detail-panel.tsx
  - apps/frontend/src/components/investigations/investigation-header.tsx
  - apps/frontend/src/components/investigations/investigation-overview.tsx
  - apps/frontend/src/components/investigations/investigation-findings.tsx
  - apps/frontend/src/components/investigations/investigation-notes.tsx
  - apps/frontend/src/components/investigations/note-card.tsx
  - apps/frontend/src/components/investigations/add-note-modal.tsx
  - apps/frontend/src/components/investigations/checklist-panel.tsx
  - apps/frontend/src/components/investigations/checklist-item.tsx
  - apps/frontend/src/components/investigations/template-selector.tsx
  - apps/frontend/src/components/views/DataTable.tsx
  - apps/frontend/src/components/views/BoardView.tsx
  - apps/frontend/src/components/views/BoardColumn.tsx
  - apps/frontend/src/components/views/BoardCard.tsx
autonomous: true

must_haves:
  truths:
    - "Investigation detail page (header, overview, findings, notes, checklist) renders correctly in dark mode"
    - "Checklist panel and items are readable and interactive in dark mode"
    - "DataTable with sticky columns renders correctly in dark mode"
    - "BoardView (Kanban) renders correctly in dark mode"
  artifacts:
    - path: "apps/frontend/src/components/investigations/checklist-panel.tsx"
      provides: "Dark-mode-compatible checklist panel"
    - path: "apps/frontend/src/components/views/DataTable.tsx"
      provides: "Dark-mode-compatible data table with fixed shadows"
  key_links:
    - from: "DataTable.tsx"
      to: "globals.css"
      via: "bg-background for frozen cells"
      pattern: "bg-background"
---

<objective>
Theme investigation components (10 files, ~80 hardcoded colors) and the core DataTable/BoardView system (4 files, ~30 hardcoded colors). These are the primary data display components used across all modules.

Purpose: Investigations are the second most-used feature. DataTable and BoardView are reused across Cases, Investigations, Policies, Disclosures, and more — theming them here benefits all modules.
Output: Investigation components and data grid/board views fully dark-mode-compatible.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-dark-mode-theme/22-RESEARCH.md
@apps/frontend/src/lib/theme-colors.ts
@apps/frontend/src/components/investigations/checklist-panel.tsx
@apps/frontend/src/components/investigations/checklist-item.tsx
@apps/frontend/src/components/views/DataTable.tsx
@apps/frontend/src/components/views/BoardView.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Theme investigation components</name>
  <files>
    apps/frontend/src/components/investigations/investigation-detail-panel.tsx
    apps/frontend/src/components/investigations/investigation-header.tsx
    apps/frontend/src/components/investigations/investigation-overview.tsx
    apps/frontend/src/components/investigations/investigation-findings.tsx
    apps/frontend/src/components/investigations/investigation-notes.tsx
    apps/frontend/src/components/investigations/note-card.tsx
    apps/frontend/src/components/investigations/add-note-modal.tsx
    apps/frontend/src/components/investigations/checklist-panel.tsx
    apps/frontend/src/components/investigations/checklist-item.tsx
    apps/frontend/src/components/investigations/template-selector.tsx
  </files>
  <action>
Apply the standard color migration pattern to all 10 investigation components:

**Standard replacements (apply to ALL files):**
- `bg-white` → `bg-card`
- `bg-gray-50` → `bg-muted/50`
- `bg-gray-100` → `bg-muted`
- `text-gray-900` / `text-gray-800` → `text-foreground`
- `text-gray-700` → `text-foreground`
- `text-gray-500` / `text-gray-600` → `text-muted-foreground`
- `border-gray-200` / `border-gray-300` → `border-border`
- `hover:bg-gray-50` / `hover:bg-gray-100` → `hover:bg-accent` or `hover:bg-muted/50`
- `divide-gray-200` → `divide-border`

**Specific component notes:**

**Checklist Panel (`checklist-panel.tsx` — ~24 hardcoded colors):**
- Panel background: `bg-white` → `bg-card`
- Section headers: semantic tokens
- Progress indicators: check bar colors
- Empty state text

**Checklist Item (`checklist-item.tsx` — ~23 hardcoded colors):**
- Item background: check for alternating row colors
- Completed items: may have green tint — add dark variant
- Required indicator: ensure red indicator visible in dark mode
- Evidence badge: use theme-colors.ts
- Dependency indicators: check colors

**Investigation Header:**
- Status badge: use `getStatusColor()` from theme-colors.ts
- Assignee info, dates: semantic tokens

**Note Card:**
- Card background: `bg-white` → `bg-card`
- Author info: `text-gray-500` → `text-muted-foreground`
- Timestamp: `text-gray-400` → `text-muted-foreground`

**Template Selector:**
- Template list items: standard migration
- Selected template highlight
- Template tier indicators
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - Investigation detail page renders correctly in dark mode
  - Checklist items readable and interactive in dark mode
  </verify>
  <done>All 10 investigation components render correctly in dark mode. Checklists are readable with proper contrast.</done>
</task>

<task type="auto">
  <name>Task 2: Theme DataTable, BoardView, and related view components</name>
  <files>
    apps/frontend/src/components/views/DataTable.tsx
    apps/frontend/src/components/views/BoardView.tsx
    apps/frontend/src/components/views/BoardColumn.tsx
    apps/frontend/src/components/views/BoardCard.tsx
    apps/frontend/src/components/views/ViewToolbar.tsx
    apps/frontend/src/components/views/ViewTabsBar.tsx
    apps/frontend/src/components/views/SortableViewTab.tsx
    apps/frontend/src/components/views/ViewModeToggle.tsx
    apps/frontend/src/components/views/QuickFiltersRow.tsx
    apps/frontend/src/components/views/PaginationBar.tsx
    apps/frontend/src/components/views/BulkActionsBar.tsx
  </files>
  <action>
**DataTable (`DataTable.tsx`):**
- The main DataTable already uses many semantic tokens (bg-muted, bg-primary/5, hover:bg-muted/50, bg-background)
- Fix the hardcoded frozen column shadow: `shadow-[2px_0_4px_-2px_rgba(0,0,0,0.1)]`
  → Change to `shadow-[2px_0_4px_-2px_rgba(0,0,0,0.1)] dark:shadow-[2px_0_4px_-2px_rgba(0,0,0,0.3)]`
  (darker shadow in dark mode for visibility)
- Check for any remaining `bg-white` or `text-gray-*` and replace

**BoardView (`BoardView.tsx`):**
- Board background: `bg-gray-50` → `bg-muted/30` or `bg-background`
- Any scroll area background

**BoardColumn (`BoardColumn.tsx`):**
- Column background: `bg-white` / `bg-gray-50` → `bg-card` / `bg-muted/50`
- Column header: ensure text is readable
- Drop indicator/placeholder styling
- Column count badge

**BoardCard (`BoardCard.tsx`):**
- Card background: `bg-white` → `bg-card`
- Card border: `border-gray-200` → `border-border`
- Card hover: `hover:shadow-md` — verify shadow visible in dark mode
- Status/priority indicators: use theme-colors.ts
- Drag overlay: check that dragged card is visible against dark background

**ViewToolbar, ViewTabsBar, SortableViewTab, ViewModeToggle:**
- Toolbar background: `bg-white` → `bg-card` or `bg-background`
- Tab active state: ensure contrast in dark mode
- Mode toggle buttons: check active/inactive states
- Any `border-gray-*` → `border-border`

**QuickFiltersRow:**
- Filter dropdowns: should use shadcn Popover (auto-adapts)
- Filter chips/badges: standard migration

**PaginationBar, BulkActionsBar:**
- Bar backgrounds: `bg-white` → `bg-card`
- Button styling: check hover states
- Text: semantic tokens
  </action>
  <verify>
  - `cd apps/frontend && npx tsc --noEmit` should compile without errors
  - DataTable sticky column shadows visible in dark mode
  - BoardView/Kanban columns and cards readable in dark mode
  </verify>
  <done>DataTable and BoardView system fully dark-mode-compatible. Frozen column shadows, Kanban cards, and view controls all properly themed.</done>
</task>

</tasks>

<verification>
- `cd apps/frontend && npx tsc --noEmit` passes
- Investigation page with checklist renders correctly in dark mode
- DataTable with frozen columns shows proper shadows in dark mode
- Board/Kanban view cards and columns visible in dark mode
- Tables, modals, and form elements respect active theme (success criteria #6)
</verification>

<success_criteria>
- All investigation components dark-mode-compatible
- DataTable and BoardView (reused across all modules) dark-mode-compatible
- Sticky column shadows adapted for dark mode
</success_criteria>

<output>
After completion, create `.planning/phases/22-dark-mode-theme/22-07-SUMMARY.md`
</output>
