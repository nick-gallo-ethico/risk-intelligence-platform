---
phase: 25-case-investigation-page-redesign
plan: 04
type: execute
wave: 3
depends_on: ["25-01", "25-02", "25-03"]
files_modified:
  - apps/frontend/src/app/(authenticated)/investigations/[id]/page.tsx
  - apps/frontend/src/components/investigations/investigation-header.tsx
  - apps/frontend/src/components/investigations/investigation-info-summary.tsx
  - apps/frontend/src/components/investigations/investigation-action-buttons.tsx
  - apps/frontend/src/components/investigations/investigation-properties-panel.tsx
autonomous: true

must_haves:
  truths:
    - "Investigation page uses three-column grid layout matching case detail"
    - "Investigation header has breadcrumb with clickable case link"
    - "Investigation header shows badges for status, type, and SLA"
    - "Left sidebar has summary card, quick actions, and properties panel"
  artifacts:
    - path: "apps/frontend/src/app/(authenticated)/investigations/[id]/page.tsx"
      provides: "Three-column investigation detail page"
      contains: "grid-cols-[300px_1fr_300px]"
    - path: "apps/frontend/src/components/investigations/investigation-info-summary.tsx"
      provides: "Investigation summary card for left sidebar"
      exports: ["InvestigationInfoSummary"]
    - path: "apps/frontend/src/components/investigations/investigation-action-buttons.tsx"
      provides: "Investigation quick actions using QuickActionGrid"
      exports: ["InvestigationActionButtons"]
    - path: "apps/frontend/src/components/investigations/investigation-properties-panel.tsx"
      provides: "Editable investigation properties"
      exports: ["InvestigationPropertiesPanel"]
  key_links:
    - from: "apps/frontend/src/app/(authenticated)/investigations/[id]/page.tsx"
      to: "apps/frontend/src/components/investigations/investigation-info-summary.tsx"
      via: "import"
      pattern: "import.*InvestigationInfoSummary"
---

<objective>
Convert the investigation detail page from single-column to three-column layout matching the case detail pattern. Create left sidebar components (summary card, quick actions, properties panel) and enhance the header with breadcrumbs, badges, and pipeline progress.

Purpose: The investigation page is the second most-used record page. Converting to three-column layout provides consistent UX and answers the same three questions: "What is this?", "What happened?", "Who's connected?".
Output: Three-column investigation layout with complete left sidebar components.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@docs/CASE-INVESTIGATION-PAGE-REDESIGN.md

# Key source files

@apps/frontend/src/app/(authenticated)/investigations/[id]/page.tsx
@apps/frontend/src/components/investigations/investigation-header.tsx
@apps/frontend/src/app/(authenticated)/cases/[id]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert investigation page to three-column layout</name>
  <files>apps/frontend/src/app/(authenticated)/investigations/[id]/page.tsx</files>
  <action>
Transform the single-column investigation page to match the case detail three-column pattern.

1. Replace the current container layout with the three-column grid:

```tsx
// Replace: className="container mx-auto py-6 px-4 max-w-7xl"
// With:
<div className="min-h-screen bg-gray-50 flex flex-col">
  {/* Full-width header */}
  <div className="border-b bg-white">
    <div className="max-w-[1800px] mx-auto px-6 py-4">
      <InvestigationHeader investigation={investigation} />
    </div>
  </div>

  {/* Three-column grid */}
  <div className="flex-1 max-w-[1800px] mx-auto w-full px-6 py-6">
    <div className="grid grid-cols-1 lg:grid-cols-[300px_1fr_300px] gap-6 h-full">
      {/* Left Column - Summary, Actions, Properties */}
      <div className="space-y-4 lg:sticky lg:top-6 lg:self-start">
        <InvestigationInfoSummary investigation={investigation} />
        <InvestigationActionButtons
          investigationId={investigation.id}
          onAction={handleAction}
        />
        <InvestigationPropertiesPanel investigation={investigation} />
      </div>

      {/* Center Column - Tabs */}
      <div className="min-h-0 bg-white border rounded-lg overflow-hidden">
        {/* Tabs component - will be updated in Plan 05 */}
        <Tabs value={activeTab} onValueChange={setActiveTab}>
          {/* ... existing tabs code ... */}
        </Tabs>
      </div>

      {/* Right Column - Associations (Plan 06) */}
      <div className="space-y-4">
        {/* Placeholder for association cards */}
        <div className="text-sm text-gray-500 p-4 border rounded-lg bg-white">
          Association cards will be added in Plan 06
        </div>
      </div>
    </div>
  </div>
</div>
```

2. Remove the "Back to case" link from the body (it will be in the header breadcrumb).

3. Move the InvestigationHeader outside the grid to span full width above.

4. Add action handling state and handler:

```tsx
const [noteModalOpen, setNoteModalOpen] = useState(false);
const [interviewModalOpen, setInterviewModalOpen] = useState(false);
const [evidenceModalOpen, setEvidenceModalOpen] = useState(false);
const [taskModalOpen, setTaskModalOpen] = useState(false);

type InvestigationActionType =
  | "note"
  | "interview"
  | "evidence"
  | "task"
  | "checklist";

const handleAction = (action: InvestigationActionType) => {
  switch (action) {
    case "note":
      setNoteModalOpen(true);
      break;
    case "interview":
      setInterviewModalOpen(true);
      break;
    case "evidence":
      setEvidenceModalOpen(true);
      break;
    case "task":
      setTaskModalOpen(true);
      break;
    case "checklist":
      setActiveTab("checklist");
      break;
  }
};
```

5. Import the new components at the top (will be created in next tasks):

```tsx
import { InvestigationInfoSummary } from "@/components/investigations/investigation-info-summary";
import { InvestigationActionButtons } from "@/components/investigations/investigation-action-buttons";
import { InvestigationPropertiesPanel } from "@/components/investigations/investigation-properties-panel";
```

6. Add responsive behavior - on mobile (< lg), stack columns vertically.
   </action>
   <verify> - Investigation page renders three-column layout on desktop - Columns stack on mobile - Header spans full width above the grid - Left column is sticky on scroll - Center column contains tabs - Right column has placeholder for Plan 06
   </verify>
   <done>Investigation page converted to three-column layout structure</done>
   </task>

<task type="auto">
  <name>Task 2: Enhance investigation header with breadcrumbs and badges</name>
  <files>apps/frontend/src/components/investigations/investigation-header.tsx</files>
  <action>
Rewrite the investigation header to match case detail header pattern.

```typescript
"use client";

import Link from "next/link";
import {
  ChevronRight,
  MoreHorizontal,
  UserCircle,
  Clock,
  AlertTriangle,
} from "lucide-react";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Avatar, AvatarFallback } from "@/components/ui/avatar";
import { cn } from "@/lib/utils";
import type { Investigation } from "@/types/investigation";

interface InvestigationHeaderProps {
  investigation: Investigation;
  onAssign?: () => void;
  onStatusChange?: () => void;
}

// Pipeline stages for investigations
const PIPELINE_STAGES = ["New", "Assigned", "Investigating", "Review", "Closed"];

// Status badge colors
const STATUS_COLORS: Record<string, string> = {
  NEW: "bg-blue-100 text-blue-800",
  ASSIGNED: "bg-indigo-100 text-indigo-800",
  INVESTIGATING: "bg-yellow-100 text-yellow-800",
  PENDING_REVIEW: "bg-orange-100 text-orange-800",
  CLOSED: "bg-gray-100 text-gray-800",
  ON_HOLD: "bg-slate-100 text-slate-800",
};

// Type badge colors
const TYPE_COLORS: Record<string, string> = {
  FULL: "bg-purple-100 text-purple-800",
  LIMITED: "bg-blue-100 text-blue-800",
  INQUIRY: "bg-gray-100 text-gray-800",
};

// SLA status colors
const SLA_COLORS: Record<string, string> = {
  ON_TRACK: "bg-green-50 text-green-700 border-green-200",
  WARNING: "bg-yellow-50 text-yellow-700 border-yellow-200",
  OVERDUE: "bg-red-50 text-red-700 border-red-200",
};

export function InvestigationHeader({
  investigation,
  onAssign,
  onStatusChange,
}: InvestigationHeaderProps) {
  // Determine current pipeline stage index
  const currentStageIndex = (() => {
    switch (investigation.status) {
      case "NEW": return 0;
      case "ASSIGNED": return 1;
      case "INVESTIGATING": return 2;
      case "PENDING_REVIEW": return 3;
      case "CLOSED": return 4;
      default: return 0;
    }
  })();

  // Calculate days since creation
  const daysOpen = Math.floor(
    (Date.now() - new Date(investigation.createdAt).getTime()) / (1000 * 60 * 60 * 24)
  );

  // Determine SLA status
  const slaStatus = investigation.slaStatus || "ON_TRACK";

  return (
    <div className="space-y-4">
      {/* Breadcrumb */}
      <nav className="flex items-center text-sm text-gray-500">
        <Link href="/cases" className="hover:text-gray-700">
          Cases
        </Link>
        <ChevronRight className="h-4 w-4 mx-1" />
        <Link
          href={`/cases/${investigation.caseId}`}
          className="hover:text-gray-700"
        >
          {investigation.case?.referenceNumber || "Case"}
        </Link>
        <ChevronRight className="h-4 w-4 mx-1" />
        <span className="text-gray-900 font-medium">
          Investigation #{investigation.investigationNumber}
        </span>
      </nav>

      {/* Title row */}
      <div className="flex items-start justify-between">
        <div className="space-y-2">
          {/* Title + Badges */}
          <div className="flex items-center gap-3">
            <h1 className="text-2xl font-bold text-gray-900">
              Investigation #{investigation.investigationNumber}
            </h1>
            <Badge className={STATUS_COLORS[investigation.status] || "bg-gray-100"}>
              {investigation.status?.replace("_", " ")}
            </Badge>
            {investigation.type && (
              <Badge className={TYPE_COLORS[investigation.type] || "bg-gray-100"}>
                {investigation.type}
              </Badge>
            )}
            <Badge
              variant="outline"
              className={cn("border", SLA_COLORS[slaStatus])}
            >
              {slaStatus === "ON_TRACK" && "On Track"}
              {slaStatus === "WARNING" && (
                <>
                  <AlertTriangle className="h-3 w-3 mr-1" />
                  Warning
                </>
              )}
              {slaStatus === "OVERDUE" && (
                <>
                  <AlertTriangle className="h-3 w-3 mr-1" />
                  Overdue
                </>
              )}
            </Badge>
          </div>

          {/* Category */}
          {investigation.category && (
            <p className="text-sm text-gray-600">{investigation.category.name}</p>
          )}
        </div>

        {/* Actions */}
        <div className="flex items-center gap-2">
          <Button variant="outline" size="sm" onClick={onAssign}>
            Assign
          </Button>
          <Button variant="outline" size="sm" onClick={onStatusChange}>
            Status
          </Button>
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button variant="ghost" size="sm" className="h-8 w-8 p-0">
                <MoreHorizontal className="h-4 w-4" />
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              <DropdownMenuItem>Export</DropdownMenuItem>
              <DropdownMenuItem>Print</DropdownMenuItem>
              <DropdownMenuItem className="text-red-600">Archive</DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>
      </div>

      {/* Info row - Pipeline + Meta */}
      <div className="flex items-center justify-between pt-4 border-t">
        {/* Pipeline progress */}
        <div className="flex items-center gap-1">
          {PIPELINE_STAGES.map((stage, idx) => (
            <div key={stage} className="flex items-center">
              <div
                className={cn(
                  "w-24 h-2 rounded-full",
                  idx < currentStageIndex
                    ? "bg-green-500"
                    : idx === currentStageIndex
                      ? "bg-blue-500"
                      : "bg-gray-200"
                )}
              />
              {idx < PIPELINE_STAGES.length - 1 && (
                <div className="w-1" />
              )}
            </div>
          ))}
          <span className="text-xs text-gray-500 ml-2">
            {PIPELINE_STAGES[currentStageIndex]}
          </span>
        </div>

        {/* Meta info */}
        <div className="flex items-center gap-6 text-sm text-gray-500">
          {/* Created date */}
          <div className="flex items-center gap-1">
            <Clock className="h-4 w-4" />
            <span>
              {new Date(investigation.createdAt).toLocaleDateString()} Â· {daysOpen}d
            </span>
          </div>

          {/* Assigned investigators */}
          {investigation.assignedInvestigators && investigation.assignedInvestigators.length > 0 && (
            <div className="flex items-center gap-1">
              <div className="flex -space-x-2">
                {investigation.assignedInvestigators.slice(0, 3).map((inv) => (
                  <Avatar key={inv.id} className="h-6 w-6 border-2 border-white">
                    <AvatarFallback className="text-xs bg-gray-200">
                      {inv.firstName?.[0]}{inv.lastName?.[0]}
                    </AvatarFallback>
                  </Avatar>
                ))}
                {investigation.assignedInvestigators.length > 3 && (
                  <Avatar className="h-6 w-6 border-2 border-white">
                    <AvatarFallback className="text-xs bg-gray-200">
                      +{investigation.assignedInvestigators.length - 3}
                    </AvatarFallback>
                  </Avatar>
                )}
              </div>
            </div>
          )}

          {/* SLA Due */}
          {investigation.dueDate && (
            <div className="flex items-center gap-1">
              <span>Due: {new Date(investigation.dueDate).toLocaleDateString()}</span>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}
```

Update the Investigation type if needed to include case, slaStatus, and other fields referenced.
</action>
<verify> - Header has three-level breadcrumb: Cases > {caseRef} > Investigation #N - Breadcrumb links are clickable - Status, Type, and SLA badges displayed - Pipeline progress bar shows current stage - Assigned investigator avatars shown - Days open and due date displayed - Assign and Status action buttons present
</verify>
<done>Investigation header enhanced with breadcrumbs, badges, pipeline, and meta info</done>
</task>

<task type="auto">
  <name>Task 3: Create left sidebar components (summary, actions, properties)</name>
  <files>
    apps/frontend/src/components/investigations/investigation-info-summary.tsx
    apps/frontend/src/components/investigations/investigation-action-buttons.tsx
    apps/frontend/src/components/investigations/investigation-properties-panel.tsx
  </files>
  <action>
1. Create InvestigationInfoSummary:

```typescript
"use client";

import { CheckCircle2, Circle, AlertCircle } from "lucide-react";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { cn } from "@/lib/utils";
import type { Investigation } from "@/types/investigation";

interface InvestigationInfoSummaryProps {
  investigation: Investigation;
}

const STATUS_COLORS: Record<string, string> = {
  NEW: "bg-blue-100 text-blue-800",
  ASSIGNED: "bg-indigo-100 text-indigo-800",
  INVESTIGATING: "bg-yellow-100 text-yellow-800",
  PENDING_REVIEW: "bg-orange-100 text-orange-800",
  CLOSED: "bg-gray-100 text-gray-800",
  ON_HOLD: "bg-slate-100 text-slate-800",
};

export function InvestigationInfoSummary({ investigation }: InvestigationInfoSummaryProps) {
  // Calculate checklist progress
  const checklistProgress = investigation.checklistProgress || 0;
  const hasTemplate = !!investigation.templateId;
  const hasFindings = investigation.status === "PENDING_REVIEW" || investigation.status === "CLOSED";

  // Milestone checklist items
  const milestones = [
    {
      label: "Assigned to investigators",
      complete: investigation.assignedInvestigators && investigation.assignedInvestigators.length > 0,
    },
    {
      label: "Template applied",
      complete: hasTemplate,
    },
    {
      label: `Checklist ${checklistProgress}% complete`,
      complete: checklistProgress >= 100,
      inProgress: checklistProgress > 0 && checklistProgress < 100,
    },
    {
      label: "Interviews scheduled",
      complete: (investigation.interviewsCount || 0) > 0,
    },
    {
      label: "Findings recorded",
      complete: hasFindings,
    },
  ];

  return (
    <Card className="shadow-sm">
      <CardHeader className="py-3 px-4">
        <CardTitle className="text-sm font-semibold">
          Investigation #{investigation.investigationNumber}
        </CardTitle>
        <div className="flex items-center gap-2 mt-1">
          <Badge className={STATUS_COLORS[investigation.status] || "bg-gray-100"}>
            {investigation.status?.replace("_", " ")}
          </Badge>
          {investigation.type && (
            <Badge variant="outline">{investigation.type}</Badge>
          )}
        </div>
      </CardHeader>
      <CardContent className="py-2 px-4">
        {/* Progress checklist */}
        <div className="space-y-2">
          {milestones.map((milestone, idx) => (
            <div key={idx} className="flex items-start gap-2">
              {milestone.complete ? (
                <CheckCircle2 className="h-4 w-4 text-green-500 mt-0.5" />
              ) : milestone.inProgress ? (
                <AlertCircle className="h-4 w-4 text-yellow-500 mt-0.5" />
              ) : (
                <Circle className="h-4 w-4 text-gray-300 mt-0.5" />
              )}
              <span
                className={cn(
                  "text-sm",
                  milestone.complete ? "text-gray-700" : "text-gray-500"
                )}
              >
                {milestone.label}
              </span>
            </div>
          ))}
        </div>

        {/* Created info */}
        <div className="mt-4 pt-3 border-t text-xs text-gray-500">
          <p>
            Created:{" "}
            {new Date(investigation.createdAt).toLocaleDateString("en-US", {
              month: "short",
              day: "numeric",
              year: "numeric",
            })}
          </p>
          {investigation.createdBy && (
            <p>By: {investigation.createdBy.firstName} {investigation.createdBy.lastName}</p>
          )}
        </div>
      </CardContent>
    </Card>
  );
}
```

2. Create InvestigationActionButtons using QuickActionGrid:

```typescript
"use client";

import { StickyNote, Mic, FileText, CheckSquare, ClipboardList, MoreHorizontal } from "lucide-react";
import { QuickActionGrid, type QuickAction } from "@/components/shared/quick-action-grid";

export type InvestigationActionType = "note" | "interview" | "evidence" | "task" | "checklist";

interface InvestigationActionButtonsProps {
  investigationId: string;
  onAction: (action: InvestigationActionType) => void;
  className?: string;
}

export function InvestigationActionButtons({
  investigationId,
  onAction,
  className,
}: InvestigationActionButtonsProps) {
  const actions: QuickAction[] = [
    { id: "note", label: "Note", icon: StickyNote, onClick: () => onAction("note") },
    { id: "interview", label: "Interview", icon: Mic, onClick: () => onAction("interview") },
    { id: "evidence", label: "Evidence", icon: FileText, onClick: () => onAction("evidence") },
    { id: "task", label: "Task", icon: CheckSquare, onClick: () => onAction("task") },
    { id: "checklist", label: "Checklist", icon: ClipboardList, onClick: () => onAction("checklist") },
  ];

  return <QuickActionGrid actions={actions} columns={3} className={className} />;
}
```

3. Create InvestigationPropertiesPanel:

```typescript
"use client";

import { useState } from "react";
import { ChevronRight, Settings2, Calendar, User, Clock } from "lucide-react";
import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";
import type { Investigation } from "@/types/investigation";

interface InvestigationPropertiesPanelProps {
  investigation: Investigation;
  onUpdate?: (updates: Partial<Investigation>) => void;
}

type SectionId = "status" | "assignment" | "timeline" | "template" | "findings";

export function InvestigationPropertiesPanel({
  investigation,
  onUpdate,
}: InvestigationPropertiesPanelProps) {
  const [expandedSections, setExpandedSections] = useState<SectionId[]>([
    "status",
    "assignment",
  ]);

  const toggleSection = (section: SectionId) => {
    setExpandedSections((prev) =>
      prev.includes(section)
        ? prev.filter((s) => s !== section)
        : [...prev, section]
    );
  };

  const renderSectionHeader = (
    id: SectionId,
    title: string,
    icon: React.ReactNode
  ) => (
    <button
      onClick={() => toggleSection(id)}
      className="w-full flex items-center justify-between py-3 px-1 hover:bg-gray-50 rounded"
    >
      <div className="flex items-center gap-2">
        <ChevronRight
          className={cn(
            "h-4 w-4 text-gray-500 transition-transform duration-200",
            expandedSections.includes(id) && "rotate-90"
          )}
        />
        {icon}
        <span className="text-sm font-semibold text-gray-900">{title}</span>
      </div>
      <Settings2
        className="h-4 w-4 text-gray-400 hover:text-gray-600"
        onClick={(e) => e.stopPropagation()}
      />
    </button>
  );

  const showFindings =
    investigation.status === "PENDING_REVIEW" ||
    investigation.status === "CLOSED";

  return (
    <Card className="shadow-sm">
      <CardContent className="p-2 divide-y">
        {/* Status & Classification */}
        <div>
          {renderSectionHeader("status", "Status & Classification", null)}
          {expandedSections.includes("status") && (
            <div className="px-6 pb-3 space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">Status</span>
                <Badge>{investigation.status?.replace("_", " ")}</Badge>
              </div>
              {investigation.statusRationale && (
                <div>
                  <span className="text-sm text-gray-500">Rationale</span>
                  <p className="text-sm text-gray-700 mt-1">
                    {investigation.statusRationale}
                  </p>
                </div>
              )}
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">Type</span>
                <span className="text-sm text-gray-900">
                  {investigation.type || "Not set"}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">Department</span>
                <span className="text-sm text-gray-900">
                  {investigation.department || "Not set"}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">SLA Status</span>
                <Badge
                  variant={
                    investigation.slaStatus === "OVERDUE"
                      ? "destructive"
                      : investigation.slaStatus === "WARNING"
                        ? "outline"
                        : "secondary"
                  }
                >
                  {investigation.slaStatus || "On Track"}
                </Badge>
              </div>
            </div>
          )}
        </div>

        {/* Assignment */}
        <div>
          {renderSectionHeader("assignment", "Assignment", <User className="h-4 w-4 text-gray-400" />)}
          {expandedSections.includes("assignment") && (
            <div className="px-6 pb-3 space-y-3">
              <div>
                <span className="text-sm text-gray-500">Primary Investigator</span>
                {investigation.assignedInvestigators?.[0] ? (
                  <p className="text-sm text-gray-900">
                    {investigation.assignedInvestigators[0].firstName}{" "}
                    {investigation.assignedInvestigators[0].lastName}
                  </p>
                ) : (
                  <p className="text-sm text-gray-400">Unassigned</p>
                )}
              </div>
              {investigation.assignedInvestigators && investigation.assignedInvestigators.length > 1 && (
                <div>
                  <span className="text-sm text-gray-500">Additional Investigators</span>
                  <p className="text-sm text-gray-900">
                    {investigation.assignedInvestigators.slice(1).map(inv =>
                      `${inv.firstName} ${inv.lastName}`
                    ).join(", ")}
                  </p>
                </div>
              )}
              {investigation.assignedAt && (
                <div className="flex justify-between items-center">
                  <span className="text-sm text-gray-500">Assigned Date</span>
                  <span className="text-sm text-gray-900">
                    {new Date(investigation.assignedAt).toLocaleDateString()}
                  </span>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Timeline */}
        <div>
          {renderSectionHeader("timeline", "Timeline", <Calendar className="h-4 w-4 text-gray-400" />)}
          {expandedSections.includes("timeline") && (
            <div className="px-6 pb-3 space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">Due Date</span>
                <span className="text-sm text-gray-900">
                  {investigation.dueDate
                    ? new Date(investigation.dueDate).toLocaleDateString()
                    : "Not set"}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">Created</span>
                <span className="text-sm text-gray-900">
                  {new Date(investigation.createdAt).toLocaleDateString()}
                </span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-500">Last Updated</span>
                <span className="text-sm text-gray-900">
                  {new Date(investigation.updatedAt).toLocaleDateString()}
                </span>
              </div>
              {investigation.status === "CLOSED" && investigation.closedAt && (
                <div className="flex justify-between items-center">
                  <span className="text-sm text-gray-500">Closed Date</span>
                  <span className="text-sm text-gray-900">
                    {new Date(investigation.closedAt).toLocaleDateString()}
                  </span>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Template & Checklist */}
        <div>
          {renderSectionHeader("template", "Template & Checklist", <Clock className="h-4 w-4 text-gray-400" />)}
          {expandedSections.includes("template") && (
            <div className="px-6 pb-3 space-y-3">
              <div>
                <span className="text-sm text-gray-500">Template</span>
                <p className="text-sm text-gray-900">
                  {investigation.templateName || "No template applied"}
                </p>
              </div>
              {investigation.checklistProgress !== undefined && (
                <div>
                  <span className="text-sm text-gray-500">Checklist Progress</span>
                  <div className="mt-1 flex items-center gap-2">
                    <div className="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                      <div
                        className="h-full bg-blue-500 rounded-full"
                        style={{ width: `${investigation.checklistProgress}%` }}
                      />
                    </div>
                    <span className="text-sm text-gray-700">
                      {investigation.checklistProgress}%
                    </span>
                  </div>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Findings (conditional) */}
        {showFindings && (
          <div>
            {renderSectionHeader("findings", "Findings", null)}
            {expandedSections.includes("findings") && (
              <div className="px-6 pb-3 space-y-3">
                <div>
                  <span className="text-sm text-gray-500">Outcome</span>
                  <p className="text-sm text-gray-900">
                    {investigation.outcome || "Pending"}
                  </p>
                </div>
                {investigation.rootCause && (
                  <div>
                    <span className="text-sm text-gray-500">Root Cause</span>
                    <p className="text-sm text-gray-700">{investigation.rootCause}</p>
                  </div>
                )}
              </div>
            )}
          </div>
        )}
      </CardContent>
    </Card>
  );
}
```

  </action>
  <verify>
    - InvestigationInfoSummary shows milestone checklist with checkmarks
    - InvestigationActionButtons uses QuickActionGrid with 3 columns
    - InvestigationPropertiesPanel has 4-5 collapsible sections
    - Properties panel sections have chevron toggles and gear icons
    - All components render in the left column of the page
  </verify>
  <done>Left sidebar components created: summary card, quick actions, properties panel</done>
</task>

</tasks>

<verification>
1. Investigation page uses three-column grid layout on desktop
2. Header has breadcrumb: Cases > {caseRef} > Investigation #N
3. Header shows status, type, and SLA badges
4. Header shows pipeline progress bar with current stage highlighted
5. Left column has summary card with milestone checklist
6. Left column has quick action grid (Note, Interview, Evidence, Task, Checklist)
7. Left column has properties panel with collapsible sections
8. Properties panel sections have chevron toggles and gear icons
9. Page is responsive (stacks on mobile)
10. TypeScript compilation passes: `npm run typecheck`
</verification>

<success_criteria>

- Investigation page matches case detail three-column structure
- Header provides full context (breadcrumb, badges, pipeline, assignees, dates)
- Left sidebar provides identity + properties + actions
- Quick actions use shared QuickActionGrid component
- Properties panel matches case properties panel pattern
- Layout is responsive on mobile
  </success_criteria>

<output>
After completion, create `.planning/phases/25-case-investigation-page-redesign/25-04-SUMMARY.md`
</output>
