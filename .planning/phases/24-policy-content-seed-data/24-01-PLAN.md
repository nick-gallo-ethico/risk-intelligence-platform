---
phase: 24-policy-content-seed-data
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/backend/prisma/seeders/policy.seeder.ts
autonomous: true

must_haves:
  truths:
    - "All 26 generated policies contain substantial, unique content (not boilerplate)"
    - "Policy content reads like real enterprise compliance documents with sections, headers, numbered lists"
    - "ADDITIONAL policies have expanded content matching CORE policy depth"
    - "Policies use varied statuses (PUBLISHED, DRAFT, RETIRED), dates, and version patterns"
    - "Generated translations use [LANG] markers on heading text (existing pattern preserved)"
  artifacts:
    - path: "apps/backend/prisma/seeders/policy.seeder.ts"
      provides: "50 policies with substantial, realistic content"
      contains: "generateAdditionalPolicies"
  key_links:
    - from: "apps/backend/prisma/seeders/policy.seeder.ts"
      to: "prisma.policy.create"
      via: "seedPolicies function"
      pattern: "prisma\\.policy\\.create"
---

<objective>
Replace the 26 boilerplate generated policies with substantial, unique enterprise compliance policy content. Expand ADDITIONAL policies to match CORE policy depth. Add status/date variety across all 50 policies.

Purpose: The policy library is a key demo feature. Currently 26 of 50 policies use an identical 5-section ~200-char template that looks obviously fake. Each policy needs unique, professional content.

Output: Updated policy.seeder.ts with all 50 policies containing realistic, formatted policy text.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@apps/backend/prisma/seeders/policy.seeder.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace 26 generated policies with substantial unique content and add variety</name>
  <files>apps/backend/prisma/seeders/policy.seeder.ts</files>
  <action>
Replace the `generateAdditionalPolicies()` function with a static `GENERATED_POLICIES: PolicyDefinition[]` array containing 26 unique, realistic policy definitions. Each policy must have:

1. **Content length**: Each policy's HTML content must be 800-2000 characters (comparable to CORE policies which are ~1500-2500 chars). Use proper HTML structure: h1 title, h2 sections, p paragraphs, ul/li lists, and occasional tables.

2. **Unique content per policy**: Each of these 26 topics needs topic-specific content. The 26 topics from the current `topics` array are:
   - Overtime Compensation, Leave of Absence, Performance Management, Grievance Procedure, Background Check, Employee Referral, Tuition Reimbursement, Company Vehicle Use, Expense Card Use, Meeting Room Policy, Visitor Access, Emergency Response, Fire Safety, Electrical Safety, Chemical Handling, Ergonomics, First Aid, Incident Investigation, Quality Assurance, Change Management, Project Management, Code Review, Release Management, Patch Management, Network Security, Cloud Security

   For each, write 4-6 sections with realistic compliance language. Example structure for "Overtime Compensation Policy":

   ```html
   <h1>Overtime Compensation Policy</h1>
   <h2>Purpose</h2>
   <p>
     This policy establishes guidelines for authorization, calculation, and
     payment of overtime compensation...
   </p>
   <h2>Eligibility</h2>
   <p>Non-exempt employees as classified under FLSA...</p>
   <h2>Authorization</h2>
   <p>All overtime must be pre-approved by...</p>
   <h2>Calculation</h2>
   <p>Overtime is paid at 1.5x regular rate for hours exceeding 40...</p>
   <h2>Record Keeping</h2>
   <p>Employees must accurately record all hours worked...</p>
   <h2>Violations</h2>
   <p>Unauthorized overtime or falsification of time records...</p>
   ```

3. **Assign specific PolicyType values** instead of all 'OTHER'. Map policies to appropriate types:
   - Network Security, Cloud Security, Patch Management -> INFORMATION_SECURITY
   - Background Check -> DATA_PRIVACY
   - Leave topics that don't fit to OTHER

4. **Expand ADDITIONAL_POLICIES content**: For each of the 13 ADDITIONAL policies (HIPAA Privacy, HIPAA Security, Vendor Management, Record Retention, Workplace Safety, Drug and Alcohol, Equal Employment, Remote Work, IP, Environmental, Business Continuity, Insider Trading, Antitrust), expand content to match CORE policy depth (add 2-3 more sections with realistic detail, bringing each from ~300-500 chars to ~1000-1500 chars).

5. **Add status and date variety** in the `seedPolicies` function:
   - ~80% PUBLISHED (current: 100%)
   - ~10% DRAFT (no publishedAt on versions, no effectiveDate on policy)
   - ~10% RETIRED (status: 'RETIRED', add retiredAt date)
   - Vary effectiveDate across: 2023-06-15, 2024-01-15, 2024-07-01, 2025-01-15, 2025-06-01
   - Vary reviewDate: 12 months after effectiveDate
   - Version patterns: some at v1 only (new policies), most at v2 (updated), a few at v3 (heavily revised)

6. **Update the allPolicies concatenation** to use the new static array:

   ```typescript
   const allPolicies = [
     ...CORE_POLICIES,
     ...ADDITIONAL_POLICIES,
     ...GENERATED_POLICIES,
   ];
   ```

7. **Make seeder update-capable (idempotent for content updates)**: Currently the seeder skips if a policy with the slug exists. Add an `upsert` pattern: if the policy exists, update its latest version content. Use `prisma.policy.upsert` or check-then-update pattern. This ensures re-running the seeder updates content without duplicating.

IMPORTANT: Do NOT change the existing CORE_POLICIES content - those 11 policies already have excellent content. Only expand ADDITIONAL and replace GENERATED.

Keep the translation generation pattern as-is (the [LANG] marker approach). Phase 24 scope does not include real translations.
</action>
<verify>

- TypeScript compiles: `cd apps/backend && npx tsc --noEmit --skipLibCheck 2>&1 | head -20`
- Count policies in allPolicies array: grep for slug definitions, expect 50
- Verify no generated policy has the old boilerplate pattern (search for "This policy establishes guidelines and requirements for" appearing more than 3 times)
- Verify ADDITIONAL policies have expanded content (search for content length > 500 chars per policy)
  </verify>
  <done>
- All 50 policies have unique, substantial HTML content (800+ chars for generated, 1000+ for additional)
- PolicyType values assigned beyond just OTHER for applicable generated policies
- Status variety: ~80% PUBLISHED, ~10% DRAFT, ~10% RETIRED
- Date variety: effectiveDates spread across 2023-2025
- Seeder updates existing content on re-run (idempotent)
- TypeScript compiles without errors
  </done>
  </task>

</tasks>

<verification>
1. `cd apps/backend && npx tsc --noEmit --skipLibCheck` compiles without errors
2. The file contains 50 distinct policy slugs (11 CORE + 13 ADDITIONAL + 26 GENERATED)
3. No two generated policies share identical content structure
4. At least 5 policies have status other than PUBLISHED
5. EffectiveDates span at least 3 different years
</verification>

<success_criteria>

- 50 policies with unique, realistic enterprise compliance content
- Content quality: professional language, proper HTML formatting, multiple sections per policy
- Status variety across PUBLISHED, DRAFT, RETIRED
- Date variety across 2023-2025
- Idempotent seeder (re-run updates content, doesn't duplicate)
- TypeScript compiles
  </success_criteria>

<output>
After completion, create `.planning/phases/24-policy-content-seed-data/24-01-SUMMARY.md`
</output>
