---
phase: 23-help-support-system
plan: 03
type: execute
wave: 2
depends_on: ["23-01"]
files_modified:
  - apps/frontend/src/app/(authenticated)/help/page.tsx
  - apps/frontend/src/app/(authenticated)/help/layout.tsx
  - apps/frontend/src/app/(authenticated)/help/articles/[slug]/page.tsx
  - apps/frontend/src/components/help/article-card.tsx
  - apps/frontend/src/components/help/category-grid.tsx
  - apps/frontend/src/components/help/article-search.tsx
autonomous: true

must_haves:
  truths:
    - "Navigating to /help shows a help center landing page with search and category grid"
    - "Users can search articles by typing in the search box and see matching results"
    - "Clicking a category shows articles in that category"
    - "Clicking an article navigates to /help/articles/:slug and shows full article content"
    - "Help landing page has a link to Submit a Support Ticket"
  artifacts:
    - path: "apps/frontend/src/app/(authenticated)/help/page.tsx"
      provides: "Help center landing page with search + category grid"
      min_lines: 40
    - path: "apps/frontend/src/app/(authenticated)/help/articles/[slug]/page.tsx"
      provides: "Individual article detail page"
      min_lines: 30
    - path: "apps/frontend/src/components/help/category-grid.tsx"
      provides: "Grid of category cards with article counts"
      exports: ["CategoryGrid"]
    - path: "apps/frontend/src/components/help/article-card.tsx"
      provides: "Article preview card for search results"
      exports: ["ArticleCard"]
    - path: "apps/frontend/src/components/help/article-search.tsx"
      provides: "Search input with debounced results"
      exports: ["ArticleSearch"]
  key_links:
    - from: "apps/frontend/src/app/(authenticated)/help/page.tsx"
      to: "apps/frontend/src/services/help.service.ts"
      via: "useQuery with helpApi.getCategories and helpApi.searchArticles"
      pattern: "(getCategories|searchArticles)"
    - from: "apps/frontend/src/app/(authenticated)/help/articles/[slug]/page.tsx"
      to: "apps/frontend/src/services/help.service.ts"
      via: "useQuery with helpApi.getArticle"
      pattern: "getArticle"
    - from: "apps/frontend/src/components/help/article-card.tsx"
      to: "/help/articles/[slug]"
      via: "Link component"
      pattern: "href.*\\/help\\/articles"
---

<objective>
Build the knowledge base frontend pages and components: help center landing page with search and category browsing, individual article detail page, and reusable help components.

Purpose: This is what users see when they click Help & Support. The landing page must be inviting with search and categories, and articles must render cleanly with full content.
Output: Working /help and /help/articles/:slug pages with search, category navigation, and article rendering.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-help-support-system/23-RESEARCH.md
@.planning/phases/23-help-support-system/23-01-SUMMARY.md

# Key reference files for page patterns

@apps/frontend/src/app/(authenticated)/policies/page.tsx
@apps/frontend/src/services/help.service.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Help center landing page with search and categories</name>
  <files>
    apps/frontend/src/app/(authenticated)/help/page.tsx
    apps/frontend/src/app/(authenticated)/help/layout.tsx
    apps/frontend/src/components/help/article-search.tsx
    apps/frontend/src/components/help/category-grid.tsx
    apps/frontend/src/components/help/article-card.tsx
  </files>
  <action>
**layout.tsx** — Simple layout wrapper for the help section. Include a breadcrumb-style header showing "Help & Support" as the section title. Follow the existing authenticated layout pattern (the `(authenticated)` route group already has a parent layout with sidebar). This layout just provides a consistent heading/padding.

**article-search.tsx** — `ArticleSearch` component:

- Text input with Search icon (lucide-react) and placeholder "Search articles..."
- Uses `useState` for the search query and `useQuery` from @tanstack/react-query to call `helpApi.searchArticles(query)`
- Debounce the search with a 300ms delay (use setTimeout/clearTimeout in useEffect, or a simple debounce helper)
- When query is non-empty, show search results below the input as a list of `ArticleCard` components
- When query is empty, show nothing (categories are shown by the parent page)
- Loading state: show a simple "Searching..." text or skeleton
- Empty results: show "No articles found for '{query}'"

**category-grid.tsx** — `CategoryGrid` component:

- Uses `useQuery` to call `helpApi.getCategories()`
- Renders a responsive grid of category cards (2 columns on mobile, 3 on md, 4 on lg)
- Each card shows: icon (use category-appropriate lucide-react icons — BookOpen for getting-started, FileText for cases, BarChart for reports, Settings for settings, HelpCircle for FAQ, etc.), category label, article count
- Clicking a category card either:
  - Navigates to `/help?category=${key}` (URL param approach), or
  - Sets local state to filter articles by category
- Prefer the URL param approach for shareability. Use `useSearchParams` to read the selected category.
- When a category is selected, show a back button and the articles in that category using `helpApi.searchArticles('', selectedCategory)` rendered as ArticleCard list

**article-card.tsx** — `ArticleCard` component:

- Props: article (ArticleListItem from help.service.ts)
- Renders a shadcn/ui Card with:
  - Title as card header (clickable Link to `/help/articles/${article.slug}`)
  - Excerpt as card content (truncated to 2 lines with CSS line-clamp)
  - Category badge and "Updated {date}" in card footer
  - Tags as small badges if present
- Use date-fns `formatDistanceToNow` for the update timestamp

**page.tsx** — Help center landing page:

- Hero section with centered heading "How can we help?" and the `ArticleSearch` component below it
- If URL has `?category=xxx` param, show filtered articles for that category with a "Back to all categories" link
- If no category selected and no search active, show `CategoryGrid`
- Below categories (or at bottom of page), show a "Can't find what you need?" section with a Button linking to `/help/tickets/new` labeled "Submit a Support Ticket" and a link to `/help/tickets` labeled "View My Tickets"
- Use `'use client'` directive at the top of page.tsx since it uses hooks

Use shadcn/ui components throughout: Card, CardHeader, CardContent, CardFooter, Input, Button, Badge. Import from the existing component library paths.
</action>
<verify>Run `cd apps/frontend && npx tsc --noEmit` to confirm compilation. Verify all component files exist and export the expected components.</verify>
<done>Help center landing page at /help shows search bar, category grid, and link to submit tickets. Components are reusable and follow existing patterns.</done>
</task>

<task type="auto">
  <name>Task 2: Article detail page</name>
  <files>apps/frontend/src/app/(authenticated)/help/articles/[slug]/page.tsx</files>
  <action>
Create the article detail page at `apps/frontend/src/app/(authenticated)/help/articles/[slug]/page.tsx`:

- Extract `slug` from route params (Next.js App Router pattern: `params.slug`)
- Use `useQuery` to call `helpApi.getArticle(slug)`
- Loading state: Show skeleton or spinner
- Error state: Show "Article not found" with link back to /help
- Success state:
  - Breadcrumb: Help & Support > {category} > {article title}
  - Article title as h1
  - Category badge + "Last updated {date}"
  - Article content rendered via `dangerouslySetInnerHTML={{ __html: article.content }}` wrapped in a `prose` Tailwind typography class container (use `@tailwindcss/typography` if available, or add basic prose styling: headings, paragraphs, lists, code blocks)
  - If @tailwindcss/typography is not installed, add reasonable inline styles: `article-content` class with styles for h1-h3, p, ul/ol, li, code, blockquote
  - Tags displayed as badges below the content
  - "Was this helpful?" section (optional, can be decorative buttons for now)
  - Navigation at bottom: "Back to Help Center" link to /help

- Use `'use client'` directive at top

Sanitization: Since articles are admin-authored (not user-generated), XSS risk is low. If DOMPurify is available in the project, use it. Otherwise, the dangerouslySetInnerHTML approach is acceptable per the research findings.
</action>
<verify>Run `cd apps/frontend && npx tsc --noEmit` to confirm compilation. Verify the file exists at the correct path for Next.js dynamic routing.</verify>
<done>Article detail page at /help/articles/[slug] renders full article content with breadcrumbs, metadata, and navigation back to help center. TypeScript compiles without errors.</done>
</task>

</tasks>

<verification>
1. `cd apps/frontend && npx tsc --noEmit` compiles without errors
2. /help page.tsx exists in the (authenticated) route group
3. /help/articles/[slug]/page.tsx exists for dynamic article routing
4. All 3 components (ArticleSearch, CategoryGrid, ArticleCard) export correctly
5. Category grid uses useQuery with helpApi.getCategories
6. Article search debounces input and calls helpApi.searchArticles
7. Article detail page renders HTML content safely
</verification>

<success_criteria>

- /help page shows search, category grid, and support ticket links
- Search results appear as you type with debounced API calls
- Category cards show article counts and filter by category on click
- /help/articles/:slug renders full article content with breadcrumbs
- All pages use 'use client' and React Query for data fetching
- TypeScript compiles without errors
  </success_criteria>

<output>
After completion, create `.planning/phases/23-help-support-system/23-03-SUMMARY.md`
</output>
