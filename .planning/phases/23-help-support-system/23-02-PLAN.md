---
phase: 23-help-support-system
plan: 02
type: execute
wave: 2
depends_on: ["23-01"]
files_modified:
  - apps/frontend/src/services/help.service.ts
  - apps/frontend/src/components/layout/app-sidebar.tsx
  - apps/frontend/src/components/layout/top-nav.tsx
  - apps/frontend/src/lib/navigation.ts
autonomous: true

must_haves:
  truths:
    - "Help & Support link appears in the sidebar footer (next to AI Assistant)"
    - "HelpCircle button in top nav opens a dropdown with Knowledge Base, Submit a Ticket, and My Tickets links"
    - "Frontend help API service can fetch articles, categories, create tickets, and list user tickets"
  artifacts:
    - path: "apps/frontend/src/services/help.service.ts"
      provides: "API client functions for all help endpoints"
      exports:
        [
          "helpApi",
          "searchArticles",
          "getArticle",
          "getCategories",
          "createTicket",
          "getMyTickets",
        ]
    - path: "apps/frontend/src/components/layout/app-sidebar.tsx"
      provides: "Help & Support link in sidebar footer"
      contains: "Help"
    - path: "apps/frontend/src/components/layout/top-nav.tsx"
      provides: "Help dropdown menu replacing no-op HelpCircle button"
      contains: "DropdownMenu"
  key_links:
    - from: "apps/frontend/src/services/help.service.ts"
      to: "/api/v1/help/"
      via: "apiClient.get/post calls"
      pattern: "apiClient\\.(get|post).*help"
    - from: "apps/frontend/src/components/layout/top-nav.tsx"
      to: "/help"
      via: "Next.js Link component in dropdown"
      pattern: "href.*\\/help"
    - from: "apps/frontend/src/components/layout/app-sidebar.tsx"
      to: "/help"
      via: "Next.js Link component in sidebar footer"
      pattern: "href.*\\/help"
---

<objective>
Create the frontend API service for help endpoints and wire up Help & Support navigation in both the sidebar and top navigation bar.

Purpose: Users need to reach the help section from two places (sidebar footer and top nav button). The API service provides the data layer that all help pages will consume.
Output: Working navigation links to /help routes, and a reusable help API service.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-help-support-system/23-RESEARCH.md
@.planning/phases/23-help-support-system/23-01-SUMMARY.md

# Key reference files

@apps/frontend/src/services/policies.ts
@apps/frontend/src/lib/api.ts
@apps/frontend/src/components/layout/app-sidebar.tsx
@apps/frontend/src/components/layout/top-nav.tsx
@apps/frontend/src/lib/navigation.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create help API service</name>
  <files>apps/frontend/src/services/help.service.ts</files>
  <action>
Create `apps/frontend/src/services/help.service.ts` following the exact pattern used in `apps/frontend/src/services/policies.ts` (apiClient import from `@/lib/api`).

Define TypeScript interfaces:

```typescript
export interface KnowledgeBaseArticle {
  id: string;
  slug: string;
  title: string;
  content: string;
  excerpt: string | null;
  category: string;
  tags: string[];
  updatedAt: string;
}

export interface ArticleListItem {
  id: string;
  slug: string;
  title: string;
  excerpt: string | null;
  category: string;
  tags: string[];
  updatedAt: string;
}

export interface ArticleCategory {
  key: string;
  label: string;
  count: number;
}

export interface SupportTicket {
  id: string;
  ticketNumber: string;
  subject: string;
  description: string;
  priority: "LOW" | "MEDIUM" | "HIGH" | "URGENT";
  status:
    | "OPEN"
    | "IN_PROGRESS"
    | "WAITING_ON_CUSTOMER"
    | "RESOLVED"
    | "CLOSED";
  category: string | null;
  createdAt: string;
  updatedAt: string;
}

export interface CreateTicketPayload {
  subject: string;
  description: string;
  priority?: "LOW" | "MEDIUM" | "HIGH" | "URGENT";
  category?: string;
}
```

Export API functions:

- `searchArticles(query?: string, category?: string)` — GET /api/v1/help/articles with URLSearchParams
- `getArticle(slug: string)` — GET /api/v1/help/articles/:slug
- `getCategories()` — GET /api/v1/help/categories
- `createTicket(data: CreateTicketPayload)` — POST /api/v1/help/tickets
- `getMyTickets(status?: string)` — GET /api/v1/help/tickets with optional status param

Export a barrel `helpApi` object with all functions.
</action>
<verify>Run `cd apps/frontend && npx tsc --noEmit` to confirm types compile.</verify>
<done>Help API service exists at apps/frontend/src/services/help.service.ts with all 5 API functions and TypeScript types.</done>
</task>

<task type="auto">
  <name>Task 2: Wire Help & Support into sidebar and top navigation</name>
  <files>
    apps/frontend/src/components/layout/app-sidebar.tsx
    apps/frontend/src/components/layout/top-nav.tsx
    apps/frontend/src/lib/navigation.ts
  </files>
  <action>
**app-sidebar.tsx** — Add a Help & Support link in the SidebarFooter section, positioned alongside the existing AI Assistant button. Use the existing SidebarMenuItem/SidebarMenuButton pattern:
```tsx
<SidebarMenuItem>
  <SidebarMenuButton tooltip="Help & Support" asChild>
    <Link href="/help">
      <HelpCircle />
      <span>Help & Support</span>
    </Link>
  </SidebarMenuButton>
</SidebarMenuItem>
```
Import `HelpCircle` from `lucide-react` and `Link` from `next/link`. Place this item in the sidebar footer, just before or after the AI Assistant item.

**top-nav.tsx** — Replace the existing no-op HelpCircle button (around line 263) with a dropdown menu. The current button is just `<Button>` with `<HelpCircle />` that does nothing. Replace it with:

```tsx
<DropdownMenu>
  <DropdownMenuTrigger asChild>
    <Button
      variant="ghost"
      size="icon"
      title="Help & Support"
      className="text-white/80 hover:text-white hover:bg-white/10"
    >
      <HelpCircle className="h-5 w-5" />
    </Button>
  </DropdownMenuTrigger>
  <DropdownMenuContent align="end" className="w-48">
    <DropdownMenuItem asChild>
      <Link href="/help">Knowledge Base</Link>
    </DropdownMenuItem>
    <DropdownMenuItem asChild>
      <Link href="/help/tickets/new">Submit a Ticket</Link>
    </DropdownMenuItem>
    <DropdownMenuSeparator />
    <DropdownMenuItem asChild>
      <Link href="/help/tickets">My Tickets</Link>
    </DropdownMenuItem>
  </DropdownMenuContent>
</DropdownMenu>
```

Import DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger from the existing shadcn/ui dropdown-menu component. Import Link from next/link.

**navigation.ts** — This file exists at `apps/frontend/src/lib/navigation.ts` and contains a `navigationItems` array that controls sidebar items. Add a Help & Support entry to the `navigationItems` array with `path: '/help'`, `label: 'Help & Support'`, and `icon: HelpCircle` (import from lucide-react). Place it at the end of the array or in a logical "support" grouping. Match the exact structure of existing items in the array (same properties, same pattern).
</action>
<verify>Run `cd apps/frontend && npx tsc --noEmit` to confirm no type errors. Visually inspect that HelpCircle icon import is correct and DropdownMenu components exist in the project.</verify>
<done>Sidebar footer shows "Help & Support" link to /help. Top nav HelpCircle button opens dropdown with Knowledge Base, Submit a Ticket, and My Tickets links. No TypeScript errors.</done>
</task>

</tasks>

<verification>
1. `cd apps/frontend && npx tsc --noEmit` compiles without errors
2. help.service.ts exports all 5 API functions and TypeScript interfaces
3. app-sidebar.tsx has Help & Support in footer section
4. top-nav.tsx HelpCircle button is now a dropdown with 3 menu items linking to /help, /help/tickets/new, /help/tickets
5. Navigation links use Next.js Link component (not window.location)
</verification>

<success_criteria>

- Frontend help API service provides typed functions for all backend endpoints
- Help & Support accessible from sidebar footer
- Help & Support accessible from top nav dropdown menu (replacing no-op button)
- All navigation uses client-side routing via Next.js Link
- TypeScript compiles without errors
  </success_criteria>

<output>
After completion, create `.planning/phases/23-help-support-system/23-02-SUMMARY.md`
</output>
