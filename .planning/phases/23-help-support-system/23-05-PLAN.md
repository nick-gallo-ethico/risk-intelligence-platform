---
phase: 23-help-support-system
plan: 05
type: execute
wave: 4
depends_on: ["23-01", "23-02", "23-03", "23-04"]
files_modified:
  - apps/backend/prisma/seeds/acme-phase-23.ts
  - apps/backend/prisma/seeds/index.ts
  - apps/frontend/src/components/help/contextual-help-link.tsx
autonomous: false

must_haves:
  truths:
    - "Help center has at least 15 initial articles across 6+ categories covering Getting Started, Cases, Campaigns, Reports, Settings, and FAQ"
    - "Contextual help links appear on key pages linking to relevant articles"
    - "The entire help system works end-to-end: navigation to /help, search, categories, article detail, ticket submission, ticket list"
  artifacts:
    - path: "apps/backend/prisma/seeds/acme-phase-23.ts"
      provides: "Seed script creating initial knowledge base articles"
      min_lines: 100
    - path: "apps/frontend/src/components/help/contextual-help-link.tsx"
      provides: "Reusable contextual help link component"
      exports: ["ContextualHelpLink"]
  key_links:
    - from: "apps/frontend/src/components/help/contextual-help-link.tsx"
      to: "/help/articles/[slug]"
      via: "Link component with route-to-slug mapping"
      pattern: "CONTEXTUAL_HELP_MAP"
    - from: "apps/backend/prisma/seeds/acme-phase-23.ts"
      to: "KnowledgeBaseArticle"
      via: "prisma.knowledgeBaseArticle.createMany"
      pattern: "knowledgeBaseArticle"
---

<objective>
Seed the knowledge base with initial articles, create the contextual help link component, and verify the entire Help & Support system works end-to-end.

Purpose: A help center with zero articles is worse than no help center. Initial content must exist at launch. Contextual links from feature pages complete the "help where you need it" experience. This plan also verifies everything connects.
Output: 15+ seeded articles, contextual help component, and verified end-to-end help system.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/23-help-support-system/23-RESEARCH.md
@.planning/phases/23-help-support-system/23-01-SUMMARY.md
@.planning/phases/23-help-support-system/23-02-SUMMARY.md
@.planning/phases/23-help-support-system/23-03-SUMMARY.md
@.planning/phases/23-help-support-system/23-04-SUMMARY.md

# Seed pattern reference

@apps/backend/prisma/seeds/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Seed knowledge base articles and create contextual help component</name>
  <files>
    apps/backend/prisma/seeds/acme-phase-23.ts
    apps/backend/prisma/seeds/index.ts
    apps/frontend/src/components/help/contextual-help-link.tsx
  </files>
  <action>
**acme-phase-23.ts** — Knowledge base article seed script:

Create a seed function following the existing seed script pattern (check `apps/backend/prisma/seeds/index.ts` for import structure).

Seed **global articles** (organizationId: null) so they are available to all tenants. Create at least 15 articles across these categories:

**Getting Started (3 articles):**

1. `getting-started-overview` — "Getting Started with Ethico" — Overview of the platform, main navigation, key concepts
2. `navigating-the-dashboard` — "Navigating Your Dashboard" — Dashboard widgets, My Tasks, quick actions
3. `understanding-roles` — "Understanding User Roles" — Role types, permissions, what each role can do

**Cases (3 articles):** 4. `working-with-cases` — "Working with Cases" — Case lifecycle, status pipeline, assignment 5. `case-investigations` — "Managing Case Investigations" — Investigation templates, checklists, interviews 6. `anonymous-communication` — "Anonymous Reporter Communication" — How the relay system works, access codes

**Campaigns (2 articles):** 7. `campaign-overview` — "Campaign Overview" — What campaigns are, types (disclosure, attestation), lifecycle 8. `creating-campaigns` — "Creating and Managing Campaigns" — Audience targeting, scheduling, reminders

**Reports & Analytics (2 articles):** 9. `understanding-analytics` — "Understanding Analytics" — Dashboard KPIs, trend charts, data interpretation 10. `creating-reports` — "Creating Custom Reports" — Report designer, data sources, exports

**Policies (2 articles):** 11. `policy-management` — "Managing Policies" — Policy lifecycle, versioning, approval workflows 12. `policy-attestations` — "Policy Attestation Campaigns" — Distributing policies, tracking read/acknowledge

**Settings & Admin (2 articles):** 13. `organization-settings` — "Organization Settings" — Account defaults, branding, integrations 14. `user-management` — "User Management" — Adding users, role assignment, permission sets

**FAQ (2 articles):** 15. `faq-general` — "Frequently Asked Questions" — Common questions about the platform 16. `troubleshooting` — "Troubleshooting Common Issues" — Login issues, data not loading, browser compatibility

For each article, provide:

- slug, title, category (matching KB_CATEGORIES keys), sortOrder (sequential within category)
- excerpt: 1-2 sentence summary
- content: HTML content with at least 3-4 paragraphs, using `<h2>`, `<h3>`, `<p>`, `<ul>/<li>` tags. Content should be realistic and helpful for a compliance platform user. Include practical guidance, not lorem ipsum.
- tags: 2-4 relevant tags
- isPublished: true

Use `prisma.knowledgeBaseArticle.upsert` with slug as the unique key so the seed is idempotent.

Add the import/call to `apps/backend/prisma/seeds/index.ts` following the existing pattern for phase seed scripts.

**contextual-help-link.tsx** — `ContextualHelpLink` component:

```typescript
import { HelpCircle } from "lucide-react";
import Link from "next/link";

// Static mapping of page routes to relevant KB article slugs
const CONTEXTUAL_HELP_MAP: Record<string, { slug: string; label: string }[]> = {
  "/cases": [{ slug: "working-with-cases", label: "Working with Cases" }],
  "/cases/[id]": [
    { slug: "working-with-cases", label: "Working with Cases" },
    { slug: "case-investigations", label: "Managing Investigations" },
  ],
  "/campaigns": [
    { slug: "campaign-overview", label: "Campaign Overview" },
    { slug: "creating-campaigns", label: "Creating Campaigns" },
  ],
  "/policies": [{ slug: "policy-management", label: "Managing Policies" }],
  "/analytics": [
    { slug: "understanding-analytics", label: "Understanding Analytics" },
  ],
  "/settings": [
    { slug: "organization-settings", label: "Organization Settings" },
  ],
  "/help": [], // No contextual links on the help page itself
};
```

Component renders:

- A small "Need help?" link with HelpCircle icon
- Dropdown or tooltip showing relevant article links for the current page path
- Uses `usePathname()` from `next/navigation` to determine current route
- If no mapping exists for the current path, render nothing
- Style: subtle, non-intrusive — small text with icon, positioned in a corner or inline

Props: `className?: string` for positioning flexibility.

This component can be placed on individual pages by the executor — but for this plan, just create the component. Integration into specific pages is optional and can happen as pages are touched in future phases.
</action>
<verify>Run `cd apps/backend && npx tsc --noEmit` to verify seed script compiles. Run `cd apps/frontend && npx tsc --noEmit` to verify contextual help component compiles. Check that the seed script is registered in index.ts. Run the seed script with `cd apps/backend && npx prisma db seed` (or the project's seed command from package.json) and confirm 15+ articles exist by querying: `npx prisma studio` or checking the seed output log for created/upserted article count.</verify>
<done>15+ knowledge base articles seeded across 7 categories with realistic HTML content. Seed script runs successfully and creates articles in the database. Contextual help link component created. Seed script is idempotent and registered in the seed index.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Help & Support system: knowledge base with search and categories, support ticket filing, ticket history, navigation from sidebar and top nav, seeded articles, and contextual help component.</what-built>
  <how-to-verify>
1. Start the dev server: `cd apps/frontend && npm run dev`
2. Navigate to `/help` — verify:
   - "How can we help?" heading with search bar appears
   - Category grid shows categories with article counts (after running seed)
   - Search for "cases" — article results appear
   - Click a category — filtered articles shown
   - Click an article — full content renders at /help/articles/{slug}
3. Navigate via sidebar — verify "Help & Support" link in sidebar footer works
4. Click HelpCircle icon in top nav — verify dropdown with:
   - "Knowledge Base" link to /help
   - "Submit a Ticket" link to /help/tickets/new
   - "My Tickets" link to /help/tickets
5. Navigate to /help/tickets/new — verify:
   - Form shows subject, description, priority, category fields
   - Submit with empty subject — validation error appears
   - Submit with valid data — success toast with ticket number
   - Redirected to /help/tickets
6. Navigate to /help/tickets — verify:
   - Submitted ticket appears with OPEN status badge
   - Filter tabs (All, Open, etc.) work
7. Check that the seeded articles have real content (not placeholder/lorem ipsum)
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found.</resume-signal>
</task>

</tasks>

<verification>
1. Seed script creates 15+ articles with real content
2. Seed is idempotent (upsert by slug)
3. Contextual help component reads pathname and maps to article slugs
4. All help pages are reachable: /help, /help/articles/:slug, /help/tickets, /help/tickets/new
5. Navigation from sidebar and top nav dropdown works
6. Ticket submission, toast, and redirect work
7. Article search and category filtering work
</verification>

<success_criteria>

- Knowledge base has 15+ articles across 6+ categories with realistic HTML content
- Contextual help link component exists and maps routes to article slugs
- End-to-end flow works: navigate to help, search articles, read article, file ticket, see ticket in list
- Human verification confirms all success criteria from Phase 23 roadmap entry
  </success_criteria>

<output>
After completion, create `.planning/phases/23-help-support-system/23-05-SUMMARY.md`
</output>
