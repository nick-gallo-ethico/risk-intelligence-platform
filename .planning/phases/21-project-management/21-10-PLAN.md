---
phase: 21-project-management
plan: 10
type: execute
wave: 8
depends_on: ["21-06", "21-07", "21-08", "21-09"]
files_modified:
  - apps/backend/prisma/seeds/acme-phase-21.ts
  - apps/backend/prisma/seeds/index.ts
autonomous: false

must_haves:
  truths:
    - "5 demo projects seeded with realistic tasks, conversations, dependencies, and subscribers"
    - "6 system templates seeded for common compliance project types"
    - "Demo data includes @mention updates and threaded conversations"
    - "Projects have custom columns configured to showcase column flexibility"
    - "Human verification checkpoint validates all Phase 21 features end-to-end"
  artifacts:
    - path: "apps/backend/prisma/seeds/acme-phase-21.ts"
      provides: "Acme Co. demo data with 5 projects, conversations, dependencies, subscribers, custom columns"
  key_links:
    - from: "acme-phase-21.ts"
      to: "prisma schema"
      via: "Prisma seed operations for all Phase 21 models"
      pattern: "prisma\\.milestone\\.create|prisma\\.projectTask\\.create|prisma\\.projectUpdate\\.create"
---

<objective>
Seed Acme Co. demo data for the complete project management module and verify all Phase 21 features end-to-end with a comprehensive human verification checkpoint. Demo data includes 5 projects with realistic conversations, dependencies, subscribers, custom columns, and 6 system templates. The verification covers all 10 plans across all 5 views.

Purpose: Populate the demo environment so the projects module looks lived-in with active collaboration, and verify the full Monday.com-style experience works correctly.
Output: Demo data seeder with rich collaboration data and human-verified project management module.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-project-management/21-09-SUMMARY.md
@apps/backend/prisma/seeds/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive Acme Co. project management demo data seeder</name>
  <files>
    apps/backend/prisma/seeds/acme-phase-21.ts
    apps/backend/prisma/seeds/index.ts
  </files>
  <action>
**Create `acme-phase-21.ts`** following the pattern of existing phase seeders:

Export an async function `seedPhase21(prisma, orgId, userMap)` that creates:

**1. System Project Templates** (6 templates with isSystem=true, organizationId=null):

- "New Client Implementation" (category: PROJECT) — templateData with groups: Kickoff, Configuration, Data Migration, Testing & Training, Go-Live. Each group has 3-5 sample tasks with default priorities and assignee roles.
- "Annual Policy Review" (category: AUDIT) — groups: Policy Identification, Review & Update, Approval, Distribution & Attestation
- "Compliance Audit Preparation" (category: AUDIT) — groups: Scoping, Evidence Collection, Internal Review, Remediation, Submission
- "Investigation Project" (category: INVESTIGATION) — groups: Intake & Assignment, Investigation, Documentation, Remediation, Close-out
- "Training Rollout" (category: TRAINING) — groups: Content Development, Audience Targeting, Launch, Monitoring & Follow-up
- "Disclosure Campaign" (category: CAMPAIGN) — groups: Form Design, Audience Selection, Campaign Launch, Monitoring, Reporting

**2. Acme Co. Projects** (5 projects at various stages with FULL collaboration data):

**Project 1: "Q1 2026 SOX Compliance Audit"** (category: AUDIT, status: IN_PROGRESS)

- Owner: Compliance Officer
- Target date: 2026-03-31
- 3 groups: "Evidence Collection" (5 tasks, 3 done), "Internal Review" (4 tasks, 1 done), "Remediation" (3 tasks, 0 done)
- Custom columns: "Control ID" (TEXT), "Risk Level" (DROPDOWN: Low/Medium/High), "Evidence Status" (STATUS)
- Dependencies: Remediation tasks depend on Internal Review tasks
- Subscribers: 4 team members subscribed to the project
- Conversation: 8 updates across tasks with @mentions:
  - "Evidence for control SOX-301 uploaded. @Sarah can you review?" (with reply: "Reviewed, looks good")
  - "@Mike the bank reconciliation evidence is overdue. Can you escalate?"
  - "Internal review meeting scheduled for Thursday. @all please prepare summaries."
- Task files: 2-3 file attachments on evidence tasks (mock file records)
- Progress: ~33%

**Project 2: "Anti-Harassment Policy Rollout"** (category: TRAINING, status: IN_PROGRESS)

- Owner: HR Manager
- Target date: 2026-02-28
- 3 groups: "Content Development" (4 tasks, 4 done), "Distribution" (3 tasks, 1 done), "Tracking" (2 tasks, 0 done)
- Custom columns: "Department" (DROPDOWN), "Completion Rate" (NUMBER with % suffix)
- Subscribers: 3 team members
- Conversation: 5 updates with @mentions
- Progress: ~55%

**Project 3: "EMEA Data Privacy Implementation"** (category: PROJECT, status: AT_RISK)

- Owner: Legal Counsel
- Target date: 2026-02-15 (past due!)
- 4 groups: "Gap Analysis" (3 tasks, 3 done), "Policy Updates" (4 tasks, 2 done), "System Changes" (5 tasks, 0 done, 2 STUCK), "Training" (3 tasks, 0 done)
- Custom columns: "Region" (DROPDOWN: UK/Germany/France/EU-wide), "DPA Reference" (LINK), "Impact Level" (STATUS)
- Dependencies: Training tasks depend on System Changes; System Changes depend on Policy Updates
- Subscribers: 6 team members (cross-functional)
- Conversation: 12 updates (most active project, showing escalation):
  - "System changes are blocked — vendor hasn't delivered API. @Legal can we escalate?"
  - "@CTO this is now AT_RISK. We need a decision on the vendor workaround by Friday."
  - "Gap analysis complete! Great work team. Moving to policy updates."
  - Threaded discussion about GDPR Article 30 requirements
- Progress: ~33%

**Project 4: "Annual COI Disclosure Campaign"** (category: CAMPAIGN, status: COMPLETED)

- Owner: Compliance Officer
- Target date: 2026-01-31, Completed: 2026-01-28
- 3 groups: "Preparation" (3 tasks, 3 done), "Execution" (4 tasks, 4 done), "Follow-up" (2 tasks, 2 done)
- Connected entities: Link 2 tasks to actual Campaign records (if they exist from Phase 9)
- Subscribers: 2 team members
- Conversation: 3 updates (completion celebration):
  - "Campaign achieved 94% completion rate! Well done everyone."
  - "Final report submitted to the board. @CEO summary attached."
- Progress: 100%

**Project 5: "2026 Compliance Training Plan"** (category: TRAINING, status: NOT_STARTED)

- Owner: Training Manager
- Target date: 2026-06-30
- 2 groups: "Planning" (3 tasks, 0 done), "Content" (2 tasks, 0 done)
- Custom columns: "Quarter" (DROPDOWN: Q1/Q2/Q3/Q4), "Audience Size" (NUMBER)
- Subscribers: 1 (owner only)
- Conversation: 1 update: "Kickoff meeting scheduled for next month."
- Progress: 0%

**For each project, create:**

1. Milestone record
2. ProjectGroup records with colors (blue, green, orange, purple, etc.)
3. ProjectTask records with varied statuses, priorities, assignees from userMap
4. ProjectColumn records for custom columns
5. ProjectUpdate records (task conversations) with realistic @mention content
6. ProjectTaskSubscriber records
7. ProjectTaskDependency records (where applicable)
8. Mock file attachment records (AttachmentEntityType.PROJECT_TASK)
9. Activity records via ActivityService.log()

**Realistic dates**: Tasks have startDates spread across the project timeline. Completed tasks have completedAt dates. Due dates are realistic relative to the project timeline.

**3. Update seeds/index.ts**:

- Import seedPhase21
- Add `await seedPhase21(prisma, acmeOrgId, userMap)` in the appropriate position
- Follow the idempotent pattern (check/delete before create)

Use the seeder factory pattern. Make it idempotent: safe to run multiple times.
</action>
<verify>
Run `cd apps/backend && npx prisma db seed` (or targeted seed command).
Verify 6 templates + 5 projects created.
Check that conversations, dependencies, subscribers, and custom columns exist.
</verify>
<done>5 projects with realistic tasks, conversations with @mentions, threaded replies, dependencies, subscribers, custom columns, and file records. 6 system templates. Seed is idempotent.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Monday.com-style project management module (10 plans):

**Backend (Plans 01-02, 08):**

- 7 new Prisma models: ProjectGroup, ProjectTask, ProjectColumn, ProjectTemplate, ProjectUpdate, ProjectTaskSubscriber, ProjectTaskDependency
- ~30 REST endpoints for tasks, groups, columns, templates, updates, subscribers, dependencies, files
- MentionService for @mention extraction and validation
- 5 event handlers for notification dispatch (assignment, @mention, comment, status change, completion)
- WebSocket project gateway for real-time collaboration
- Stats endpoint for workload and dashboard data
- My Work integration (project tasks in unified task queue)

**Frontend (Plans 03-07, 09):**

- Project list page with saved views (table + board views, filters, create dialog)
- Project detail page with 5 view modes:
  1. TABLE: Grouped task table with inline editing, drag-to-reorder, group management
  2. BOARD: Kanban board with drag-to-move between status columns
  3. TIMELINE: Gantt chart with dependency arrows
  4. WORKLOAD: Team capacity bars with overload indicators
  5. DASHBOARD: KPI cards, status chart, completion trend, group progress
- Rich task detail panel with 4 tabs: Details, Updates, Activity, Files
- Conversation thread with @mention autocomplete and threaded replies
- Activity log tracking all task changes
- File attachments with drag-and-drop upload
- Subscriber management (watchers)
- Task dependency viewing and management
- Column center with 15 column types and type-specific configuration
- Dynamic column rendering with inline editing for all types
- Project templates (6 system templates for compliance projects)

**Demo Data:**

- 5 projects at various stages with realistic compliance scenarios
- Conversations with @mentions and threaded replies
- Dependencies between tasks
- Custom columns showcasing flexibility
- File attachments and subscriber records
  </what-built>
  <how-to-verify>
  **PROJECT LIST PAGE (Plan 03)**

1. Navigate to /projects in the sidebar
2. Verify 5 Acme Co. projects appear with status badges and progress bars
3. Switch between Table and Board views on the list page
4. Use quick filters: filter by status "IN_PROGRESS", verify 2 projects shown
5. Click "New Project" > verify create dialog with "Blank" and "From Template" tabs
6. Go to "From Template" tab > verify 6 templates appear > select one > verify project creates with pre-populated groups

**PROJECT DETAIL — TABLE VIEW (Plan 04)** 7. Click "Q1 2026 SOX Compliance Audit" to open project detail 8. Verify project header: name, status badge, progress bar, owner, target date 9. Verify 3 groups visible: "Evidence Collection", "Internal Review", "Remediation" 10. Collapse and expand a group by clicking the chevron 11. Inline edit: change a task status from NOT_STARTED to IN_PROGRESS 12. Inline edit: change a task priority 13. Inline edit: assign a task to a different user via the assignee picker 14. Inline edit: set a due date via the date picker 15. Add a new task via the "+ Add task" row at bottom of a group 16. Drag a task to reorder within a group 17. Rename a group (click group name > edit > Enter) 18. Verify task count badges on group headers

**PROJECT DETAIL — BOARD VIEW (Plan 05)** 19. Switch to Board view tab 20. Verify task cards appear in status columns (Not Started, In Progress, Stuck, Done) 21. Verify cards show: title, priority icon, assignee avatar, due date 22. Drag a card from "Not Started" to "In Progress" — verify status changes 23. Verify CANCELLED column is collapsed by default 24. Click a card to open task detail panel

**PROJECT DETAIL — TIMELINE VIEW (Plan 05)** 25. Switch to Timeline view tab 26. Verify Gantt chart shows task bars on time axis 27. Verify tasks are grouped by project group on the left 28. Verify dependency arrows between linked tasks (check EMEA project for best example) 29. Test zoom: switch between week/month/quarter views 30. Verify today indicator line

**TASK DETAIL PANEL (Plan 06)** 31. Click any task to open the detail panel 32. Verify 4 tabs: Details, Updates, Activity, Files 33. On Details tab: verify all fields (title, description, status, priority, assignee, dates, group) 34. On Details tab: verify subscriber list ("X watching") 35. On Details tab: verify dependency list (especially on EMEA project tasks) 36. Switch to Updates tab: verify conversation thread shows seeded updates 37. Verify threaded replies expand (click "X replies") 38. Type "@" in the update input > verify autocomplete dropdown shows project members 39. Post a new update with @mention > verify it appears in thread 40. Switch to Activity tab: verify change log entries 41. Switch to Files tab: verify seeded file attachments appear 42. Test file upload: drop a file > verify upload progress and file appears

**COLUMN CONFIGURATION (Plan 07)** 43. On table view, look for "+" button at end of column headers 44. Click "+" to open Column Center 45. Verify 15 column types in 3 categories (Essentials, More, Connections) 46. Add a new STATUS column > verify it appears in the table 47. Click settings on the new column > verify type-specific config panel 48. Add a DROPDOWN column with custom options > verify it appears with dropdown inline edit 49. Verify custom columns from seeded data are visible (e.g., "Control ID", "Risk Level") 50. Resize a column by dragging the header border 51. Reorder columns by dragging column headers

**@MENTIONS & NOTIFICATIONS (Plan 08)** 52. Post an update with @mention > verify mentioned user receives a notification 53. Assign a task to someone > verify they get a notification 54. Change task status > verify subscribers get notifications 55. Go to /notifications > verify project-related notifications appear

**WORKLOAD VIEW (Plan 09)** 56. Switch to Workload view tab 57. Verify team members shown with horizontal stacked bars 58. Verify bars show color-coded segments (green=done, blue=in progress, red=stuck, gray=not started) 59. Verify overloaded members highlighted (if applicable) 60. Verify "Unassigned" row at bottom

**DASHBOARD VIEW (Plan 09)** 61. Switch to Dashboard view tab 62. Verify 4 KPI cards: Total Progress, Tasks Completed, Days Remaining, Overdue Tasks 63. Verify status breakdown donut/pie chart 64. Verify completion trend line chart 65. Verify group progress bars 66. Verify priority distribution chart

**VIEW SWITCHING & URL PERSISTENCE** 67. Switch between all 5 views > verify URL updates (?view=table/board/timeline/workload/dashboard) 68. Copy URL with ?view=board > navigate to it > verify board view loads directly 69. Verify task detail panel opens from any view 70. Open /projects/[id]?task=[taskId] > verify task panel opens on load

**MY WORK INTEGRATION** 71. Navigate to /my-work 72. Verify project tasks assigned to current user appear in the unified task queue

**CROSS-PROJECT CHECK** 73. Open "EMEA Data Privacy Implementation" (AT_RISK) > verify red status and overdue indicator 74. Open "Annual COI Disclosure Campaign" (COMPLETED) > verify 100% progress and completed badge 75. Open "2026 Compliance Training Plan" (NOT_STARTED) > verify 0% progress
</how-to-verify>
<resume-signal>Type "approved" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
- Demo data seed runs without errors
- All 5 projects visible with realistic data
- Conversations with @mentions visible in task updates
- Dependencies shown as arrows on timeline view
- Custom columns visible and editable in table view
- All 75 verification steps pass during human review
</verification>

<success_criteria>

- 5 demo projects cover all project statuses (NOT_STARTED, IN_PROGRESS, AT_RISK, COMPLETED, CANCELLED)
- Projects have realistic compliance scenarios with meaningful task names
- Conversation threads show active collaboration with @mentions
- Dependencies create realistic task chains
- Custom columns demonstrate column flexibility
- 6 system templates cover common compliance project types
- Seed is idempotent (safe to re-run)
- All 10 plans verified through 75-step human verification
- Complete Monday.com-style project management experience delivered
  </success_criteria>

<output>
After completion, create `.planning/phases/21-project-management/21-10-SUMMARY.md`
</output>
