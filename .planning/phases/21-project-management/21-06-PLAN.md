---
phase: 21-project-management
plan: 06
type: execute
wave: 6
depends_on: ["21-03", "21-04", "21-05"]
files_modified:
  - apps/backend/prisma/seeds/acme-phase-21.ts
  - apps/backend/prisma/seeds/index.ts
autonomous: false

must_haves:
  truths:
    - "Acme Co. has sample projects in various states (active, completed, planned)"
    - "Projects have tasks distributed across team members with realistic progress"
    - "Project templates are seeded as system templates"
    - "Projects list page shows multiple projects with different statuses"
    - "Project detail page shows grouped tasks with inline editing"
    - "Board view shows tasks in status columns with drag-drop"
    - "Timeline view shows task bars on Gantt chart"
  artifacts:
    - path: "apps/backend/prisma/seeds/acme-phase-21.ts"
      provides: "Acme Co. demo data for projects module"
  key_links:
    - from: "acme-phase-21.ts"
      to: "prisma.milestone"
      via: "Prisma seed operations"
      pattern: "prisma\\.milestone\\.create"
---

<objective>
Seed Acme Co. demo data for the project management module and verify the complete feature end-to-end. Creates realistic compliance projects with tasks, groups, and progress at various states.

Purpose: Populate the demo environment so the projects section looks lived-in for sales demos, and verify all Phase 21 features work together.
Output: Demo data seeder and verified project management module.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-project-management/21-05-SUMMARY.md
@apps/backend/prisma/seeds/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Acme Co. project management demo data seeder</name>
  <files>
    apps/backend/prisma/seeds/acme-phase-21.ts
    apps/backend/prisma/seeds/index.ts
  </files>
  <action>
**Create `acme-phase-21.ts`** following the pattern of existing phase seeders:

Export an async function `seedPhase21(prisma, orgId, userMap)` that creates:

**1. System Project Templates** (6 templates with isSystem=true, organizationId=null):

- "New Client Implementation" (category: PROJECT) - templateData with groups: Kickoff, Configuration, Data Migration, Testing & Training, Go-Live. Each group has 3-5 sample tasks.
- "Annual Policy Review" (category: AUDIT) - groups: Policy Identification, Review & Update, Approval, Distribution & Attestation
- "Compliance Audit Preparation" (category: AUDIT) - groups: Scoping, Evidence Collection, Internal Review, Remediation, Submission
- "Investigation Project" (category: INVESTIGATION) - groups: Intake & Assignment, Investigation, Documentation, Remediation, Close-out
- "Training Rollout" (category: TRAINING) - groups: Content Development, Audience Targeting, Launch, Monitoring & Follow-up
- "Disclosure Campaign" (category: CAMPAIGN) - groups: Form Design, Audience Selection, Campaign Launch, Monitoring, Reporting

**2. Acme Co. Projects** (5 projects at various stages):

Project 1: "Q1 2026 SOX Compliance Audit" (category: AUDIT, status: IN_PROGRESS)

- 3 groups: "Evidence Collection" (5 tasks, 3 done), "Internal Review" (4 tasks, 1 done), "Remediation" (3 tasks, 0 done)
- Owner: Compliance Officer user
- Target date: 2026-03-31
- Progress: ~33%

Project 2: "Anti-Harassment Policy Rollout" (category: TRAINING, status: IN_PROGRESS)

- 3 groups: "Content Development" (4 tasks, 4 done), "Distribution" (3 tasks, 1 done), "Tracking" (2 tasks, 0 done)
- Owner: HR Manager user
- Target date: 2026-02-28
- Progress: ~55%

Project 3: "EMEA Data Privacy Implementation" (category: PROJECT, status: AT_RISK)

- 4 groups: "Gap Analysis" (3 tasks, 3 done), "Policy Updates" (4 tasks, 2 done), "System Changes" (5 tasks, 0 done, 2 STUCK), "Training" (3 tasks, 0 done)
- Owner: Legal Counsel user
- Target date: 2026-02-15 (past due)
- Progress: ~33%

Project 4: "Annual COI Disclosure Campaign" (category: CAMPAIGN, status: COMPLETED)

- 3 groups: "Preparation" (3 tasks, 3 done), "Execution" (4 tasks, 4 done), "Follow-up" (2 tasks, 2 done)
- Owner: Compliance Officer user
- Target date: 2026-01-31
- Completed at: 2026-01-28
- Progress: 100%

Project 5: "2026 Compliance Training Plan" (category: TRAINING, status: NOT_STARTED)

- 2 groups: "Planning" (3 tasks, 0 done), "Content" (2 tasks, 0 done)
- Owner: Training Manager user
- Target date: 2026-06-30
- Progress: 0%

For each project:

- Create the Milestone record first
- Create ProjectGroup records for each group
- Create ProjectTask records with realistic titles, descriptions, varied statuses, priorities, assigned to different users from userMap
- Tasks should have realistic dates (start dates spread across the project timeline, due dates before target)
- Some tasks have subtasks (parentTaskId)
- Recalculate project progress after creating tasks

**3. Update seeds/index.ts**:

- Import seedPhase21
- Add call to `await seedPhase21(prisma, acmeOrgId, userMap)` in the appropriate position

Use deterministic IDs or use the seeder factory pattern (return Map) for consistent re-runs. Follow the idempotent pattern: check if data exists before creating (upsert or delete-then-create).
</action>
<verify>
Run `cd apps/backend && npx ts-node prisma/seeds/acme-phase-21.ts` (or the full seed command).
Verify 6 templates + 5 projects with tasks created in database.
Check Prisma Studio to confirm data integrity.
</verify>
<done>Acme Co. has 5 projects at various stages with realistic tasks, groups, and progress. 6 system templates seeded. Seed script is idempotent.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Monday.com-style project management module including:
  - Backend: ProjectGroup, ProjectTask, ProjectColumn, ProjectTemplate Prisma models with services and REST API
  - Frontend: Project list page with saved views (table + board views)
  - Frontend: Project detail page with grouped task table, inline editing, task detail panel
  - Frontend: Kanban board view within project detail
  - Frontend: Gantt/timeline view within project detail
  - Frontend: Project templates for quick project creation
  - Integration: Project tasks appear in My Work queue
  - Demo data: 5 projects with realistic tasks at various stages, 6 system templates
  </what-built>
  <how-to-verify>
  1. Navigate to /projects in the sidebar
  2. Verify 5 Acme Co. projects appear in the list with status badges and progress bars
  3. Switch between Table and Board views on the list page
  4. Click on "Q1 2026 SOX Compliance Audit" to open project detail
  5. Verify grouped task table with "Evidence Collection", "Internal Review", "Remediation" groups
  6. Try inline editing: change a task status from NOT_STARTED to IN_PROGRESS
  7. Try inline editing: assign a task to a different user
  8. Try adding a new task via the "+ Add task" row at bottom of a group
  9. Click a task to verify the detail panel slides open from the right
  10. Switch to Board view - verify tasks appear in status columns
  11. Drag a task card from "Not Started" to "In Progress" column
  12. Switch to Timeline view - verify Gantt chart shows task bars
  13. Go back to /projects list, click "New Project"
  14. Switch to "From Template" tab, verify 6 templates appear
  15. Select a template and create a project - verify it creates with groups and tasks
  16. Navigate to /my-work - verify project tasks assigned to current user appear
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
- Demo data seed runs without errors
- All 5 projects visible in list
- Project detail shows grouped tasks
- All three views (table, board, timeline) functional
- Inline editing works
- Template creation works
- My Work integration works
</verification>

<success_criteria>

- 5 demo projects with realistic compliance data
- 6 system templates for common compliance projects
- Full end-to-end functionality verified by human
- All success criteria from Phase 21 met:
  1. Projects section accessible from sidebar with project list
  2. Kanban board view with customizable columns and drag-to-move
  3. Table/list view with sortable columns and inline editing
  4. Timeline/Gantt view showing project schedule
  5. Project detail page with task breakdown, milestones, and progress
  6. Tasks assignable to users with due dates and priority
  7. Task status changes reflect in project progress
  8. Project templates for common compliance projects
     </success_criteria>

<output>
After completion, create `.planning/phases/21-project-management/21-06-SUMMARY.md`
</output>
