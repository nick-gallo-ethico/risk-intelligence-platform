---
phase: 11.1-frontend-navigation-and-ui-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/frontend/src/components/layout/mobile-bottom-nav.tsx
  - apps/frontend/src/components/layout/mobile-more-drawer.tsx
  - apps/frontend/src/components/layout/ai-panel.tsx
  - apps/frontend/src/app/(authenticated)/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Mobile users see bottom navigation bar on screens < 768px"
    - "Bottom nav shows 4 primary items plus More button"
    - "More button opens drawer with full navigation"
    - "AI button in sidebar opens slide-over panel"
  artifacts:
    - path: "apps/frontend/src/components/layout/mobile-bottom-nav.tsx"
      provides: "Mobile bottom navigation component"
      exports: ["MobileBottomNav"]
    - path: "apps/frontend/src/components/layout/ai-panel.tsx"
      provides: "AI chat slide-over panel shell"
      exports: ["AiPanel"]
  key_links:
    - from: "apps/frontend/src/app/(authenticated)/layout.tsx"
      to: "MobileBottomNav"
      via: "conditionally rendered on mobile"
      pattern: "MobileBottomNav"
    - from: "apps/frontend/src/components/layout/app-sidebar.tsx"
      to: "AiPanel"
      via: "AI button triggers panel open"
      pattern: "setAiPanelOpen"
---

<objective>
Create mobile bottom navigation and AI panel shell for complete responsive navigation.

Purpose: Mobile users need accessible navigation; AI panel provides quick access to AI features.
Output: Working mobile navigation with bottom bar + drawer, and AI panel slide-over shell.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11.1-frontend-navigation-and-ui-fixes/11.1-CONTEXT.md
@.planning/phases/11.1-frontend-navigation-and-ui-fixes/11.1-RESEARCH.md
@apps/frontend/src/components/ui/sheet.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Mobile Bottom Navigation</name>
  <files>
    apps/frontend/src/components/layout/mobile-bottom-nav.tsx
    apps/frontend/src/components/layout/mobile-more-drawer.tsx
  </files>
  <action>
1. Create mobile-bottom-nav.tsx:
   - 'use client' directive
   - Fixed bottom bar: `fixed bottom-0 inset-x-0 bg-background border-t md:hidden z-50`
   - 5 items: Home, Cases, Policies, Analytics, More
   - Each item: icon + label, flex-col layout, centered
   - Active state: text-primary, inactive: text-muted-foreground
   - Use usePathname() to determine active item
   - Icons: Home, Briefcase, FileText, BarChart3, Menu
   - More button triggers Sheet component (mobile-more-drawer)
   - Add padding-bottom to main content when mobile nav visible (pb-16)

2. Create mobile-more-drawer.tsx:
   - Sheet component sliding from left
   - Contains full navigation list (all items from lib/navigation.ts)
   - Grouped by section: Main, Admin (if authorized)
   - Each item: icon + label, full width button
   - Close drawer on navigation
   - Show user info at bottom (name, role)
   - Logout button at very bottom
  </action>
  <verify>
- `grep "md:hidden" apps/frontend/src/components/layout/mobile-bottom-nav.tsx` shows mobile-only
- `grep "Sheet" apps/frontend/src/components/layout/mobile-more-drawer.tsx` shows drawer
- Resize browser to mobile width and see bottom nav
  </verify>
  <done>
- MobileBottomNav shows on screens < md breakpoint
- Bottom nav has 4 primary items + More button
- More drawer opens from left with full navigation
- Active item highlighted in bottom nav
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AI Panel Shell</name>
  <files>
    apps/frontend/src/components/layout/ai-panel.tsx
    apps/frontend/src/contexts/ai-panel-context.tsx
  </files>
  <action>
1. Create ai-panel-context.tsx:
   - AiPanelProvider with state: isOpen, setIsOpen
   - Context for panel open/close state
   - Export useAiPanel hook

2. Create ai-panel.tsx:
   - Sheet component sliding from right (side="right")
   - Width: w-[400px] max-w-full
   - Header: "AI Assistant" title, close button
   - Content sections:
     - Quick Actions area (placeholder): "Context-aware actions will appear here"
     - Chat area (placeholder): "AI chat interface coming soon"
   - Use useAiPanel hook for open state
   - Style: clean, minimal, shadcn/ui components

3. Wire up:
   - Add AiPanelProvider to (authenticated)/layout.tsx
   - In app-sidebar.tsx footer, Sparkles button calls setAiPanelOpen(true)
   - AiPanel rendered in layout.tsx
  </action>
  <verify>
- `grep "side=\"right\"" apps/frontend/src/components/layout/ai-panel.tsx` shows right slide
- `grep "AiPanelProvider" apps/frontend/src/app/\(authenticated\)/layout.tsx` shows provider
- Click AI button in sidebar and see panel open from right
  </verify>
  <done>
- AI panel opens from right as slide-over
- Panel has placeholder content for quick actions and chat
- AI button in sidebar footer triggers panel
- Panel closes on X button or clicking outside
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate Mobile Nav into Layout</name>
  <files>
    apps/frontend/src/app/(authenticated)/layout.tsx
  </files>
  <action>
1. Update (authenticated)/layout.tsx:
   - Import MobileBottomNav
   - Import AiPanel
   - Import AiPanelProvider
   - Render structure:
     ```tsx
     <AiPanelProvider>
       <SidebarProvider defaultOpen={defaultOpen}>
         <AppSidebar />
         <main className="flex-1 overflow-auto pb-16 md:pb-0">
           {children}
         </main>
         <MobileBottomNav />
         <AiPanel />
       </SidebarProvider>
     </AiPanelProvider>
     ```
   - Note: pb-16 adds bottom padding on mobile for nav bar, md:pb-0 removes on desktop

2. Ensure proper z-index layering:
   - Sidebar: z-40
   - Mobile bottom nav: z-50
   - AI panel (Sheet): z-50 (default)
   - Modals/dialogs: z-50 (default)
  </action>
  <verify>
- On mobile: bottom nav visible, sidebar hidden
- On desktop: sidebar visible, bottom nav hidden
- AI panel opens above everything on both mobile and desktop
- No z-index conflicts with existing modals
  </verify>
  <done>
- Layout renders mobile nav on mobile, sidebar on desktop
- AI panel accessible from both mobile and desktop
- Proper z-index stacking prevents overlap issues
- Main content has appropriate padding to not hide behind nav
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Test desktop view:
   - Sidebar visible on left
   - AI button in sidebar opens panel from right
   - No bottom nav visible
2. Test mobile view (resize to < 768px):
   - Sidebar hidden
   - Bottom nav visible with 5 items
   - Tap More to see full navigation drawer
   - AI panel still accessible (via drawer)
3. Navigation works on both views
4. Run: `cd apps/frontend && npm run lint`
5. Run: `cd apps/frontend && npx tsc --noEmit`
</verification>

<success_criteria>
- Mobile bottom nav shows on screens < 768px
- Bottom nav has 4 primary items + More button
- More drawer contains full navigation
- AI panel opens as slide-over from right
- Responsive switching between mobile/desktop nav
- No TypeScript or ESLint errors
</success_criteria>

<output>
After completion, create `.planning/phases/11.1-frontend-navigation-and-ui-fixes/11.1-02-SUMMARY.md`
</output>
