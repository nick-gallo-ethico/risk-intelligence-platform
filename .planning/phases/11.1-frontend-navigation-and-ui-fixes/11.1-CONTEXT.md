# Phase 11.1: Frontend Navigation and UI Fixes - Context

**Gathered:** 2026-02-05
**Status:** Ready for planning

<domain>
## Phase Boundary

Add main navigation sidebar and fix broken case detail tabs so the demo environment is fully navigable and functional. This includes the icon rail sidebar, mobile navigation, case tab data display (Messages, Files, Remediation), and page shells for Campaigns and Analytics.

</domain>

<decisions>
## Implementation Decisions

### Main Sidebar Design
- **Pattern:** Icon rail with flyout menus (HubSpot style) — narrow sidebar with icons, flyout panels on hover/click
- **Icon rail layout:**
  - Top: Logo icon (click → Home)
  - Main section: Home, Cases, Investigations, Disclosures, Policies, Projects, Analytics, Admin (with visual dividers)
  - Utility section: AI Button, Collapse/Expand toggle
- **Default state:** Collapsed (icon rail only), with ability to pin flyouts open for expanded mode
- **Preference persistence:** Store collapsed/expanded state in localStorage
- **Flyout content:** Navigation links only (no recent items, no stats)
- **Active state:** Background highlight on active section icon
- **Admin flyout:** Full suite (Users, Roles, Settings, Audit Log, Integrations) with role-based visibility
  - SYSTEM_ADMIN: All items
  - COMPLIANCE_OFFICER: Audit Log, Settings (view)
  - Others: Admin icon hidden entirely
- **AI button behavior:** Opens AI chat panel (slide-over drawer) with context-aware quick actions at top + full chat below
- **Tooltips:** None — flyout header serves as label; use aria-labels for accessibility
- **Search:** In header bar only, not in sidebar
- **Collapse/Expand toggle:** Pins flyout open to create expanded mode with persistent labels

### Mobile Navigation
- **Pattern:** Bottom tab bar + hamburger for overflow
- **Bottom bar items:** Claude's discretion based on mobile use case priorities
- **Notification badge:** Claude's discretion on style
- **"More" drawer:** Side drawer slides in from left (hamburger style)
- **Responsive breakpoint:** Claude's discretion based on sidebar width requirements

### Case Tab Data Display
- **Messages tab:** Unified chronological timeline of all case correspondence (emails, anonymous chats, any communications)
- **Files tab:** Grid view with thumbnails, list view toggle available
- **Remediation tab:** Step list with status badges, includes assignee, due date, completion status, drag handle for reordering
- **Quick action buttons (HubSpot pattern):** Note, Email, Call, Task, Meeting, Log Meeting, Document, Templates, Remediation Plan
  - Primary adding via quick action buttons in left column
  - Tabs are view-focused with secondary add capability where needed (e.g., "+ Add Step" on Remediation)
- **Empty states:** Simple icon, 1-2 contextual sentences, primary CTA button (HubSpot style)
- **Activity tab:** Filterable feed with tabs (All, Notes, Communications, Documents, System, AI)
  - Show all by default
  - System events styled smaller/gray

### Page Shell Patterns
- **Loading states:** Skeleton loaders with shimmer effect across all pages
- **Page headers by type:**
  - List pages: Title + description + "Create X" button
  - Detail pages: "< Back to X" + Title + Actions dropdown
  - Section landing: Title + Tab navigation

### Campaigns Page (/campaigns)
- Summary cards at top (Active campaigns, Pending, Completed, Total reach)
- Saved views tabs ("All", "Active", "Drafts", etc.) + "+ Add view"
- Filter bar: Type, Owner, Status, Date range, + Advanced filters
- Search box
- Table columns: Name, Status, Type, Start Date, End Date, Completion Rate, Owner
- Pagination
- "Create Campaign" button
- **Detail page (/campaigns/[id]):** Left overview sidebar, middle brief/sequence, right assets

### Analytics Page (/analytics)
- Tab navigation: Dashboards | Reports
- **Dashboards tab:** List view with Name, Owner, Last Viewed, Assigned; favorites (star up to 10); "Create Dashboard" → template picker
- **Reports tab:** List view with Name, Owner, Views, Tags, Last Updated; favorites in left sidebar; "Create Report" → placeholder
- **Pre-built dashboards:** Compliance Overview, Risk Summary, Campaign Performance
- Dashboard/report builders are placeholders for this phase

### Claude's Discretion
- Icon style (Lucide icons — outline vs filled)
- Mobile bottom bar items based on quick-glance use cases
- Notification badge style
- Responsive breakpoint for mobile nav switch

</decisions>

<specifics>
## Specific Ideas

- "I want it like HubSpot" — icon rail + flyout pattern, quick action buttons, activity feed with filters
- System events in activity feed should be visually distinct (smaller text, gray, collapsible)
- Admin icon hidden entirely for users with no admin access (not just empty flyout)
- AI panel opens with context-aware quick actions at top based on current page

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 11.1-frontend-navigation-and-ui-fixes*
*Context gathered: 2026-02-05*
