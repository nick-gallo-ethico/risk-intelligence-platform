---
phase: 11.1-frontend-navigation-and-ui-fixes
plan: 05
type: execute
wave: 3
depends_on: ["11.1-01", "11.1-02"]
files_modified:
  - apps/frontend/src/lib/campaigns-api.ts
  - apps/frontend/src/hooks/use-campaigns.ts
  - apps/frontend/src/types/campaign.ts
  - apps/frontend/src/app/(authenticated)/campaigns/page.tsx
  - apps/frontend/src/components/campaigns/campaigns-summary-cards.tsx
  - apps/frontend/src/components/campaigns/campaigns-filters.tsx
  - apps/frontend/src/components/campaigns/campaigns-table.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to /campaigns and see campaign list"
    - "Summary cards show Active, Pending, Completed, Total reach counts"
    - "Filters work (Type, Owner, Status, Date range)"
    - "Table shows campaigns with sortable columns"
    - "Create Campaign button navigates to /campaigns/new"
  artifacts:
    - path: "apps/frontend/src/app/(authenticated)/campaigns/page.tsx"
      provides: "Campaigns list page"
      min_lines: 80
    - path: "apps/frontend/src/components/campaigns/campaigns-table.tsx"
      provides: "Campaigns data table"
      min_lines: 60
    - path: "apps/frontend/src/lib/campaigns-api.ts"
      provides: "Campaigns API client"
      exports: ["campaignsApi"]
  key_links:
    - from: "apps/frontend/src/app/(authenticated)/campaigns/page.tsx"
      to: "/api/v1/campaigns"
      via: "React Query hook"
      pattern: "useCampaigns"
    - from: "campaigns/page.tsx"
      to: "/campaigns/new"
      via: "Create Campaign button"
      pattern: "router\\.push.*campaigns/new"
---

<objective>
Create the Campaigns list page (/campaigns) with summary cards, filters, and data table.

Purpose: Campaigns page is missing; users need to view and manage compliance campaigns.
Output: Working campaigns list page with filters, summary stats, and navigation to create/detail.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11.1-frontend-navigation-and-ui-fixes/11.1-CONTEXT.md
@.planning/phases/11.1-frontend-navigation-and-ui-fixes/11.1-RESEARCH.md
@apps/frontend/src/app/campaigns/new/page.tsx
@apps/backend/src/modules/campaigns/campaigns.controller.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Campaign Types and API Client</name>
  <files>
    apps/frontend/src/types/campaign.ts
    apps/frontend/src/lib/campaigns-api.ts
    apps/frontend/src/hooks/use-campaigns.ts
  </files>
  <action>
1. Create/update types/campaign.ts:
   ```typescript
   export type CampaignType = 'DISCLOSURE' | 'ATTESTATION' | 'SURVEY';
   export type CampaignStatus = 'DRAFT' | 'SCHEDULED' | 'ACTIVE' | 'PAUSED' | 'COMPLETED' | 'CANCELLED';

   export interface Campaign {
     id: string;
     organizationId: string;
     name: string;
     description?: string;
     type: CampaignType;
     status: CampaignStatus;
     startDate?: string;
     endDate?: string;
     totalAssignments: number;
     completedAssignments: number;
     overdueAssignments: number;
     ownerId?: string;
     ownerName?: string;
     createdAt: string;
     updatedAt: string;
   }

   export interface CampaignListResponse {
     data: Campaign[];
     total: number;
     page: number;
     limit: number;
   }

   export interface CampaignQueryParams {
     type?: CampaignType;
     status?: CampaignStatus;
     ownerId?: string;
     startDateFrom?: string;
     startDateTo?: string;
     search?: string;
     page?: number;
     limit?: number;
     sortBy?: string;
     sortOrder?: 'asc' | 'desc';
   }
   ```

2. Create campaigns-api.ts:
   - Import apiClient from ./api
   - Endpoints:
     - list(params?: CampaignQueryParams): GET /campaigns
     - getById(id): GET /campaigns/:id
     - getStats(): GET /campaigns/dashboard/stats (for summary cards)
     - create(dto): POST /campaigns
     - update(id, dto): PUT /campaigns/:id

3. Create use-campaigns.ts hook:
   - useCampaigns(params): useQuery for listing with filters
   - useCampaignStats(): useQuery for dashboard stats
   - useCampaign(id): useQuery for single campaign
   - Queries refetch on param changes
  </action>
  <verify>
- `grep "list" apps/frontend/src/lib/campaigns-api.ts` shows list endpoint
- `grep "useCampaigns" apps/frontend/src/hooks/use-campaigns.ts` shows hook
- TypeScript compiles: `cd apps/frontend && npx tsc --noEmit`
  </verify>
  <done>
- Campaign types defined
- campaignsApi exports list, getById, getStats, create, update
- useCampaigns hook provides filtered data with pagination
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Campaigns Page Components</name>
  <files>
    apps/frontend/src/components/campaigns/campaigns-summary-cards.tsx
    apps/frontend/src/components/campaigns/campaigns-filters.tsx
    apps/frontend/src/components/campaigns/campaigns-table.tsx
  </files>
  <action>
1. Create campaigns-summary-cards.tsx:
   - Props: stats (active, pending, completed, totalReach), isLoading
   - 4 cards in horizontal row (grid)
   - Each card: title, large number, optional trend indicator
   - Cards: Active Campaigns, Pending Review, Completed, Total Reach
   - Loading: Skeleton for numbers
   - Use Card, CardContent from shadcn/ui

2. Create campaigns-filters.tsx:
   - Props: filters (CampaignQueryParams), onChange
   - Filter bar layout (flex row, wrap on mobile)
   - Filters:
     - Type: Select with options (All, Disclosure, Attestation, Survey)
     - Status: Select with options (All, Draft, Scheduled, Active, Paused, Completed)
     - Owner: Select with user options (fetch users or pass as prop)
     - Date range: DatePickerWithRange component (or two date inputs)
     - Search: Input with search icon
   - "Advanced" button that expands more filters (placeholder for now)
   - Clear filters button

3. Create campaigns-table.tsx:
   - Props: campaigns (Campaign[]), isLoading, onSort, sortBy, sortOrder
   - Columns: Name, Status (badge), Type (badge), Start Date, End Date, Completion Rate (progress bar), Owner
   - Sortable headers (click to sort)
   - Row click navigates to /campaigns/[id]
   - Loading: Skeleton rows
   - Empty: "No campaigns found" message
   - Use Table from shadcn/ui
  </action>
  <verify>
- `grep "CampaignsSummaryCards" apps/frontend/src/components/campaigns/campaigns-summary-cards.tsx` shows export
- Components render without errors
- Table shows correct columns
  </verify>
  <done>
- Summary cards show 4 stats
- Filters component handles type, status, owner, date range, search
- Table shows campaigns with sortable columns and row navigation
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Campaigns List Page</name>
  <files>
    apps/frontend/src/app/(authenticated)/campaigns/page.tsx
  </files>
  <action>
1. Create campaigns/page.tsx:
   - Page header: "Campaigns" title, "Manage compliance campaigns" description, "Create Campaign" button
   - Summary cards at top (CampaignsSummaryCards)
   - Saved views tabs: "All", "Active", "Drafts", "Completed" + "+ Add view" (tabs change filter preset)
   - Filters bar (CampaignsFilters)
   - Campaigns table (CampaignsTable)
   - Pagination at bottom

2. State management:
   - Use URL search params for filter state (shareable URLs)
   - useSearchParams to read/write filters
   - Page state: page, limit from params
   - Call useCampaigns with params
   - Call useCampaignStats for summary cards

3. Layout structure:
   ```tsx
   <div className="space-y-6">
     {/* Header */}
     <div className="flex items-center justify-between">
       <div>
         <h1 className="text-2xl font-bold">Campaigns</h1>
         <p className="text-muted-foreground">Manage compliance campaigns</p>
       </div>
       <Button onClick={() => router.push('/campaigns/new')}>
         <Plus className="mr-2 h-4 w-4" />
         Create Campaign
       </Button>
     </div>

     {/* Summary Cards */}
     <CampaignsSummaryCards stats={stats} isLoading={statsLoading} />

     {/* Tabs */}
     <Tabs value={activeTab} onValueChange={handleTabChange}>
       <TabsList>
         <TabsTrigger value="all">All</TabsTrigger>
         <TabsTrigger value="active">Active</TabsTrigger>
         <TabsTrigger value="drafts">Drafts</TabsTrigger>
         <TabsTrigger value="completed">Completed</TabsTrigger>
       </TabsList>
     </Tabs>

     {/* Filters */}
     <CampaignsFilters filters={filters} onChange={handleFilterChange} />

     {/* Table */}
     <CampaignsTable
       campaigns={campaigns}
       isLoading={isLoading}
       onSort={handleSort}
       sortBy={sortBy}
       sortOrder={sortOrder}
     />

     {/* Pagination */}
     <Pagination ... />
   </div>
   ```
  </action>
  <verify>
- Navigate to /campaigns
- See page with header, summary cards, tabs, filters, table
- Click "Create Campaign" navigates to /campaigns/new
- Filters work (may need backend to test fully)
- Table rows clickable
  </verify>
  <done>
- /campaigns page renders with all sections
- Summary cards show stats from API
- Filters update URL and table data
- Table shows campaigns with proper formatting
- Create Campaign button navigates to /campaigns/new
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Navigate to /campaigns from sidebar
2. Verify all sections render:
   - Header with Create button
   - Summary cards (may show 0s if no data)
   - Tabs (All, Active, Drafts, Completed)
   - Filters bar
   - Table (may show empty state)
3. Click Create Campaign - should go to /campaigns/new
4. Run: `cd apps/frontend && npm run lint`
5. Run: `cd apps/frontend && npx tsc --noEmit`
</verification>

<success_criteria>
- /campaigns page accessible from navigation
- Summary cards display (Active, Pending, Completed, Total Reach)
- Filters present and functional (Type, Status, Owner, Date range, Search)
- Table shows campaigns with correct columns
- Table rows navigate to detail page
- Create Campaign button works
- Page is responsive (filters wrap on mobile)
- No TypeScript or ESLint errors
</success_criteria>

<output>
After completion, create `.planning/phases/11.1-frontend-navigation-and-ui-fixes/11.1-05-SUMMARY.md`
</output>
