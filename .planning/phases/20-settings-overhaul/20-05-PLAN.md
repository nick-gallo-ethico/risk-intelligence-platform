---
phase: 20
plan: 05
name: Data Management - Properties & Objects Pages
wave: 3
autonomous: true
---

# Plan 20-05: Data Management — Properties & Objects Pages

## Objective

Build the Data Management section: Custom Properties management UI (HubSpot-style) and Objects browser.

## What Already Exists

- Backend `CustomPropertiesController` with full CRUD:
  - POST /custom-properties — create
  - GET /custom-properties — list all
  - GET /custom-properties/by-entity/:entityType — filter by entity
  - PUT /custom-properties/:id — update
  - DELETE /custom-properties/:id — soft delete
  - PUT /custom-properties/reorder/:entityType — reorder
  - POST /custom-properties/validate/:entityType — validate values
- `CustomPropertyEntityType` enum: CASE, INVESTIGATION, PERSON, RIU
- `PropertyDataType` enum: TEXT, NUMBER, DATE, DATETIME, SELECT, MULTI_SELECT, BOOLEAN, URL, EMAIL, PHONE
- Custom properties have: name, key, description, dataType, entityType, isRequired, isActive, defaultValue, options (for SELECT/MULTI_SELECT), displayOrder, groupName

## Tasks

### Task 1: Custom Properties API Client

**File:** `apps/frontend/src/services/custom-properties.ts`

API client for custom properties:

- `listAll(includeInactive?)` — GET /api/v1/custom-properties
- `listByEntity(entityType)` — GET /api/v1/custom-properties/by-entity/:entityType
- `create(dto)` — POST /api/v1/custom-properties
- `update(id, dto)` — PUT /api/v1/custom-properties/:id
- `remove(id)` — DELETE /api/v1/custom-properties/:id
- `reorder(entityType, orders)` — PUT /api/v1/custom-properties/reorder/:entityType

### Task 2: Custom Properties Types

**File:** `apps/frontend/src/types/custom-property.ts`

TypeScript types:

- `CustomProperty` — full property interface
- `CustomPropertyEntityType` — CASE | INVESTIGATION | PERSON | RIU
- `PropertyDataType` — TEXT | NUMBER | DATE | etc.
- `CreateCustomPropertyDto`, `UpdateCustomPropertyDto`

### Task 3: Properties Management Page

**File:** `apps/frontend/src/app/(authenticated)/settings/properties/page.tsx`

HubSpot-style property management:

- **Entity type tabs**: Cases, Investigations, People, RIUs (tab bar at top)
- **Property list**: Table with columns: Name, Key, Type, Group, Required, Active
- **Group sections**: Properties grouped by `groupName` with collapsible headers
- **Actions**: Create new property (dialog), Edit (dialog), Archive (soft delete), Reorder (drag handles)
- **Create/Edit Dialog**: Form with name, key (auto-generated from name), description, data type selector, entity type (pre-selected from tab), required toggle, default value, options list (for SELECT/MULTI_SELECT)

### Task 4: Objects Browser Page

**File:** `apps/frontend/src/app/(authenticated)/settings/objects/page.tsx`

Simple objects overview page showing platform data model:

- Cards for each object type: Cases, Investigations, Persons, RIUs, Policies, Campaigns, Disclosures, Workflows
- Each card shows: icon, name, description, count of records, count of custom properties, "View Properties" link
- Record counts fetched from search or simple count endpoints
- "View Properties" links to `/settings/properties?entity=CASE` etc.

## Success Criteria

- [ ] `/settings/properties` renders with entity type tabs
- [ ] Properties list shows existing custom properties from API
- [ ] Create property dialog works with all data types
- [ ] Edit property dialog pre-populates and saves
- [ ] Archive property (soft delete) works
- [ ] `/settings/objects` shows object cards with descriptions
- [ ] TypeScript compiles without errors
