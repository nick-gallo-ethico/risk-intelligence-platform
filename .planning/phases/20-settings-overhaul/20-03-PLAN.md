---
phase: 20
plan: 03
name: Account Management Pages (Defaults, Approvals, Permission Sets)
wave: 2
autonomous: true
---

# Plan 20-03: Account Management Pages

## Objective

Build the Account Management section pages: Account Defaults, Approvals configuration, and Permission Sets for Users & Teams.

## What Already Exists

- `/settings/users` — Full user management (list, invite, edit, deactivate)
- `/settings/audit` — Audit log page
- `RolePermissionsTable` component showing static permission matrix
- Backend `users.controller.ts` with `GET /users/role-permissions` endpoint
- Backend workflow module with approval workflow support
- Organization settings page with general defaults

## Tasks

### Task 1: Account Defaults Page

**File:** `apps/frontend/src/app/(authenticated)/settings/defaults/page.tsx`

Organization-wide default settings page:

- **Case Defaults**: Default pipeline, default assignment strategy, auto-close after N days, SLA defaults by severity
- **Communication Defaults**: Default sender name, reply-to address, email footer
- **Date/Time**: Organization timezone (already in org settings but replicate here for discoverability), fiscal year start, work week days

Use existing organization settings API — this is a focused view of a subset of org settings.

### Task 2: Approvals Configuration Page

**File:** `apps/frontend/src/app/(authenticated)/settings/approvals/page.tsx`

Approval workflow configuration:

- List of approval types: Policy Approval, Disclosure Approval, Case Closure, Remediation Sign-off
- For each type: show current workflow template (link to workflow builder), enable/disable, default approvers
- Link to workflow builder for customization (`/settings/workflows`)
- Simple table layout with action buttons

### Task 3: Permission Sets Page (Roles)

**File:** `apps/frontend/src/app/(authenticated)/settings/roles/page.tsx`

Build the missing `/settings/roles` page:

- List all roles with descriptions
- For each role: expandable card showing permission matrix (reuse `RolePermissionsTable`)
- "View Permissions" button expands to show full resource/action grid
- Info note: "Custom permission sets coming soon" (for V2 — current RBAC is role-based, not custom sets)

This addresses the navigation link that currently 404s.

### Task 4: Update Users Page with Permission Set Link

**File:** `apps/frontend/src/app/(authenticated)/settings/users/page.tsx`

Add a "View Roles & Permissions" link/button at the top of the users page that navigates to `/settings/roles`.

## Success Criteria

- [ ] `/settings/defaults` shows org defaults for cases, communications, and date/time
- [ ] `/settings/approvals` shows approval types with workflow links
- [ ] `/settings/roles` renders (no more 404) with role list and expandable permissions
- [ ] Users page has link to roles page
- [ ] TypeScript compiles without errors
