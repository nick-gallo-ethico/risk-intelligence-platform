---
phase: 02-demo-tenant-seed-data
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - apps/backend/prisma/seeders/location.seeder.ts
  - apps/backend/prisma/seeders/division.seeder.ts
  - apps/backend/prisma/seeders/employee.seeder.ts
  - apps/backend/prisma/schema.prisma
  - apps/backend/prisma/seed.ts
autonomous: true

must_haves:
  truths:
    - "20,000 employees exist in the demo tenant with realistic names, titles, and full reporting chains"
    - "4 divisions (Healthcare 50%, Tech, Retail, Energy) with Business Unit -> Department -> Team hierarchy"
    - "50+ global locations across US, EMEA, APAC with real cities and fictional addresses"
    - "Every employee has a manager up to division VP (full reporting chains)"
    - "Named executive personas (CCO, division heads) for memorable demo walkthroughs"
    - "Work modes are division-specific (Tech remote, Healthcare onsite, etc.)"
    - "Multi-language workforce matching global footprint"
  artifacts:
    - path: "apps/backend/prisma/seeders/location.seeder.ts"
      provides: "Global location seeder with 50+ real cities"
      exports: ["seedLocations", "LOCATIONS"]
    - path: "apps/backend/prisma/seeders/division.seeder.ts"
      provides: "Division/Business Unit/Department/Team structure"
      exports: ["seedDivisions", "DIVISION_STRUCTURE"]
    - path: "apps/backend/prisma/seeders/employee.seeder.ts"
      provides: "Employee factory with 20K employees, full hierarchy, named executives"
      exports: ["seedEmployees", "NAMED_EXECUTIVES"]
    - path: "apps/backend/prisma/schema.prisma"
      provides: "Location, Division, BusinessUnit, Department, Team, Employee models"
      contains: "model Location, model Division, model BusinessUnit, model Department, model Team, model Employee"
  key_links:
    - from: "apps/backend/prisma/seeders/employee.seeder.ts"
      to: "@faker-js/faker"
      via: "faker.person.firstName(), faker.person.lastName()"
      pattern: "faker\\.person\\."
    - from: "apps/backend/prisma/seeders/location.seeder.ts"
      to: "LOCATIONS constant"
      via: "Real city names with fictional addresses"
      pattern: "LOCATIONS\\["
---

<objective>
Create a comprehensive organizational structure for Acme Co. demo tenant with 20,000 employees across 50+ global locations in a 4-level hierarchy (Division -> Business Unit -> Department -> Team).

Purpose: The organizational structure enables realistic case routing, HRBP assignment, geographic analytics, and executive-level demo walkthroughs. The scale (20K employees, 50+ locations) matches enterprise customer expectations and stress-tests platform features.

Output:
1. Location model and seeder with 50+ global locations (real cities, fictional addresses)
2. Division/BusinessUnit/Department/Team models and seeder with 4-division structure
3. Employee model and seeder generating 20,000 employees with full reporting chains
4. Named executive personas (CCO, division heads, HRBPs) for demo memorability
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-demo-tenant-seed-data/02-CONTEXT.md (PRIMARY - use this for all requirements)
@.planning/phases/02-demo-tenant-seed-data/02-RESEARCH.md
@.planning/phases/02-demo-tenant-seed-data/02-01-PLAN.md (for utils dependency)
@apps/backend/prisma/schema.prisma
</context>

<tasks>

<!-- ============================================== -->
<!-- TASK 1: Add Location and Org Structure Models  -->
<!-- ============================================== -->

<task type="auto">
  <name>Task 1: Add Location and Organizational Structure models to Prisma schema</name>
  <files>apps/backend/prisma/schema.prisma</files>
  <action>
Add the Location, Division, BusinessUnit, Department, Team, and Employee models to support the 4-level hierarchy.

**Add after the Interaction model (or appropriate location):**

```prisma
// ===========================================
// Location Entity (Global Offices)
// ===========================================

/// Location represents a physical office or work site.
/// Real cities with fictional addresses for demo realism.
model Location {
  id             String @id @default(uuid())
  organizationId String @map("organization_id")

  // Location Identity
  code           String  // e.g., "NYC-HQ", "LON-01", "TKY-01"
  name           String  // e.g., "New York Headquarters"

  // Address
  addressLine1   String  @map("address_line_1")  // Fictional address
  addressLine2   String? @map("address_line_2")
  city           String  // Real city name
  stateProvince  String? @map("state_province")
  postalCode     String? @map("postal_code")
  country        String  // ISO country code
  countryName    String  @map("country_name")

  // Geographic Classification
  region         String  // "US", "EMEA", "APAC"
  timezone       String  // e.g., "America/New_York"

  // Metadata
  isHeadquarters Boolean @default(false) @map("is_headquarters")
  isActive       Boolean @default(true) @map("is_active")

  // Timestamps
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  // Relations
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  employees      Employee[]

  @@unique([organizationId, code])
  @@index([organizationId])
  @@index([organizationId, region])
  @@index([organizationId, country])
  @@map("locations")
}

// ===========================================
// Division Entity (Top Level - 4 Divisions)
// ===========================================

/// Division represents a major business segment.
/// Acme Co. has 4 divisions: Healthcare (50%), Tech, Retail, Energy
model Division {
  id             String @id @default(uuid())
  organizationId String @map("organization_id")

  code           String  // e.g., "HLTH", "TECH", "RETL", "ENRG"
  name           String  // e.g., "Healthcare Division"
  description    String?

  // Division Head (named persona)
  headEmployeeId String? @map("head_employee_id")

  // Distribution weight for employee generation
  employeeWeight Int     @default(25) @map("employee_weight") // Percentage of total

  // Work mode defaults
  defaultWorkMode WorkMode @default(HYBRID) @map("default_work_mode")

  // Timestamps
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  // Relations
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  businessUnits  BusinessUnit[]

  @@unique([organizationId, code])
  @@index([organizationId])
  @@map("divisions")
}

// ===========================================
// Business Unit Entity (Level 2)
// ===========================================

/// BusinessUnit is a sub-segment within a Division.
/// Example: Within Healthcare -> "Hospital Services", "Pharma", "Medical Devices"
model BusinessUnit {
  id             String @id @default(uuid())
  organizationId String @map("organization_id")
  divisionId     String @map("division_id")

  code           String  // e.g., "HOSP", "PHRM"
  name           String  // e.g., "Hospital Services"
  description    String?

  // BU Head
  headEmployeeId String? @map("head_employee_id")

  // Timestamps
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  // Relations
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  division       Division     @relation(fields: [divisionId], references: [id], onDelete: Cascade)
  departments    Department[]

  @@unique([organizationId, code])
  @@index([organizationId])
  @@index([divisionId])
  @@map("business_units")
}

// ===========================================
// Department Entity (Level 3)
// ===========================================

/// Department is a functional area within a Business Unit.
/// Example: Within Hospital Services -> "Nursing", "Administration", "Clinical"
model Department {
  id              String @id @default(uuid())
  organizationId  String @map("organization_id")
  businessUnitId  String @map("business_unit_id")

  code            String  // e.g., "NURS", "ADMN"
  name            String  // e.g., "Nursing"
  description     String?

  // Department Head (Director level)
  headEmployeeId  String? @map("head_employee_id")

  // HRBP Assignment (for case routing)
  hrbpEmployeeId  String? @map("hrbp_employee_id")

  // Timestamps
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  organization    Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  businessUnit    BusinessUnit @relation(fields: [businessUnitId], references: [id], onDelete: Cascade)
  teams           Team[]

  @@unique([organizationId, code])
  @@index([organizationId])
  @@index([businessUnitId])
  @@map("departments")
}

// ===========================================
// Team Entity (Level 4 - Lowest)
// ===========================================

/// Team is the smallest organizational unit.
/// Example: Within Nursing -> "ICU Team", "ER Team", "Pediatrics Team"
model Team {
  id             String @id @default(uuid())
  organizationId String @map("organization_id")
  departmentId   String @map("department_id")

  code           String  // e.g., "ICU", "ER"
  name           String  // e.g., "ICU Team"
  description    String?

  // Team Lead (Manager level)
  leadEmployeeId String? @map("lead_employee_id")

  // Primary location for this team
  locationId     String? @map("location_id")

  // Timestamps
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  // Relations
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  department     Department   @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  employees      Employee[]

  @@unique([organizationId, code])
  @@index([organizationId])
  @@index([departmentId])
  @@map("teams")
}

// ===========================================
// Employee Entity (HRIS Sync)
// ===========================================

/// Employee represents HRIS-synced employee data.
/// 20,000 employees with full reporting chains.
/// Distinct from User - an Employee may or may not have a User account.
model Employee {
  id             String @id @default(uuid())
  organizationId String @map("organization_id")

  // HRIS Identity
  hrisEmployeeId String  @unique @map("hris_employee_id") // External HRIS ID
  firstName      String  @map("first_name")
  lastName       String  @map("last_name")
  preferredName  String? @map("preferred_name")  // For named personas
  email          String
  phone          String?

  // Position
  jobTitle       String  @map("job_title")
  jobLevel       JobLevel @default(IC) @map("job_level")

  // Organizational Placement
  divisionId     String? @map("division_id")
  businessUnitId String? @map("business_unit_id")
  departmentId   String? @map("department_id")
  teamId         String? @map("team_id")
  locationId     String? @map("location_id")

  // Legacy fields for backward compatibility
  department     String?  // Denormalized department name
  departmentCode String? @map("department_code")
  location       String?  // Denormalized location name
  locationCode   String? @map("location_code")
  costCenter     String? @map("cost_center")

  // Hierarchy
  managerId      String? @map("manager_id") // Self-reference to manager Employee
  managerName    String? @map("manager_name") // Denormalized for display

  // Work Arrangement
  workMode       WorkMode @default(HYBRID) @map("work_mode")

  // Language (for multi-language workforce)
  primaryLanguage String @default("en") @map("primary_language") // ISO 639-1 code

  // Compliance Role (for case routing)
  complianceRole ComplianceRole? @map("compliance_role")

  // Employment
  employmentStatus EmploymentStatus @default(ACTIVE) @map("employment_status")
  employmentType   EmploymentType   @default(FULL_TIME) @map("employment_type")
  hireDate         DateTime?        @map("hire_date")
  terminationDate  DateTime?        @map("termination_date")

  // Named Persona Flag (for executives with memorable names)
  isNamedPersona   Boolean @default(false) @map("is_named_persona")
  personaRole      String? @map("persona_role")  // e.g., "CCO", "Division VP Healthcare"

  // Sync Metadata
  sourceSystem   String    @default("MANUAL") @map("source_system")
  syncedAt       DateTime  @default(now()) @map("synced_at")
  lastSyncStatus String?   @map("last_sync_status")
  rawHrisData    Json?     @map("raw_hris_data")

  // Timestamps
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  manager        Employee?    @relation("EmployeeManager", fields: [managerId], references: [id])
  reports        Employee[]   @relation("EmployeeManager")
  teamAssignment Team?        @relation(fields: [teamId], references: [id])
  locationAssignment Location? @relation(fields: [locationId], references: [id])

  @@unique([organizationId, email])
  @@index([organizationId])
  @@index([organizationId, divisionId])
  @@index([organizationId, departmentId])
  @@index([organizationId, teamId])
  @@index([organizationId, locationId])
  @@index([organizationId, employmentStatus])
  @@index([organizationId, managerId])
  @@index([organizationId, jobLevel])
  @@index([organizationId, complianceRole])
  @@map("employees")
}

// ===========================================
// Enums for Organization Structure
// ===========================================

enum JobLevel {
  IC          // Individual Contributor
  MANAGER     // First-line manager
  DIRECTOR    // Department head
  VP          // Division/BU head
  SVP         // Senior VP
  C_SUITE     // C-level executive

  @@map("job_level")
}

enum WorkMode {
  ONSITE      // Full-time office
  REMOTE      // Full-time remote
  HYBRID      // Mix of onsite/remote

  @@map("work_mode")
}

enum ComplianceRole {
  CCO                    // Chief Compliance Officer
  INVESTIGATOR           // Compliance Investigator
  HRBP                   // HR Business Partner (case routing)
  LEGAL_COUNSEL          // Legal team member
  ETHICS_COMMITTEE       // Ethics committee member

  @@map("compliance_role")
}

enum EmploymentStatus {
  ACTIVE
  INACTIVE
  ON_LEAVE
  TERMINATED

  @@map("employment_status")
}

enum EmploymentType {
  FULL_TIME
  PART_TIME
  CONTRACTOR
  TEMPORARY
  INTERN

  @@map("employment_type")
}
```

**Also add to Organization model:**
```prisma
// Add these relations to the Organization model
locations      Location[]
divisions      Division[]
businessUnits  BusinessUnit[]
departments    Department[]
teams          Team[]
employees      Employee[]
```

Run prisma generate after modifying schema.
  </action>
  <verify>
Generate Prisma client: `cd apps/backend && npx prisma generate`
Should complete without errors.
  </verify>
  <done>
Location and organizational hierarchy models added to schema with 4-level structure (Division -> BusinessUnit -> Department -> Team), Employee model with job levels, work modes, compliance roles, and named persona support. Prisma client regenerated.
  </done>
</task>

<!-- ============================================== -->
<!-- TASK 2: Create Location Seeder                 -->
<!-- ============================================== -->

<task type="auto">
  <name>Task 2: Create location seeder with 50+ global locations</name>
  <files>apps/backend/prisma/seeders/location.seeder.ts</files>
  <action>
Create location.seeder.ts that generates 50+ locations across US, EMEA, and APAC regions.

**Location distribution (from CONTEXT.md):**
- US: ~25 locations (major cities + regional offices)
- EMEA: ~15 locations (UK, Germany, France, Netherlands, Spain, Italy, Nordics)
- APAC: ~12 locations (Japan, China, Singapore, Australia, India, South Korea)

**Each location has:**
- Real city name
- Fictional address (e.g., "Acme Tower, 123 Main Street")
- Accurate timezone
- Region classification
- Headquarters flag (1 per region)

**Export:**
```typescript
export const LOCATIONS = {
  US: [
    { code: 'NYC-HQ', name: 'New York Headquarters', city: 'New York', state: 'NY', country: 'US', timezone: 'America/New_York', isHQ: true },
    { code: 'CHI-01', name: 'Chicago Office', city: 'Chicago', state: 'IL', country: 'US', timezone: 'America/Chicago' },
    // ... 23 more US locations
  ],
  EMEA: [
    { code: 'LON-HQ', name: 'London Headquarters', city: 'London', country: 'GB', timezone: 'Europe/London', isHQ: true },
    { code: 'FRA-01', name: 'Frankfurt Office', city: 'Frankfurt', country: 'DE', timezone: 'Europe/Berlin' },
    // ... 13 more EMEA locations
  ],
  APAC: [
    { code: 'TKY-HQ', name: 'Tokyo Headquarters', city: 'Tokyo', country: 'JP', timezone: 'Asia/Tokyo', isHQ: true },
    { code: 'SIN-01', name: 'Singapore Office', city: 'Singapore', country: 'SG', timezone: 'Asia/Singapore' },
    // ... 10 more APAC locations
  ]
};

export async function seedLocations(
  prisma: PrismaClient,
  organizationId: string
): Promise<Map<string, string>>  // Returns Map<locationCode, locationId>
```

**US locations (25):**
New York (HQ), Chicago, Los Angeles, San Francisco, Boston, Dallas, Houston, Miami, Atlanta, Seattle, Denver, Phoenix, Philadelphia, Minneapolis, Detroit, Charlotte, Nashville, San Diego, Portland, Austin, Raleigh, Tampa, Indianapolis, Columbus, St. Louis

**EMEA locations (15):**
London (HQ), Frankfurt, Paris, Amsterdam, Madrid, Milan, Dublin, Munich, Zurich, Stockholm, Copenhagen, Brussels, Vienna, Prague, Warsaw

**APAC locations (12):**
Tokyo (HQ), Singapore, Sydney, Melbourne, Shanghai, Beijing, Hong Kong, Seoul, Bangalore, Mumbai, Manila, Auckland

Generate fictional addresses using pattern: "Acme [Building Type], [Number] [Street Name]"
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Location seeder creates 52 global locations across 3 regions with real cities, fictional addresses, accurate timezones, and regional HQ flags.
  </done>
</task>

<!-- ============================================== -->
<!-- TASK 3: Create Division Structure Seeder       -->
<!-- ============================================== -->

<task type="auto">
  <name>Task 3: Create division/BU/department/team structure seeder</name>
  <files>apps/backend/prisma/seeders/division.seeder.ts</files>
  <action>
Create division.seeder.ts that generates the 4-level organizational hierarchy.

**Division structure (from CONTEXT.md):**
```typescript
export const DIVISION_STRUCTURE = {
  HEALTHCARE: {
    code: 'HLTH',
    name: 'Healthcare Division',
    weight: 50,  // 50% of employees
    workMode: 'ONSITE',  // Healthcare mostly onsite
    businessUnits: [
      {
        code: 'HOSP', name: 'Hospital Services',
        departments: [
          { code: 'NURS', name: 'Nursing', teams: ['ICU', 'ER', 'Pediatrics', 'Surgery', 'General'] },
          { code: 'ADMN', name: 'Administration', teams: ['Front Desk', 'Records', 'Billing'] },
          { code: 'CLIN', name: 'Clinical', teams: ['Diagnostics', 'Lab', 'Radiology'] },
        ]
      },
      {
        code: 'PHRM', name: 'Pharmaceuticals',
        departments: [
          { code: 'RND', name: 'R&D', teams: ['Drug Discovery', 'Clinical Trials', 'Formulation'] },
          { code: 'MFG', name: 'Manufacturing', teams: ['Production', 'QA', 'Packaging'] },
          { code: 'REG', name: 'Regulatory', teams: ['FDA Compliance', 'Documentation'] },
        ]
      },
      {
        code: 'MEDEV', name: 'Medical Devices',
        departments: [
          { code: 'ENG', name: 'Engineering', teams: ['Design', 'Prototyping', 'Testing'] },
          { code: 'SALES', name: 'Sales', teams: ['Direct', 'Distribution', 'Support'] },
        ]
      }
    ]
  },
  TECH: {
    code: 'TECH',
    name: 'Technology Division',
    weight: 20,
    workMode: 'REMOTE',  // Tech mostly remote
    businessUnits: [
      {
        code: 'SOFT', name: 'Software Products',
        departments: [
          { code: 'DEV', name: 'Development', teams: ['Platform', 'Mobile', 'Web', 'Infrastructure'] },
          { code: 'PROD', name: 'Product', teams: ['Product Management', 'UX', 'Analytics'] },
          { code: 'QA', name: 'Quality', teams: ['Automation', 'Manual', 'Security'] },
        ]
      },
      {
        code: 'CLOUD', name: 'Cloud Services',
        departments: [
          { code: 'OPS', name: 'Operations', teams: ['SRE', 'DevOps', 'Support'] },
          { code: 'ARCH', name: 'Architecture', teams: ['Solutions', 'Enterprise'] },
        ]
      }
    ]
  },
  RETAIL: {
    code: 'RETL',
    name: 'Retail Division',
    weight: 20,
    workMode: 'HYBRID',
    businessUnits: [
      {
        code: 'STORE', name: 'Store Operations',
        departments: [
          { code: 'MGMT', name: 'Store Management', teams: ['Regional Managers', 'Store Managers'] },
          { code: 'MERCH', name: 'Merchandising', teams: ['Visual', 'Inventory', 'Pricing'] },
          { code: 'CSERV', name: 'Customer Service', teams: ['In-Store', 'Call Center', 'Returns'] },
        ]
      },
      {
        code: 'ECOM', name: 'E-Commerce',
        departments: [
          { code: 'DGTL', name: 'Digital', teams: ['Web', 'Mobile App', 'SEO'] },
          { code: 'FULF', name: 'Fulfillment', teams: ['Warehouse', 'Shipping', 'Returns'] },
        ]
      }
    ]
  },
  ENERGY: {
    code: 'ENRG',
    name: 'Energy Division',
    weight: 10,
    workMode: 'HYBRID',
    businessUnits: [
      {
        code: 'RENEW', name: 'Renewable Energy',
        departments: [
          { code: 'SOLAR', name: 'Solar', teams: ['Installation', 'Maintenance', 'Sales'] },
          { code: 'WIND', name: 'Wind', teams: ['Operations', 'Engineering'] },
        ]
      },
      {
        code: 'TRAD', name: 'Traditional Energy',
        departments: [
          { code: 'EXPL', name: 'Exploration', teams: ['Geology', 'Drilling'] },
          { code: 'REFIN', name: 'Refining', teams: ['Operations', 'Safety'] },
        ]
      }
    ]
  }
};

export async function seedDivisions(
  prisma: PrismaClient,
  organizationId: string
): Promise<{
  divisions: Map<string, string>,      // divisionCode -> divisionId
  businessUnits: Map<string, string>,  // buCode -> buId
  departments: Map<string, string>,    // deptCode -> deptId
  teams: Map<string, string>           // teamCode -> teamId
}>
```

**Seeding order:**
1. Create all 4 divisions
2. For each division, create business units
3. For each BU, create departments
4. For each department, create teams

Return maps of all created entities for employee assignment.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Division seeder creates 4 divisions, ~10 business units, ~25 departments, and ~60 teams following the configured hierarchy structure.
  </done>
</task>

<!-- ============================================== -->
<!-- TASK 4: Create Named Executive Personas        -->
<!-- ============================================== -->

<task type="auto">
  <name>Task 4: Define named executive personas</name>
  <files>apps/backend/prisma/seeders/employee.seeder.ts</files>
  <action>
Create the named executive personas that will be memorable for demo walkthroughs.

**Named personas (from CONTEXT.md - CCO, division heads are named and memorable):**
```typescript
export const NAMED_EXECUTIVES = {
  // C-Suite (reports to CEO)
  CEO: { firstName: 'Robert', lastName: 'Chen', preferredName: 'Bob', title: 'Chief Executive Officer', level: 'C_SUITE' },
  CFO: { firstName: 'Sarah', lastName: 'Mitchell', title: 'Chief Financial Officer', level: 'C_SUITE' },
  COO: { firstName: 'Michael', lastName: 'Rodriguez', title: 'Chief Operating Officer', level: 'C_SUITE' },
  CTO: { firstName: 'Jennifer', lastName: 'Park', title: 'Chief Technology Officer', level: 'C_SUITE' },

  // Chief Compliance Officer (key demo persona)
  CCO: {
    firstName: 'Margaret',
    lastName: 'Thompson',
    preferredName: 'Maggie',
    title: 'Chief Compliance Officer',
    level: 'C_SUITE',
    complianceRole: 'CCO'
  },

  CLO: { firstName: 'David', lastName: 'Okonkwo', title: 'Chief Legal Officer', level: 'C_SUITE' },
  CHRO: { firstName: 'Elena', lastName: 'Vasquez', title: 'Chief Human Resources Officer', level: 'C_SUITE' },

  // Division VPs (memorable for demo walkthroughs)
  VP_HEALTHCARE: {
    firstName: 'William',
    lastName: 'Harrison',
    preferredName: 'Bill',
    title: 'Division VP, Healthcare',
    level: 'SVP',
    division: 'HEALTHCARE'
  },
  VP_TECH: {
    firstName: 'Priya',
    lastName: 'Sharma',
    title: 'Division VP, Technology',
    level: 'SVP',
    division: 'TECH'
  },
  VP_RETAIL: {
    firstName: 'James',
    lastName: 'O\'Brien',
    preferredName: 'Jim',
    title: 'Division VP, Retail',
    level: 'SVP',
    division: 'RETAIL'
  },
  VP_ENERGY: {
    firstName: 'Fatima',
    lastName: 'Al-Hassan',
    title: 'Division VP, Energy',
    level: 'SVP',
    division: 'ENERGY'
  },

  // Compliance Team (for case management demos)
  LEAD_INVESTIGATOR: {
    firstName: 'Thomas',
    lastName: 'Washington',
    preferredName: 'Tom',
    title: 'Lead Compliance Investigator',
    level: 'DIRECTOR',
    complianceRole: 'INVESTIGATOR'
  },
  INVESTIGATOR_1: {
    firstName: 'Angela',
    lastName: 'Martinez',
    title: 'Senior Compliance Investigator',
    level: 'MANAGER',
    complianceRole: 'INVESTIGATOR'
  },
  INVESTIGATOR_2: {
    firstName: 'Kevin',
    lastName: 'Nguyen',
    title: 'Compliance Investigator',
    level: 'IC',
    complianceRole: 'INVESTIGATOR'
  },

  // Regional HRBPs (for case routing demos)
  HRBP_US: {
    firstName: 'Rachel',
    lastName: 'Foster',
    title: 'HR Business Partner, Americas',
    level: 'DIRECTOR',
    complianceRole: 'HRBP',
    region: 'US'
  },
  HRBP_EMEA: {
    firstName: 'Hans',
    lastName: 'Mueller',
    title: 'HR Business Partner, EMEA',
    level: 'DIRECTOR',
    complianceRole: 'HRBP',
    region: 'EMEA'
  },
  HRBP_APAC: {
    firstName: 'Yuki',
    lastName: 'Tanaka',
    title: 'HR Business Partner, APAC',
    level: 'DIRECTOR',
    complianceRole: 'HRBP',
    region: 'APAC'
  }
};
```

These personas will be created first (before bulk employees) and referenced throughout the seeder.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Named executive personas defined with memorable names, appropriate titles, and compliance roles for demo walkthroughs.
  </done>
</task>

<!-- ============================================== -->
<!-- TASK 5: Create Employee Seeder (20K)           -->
<!-- ============================================== -->

<task type="auto">
  <name>Task 5: Create employee seeder with 20,000 employees and full hierarchy</name>
  <files>apps/backend/prisma/seeders/employee.seeder.ts</files>
  <action>
Create employee.seeder.ts that generates 20,000 employees with full reporting chains.

**Export:**
```typescript
export async function seedEmployees(
  prisma: PrismaClient,
  organizationId: string,
  locations: Map<string, string>,
  orgStructure: {
    divisions: Map<string, string>,
    businessUnits: Map<string, string>,
    departments: Map<string, string>,
    teams: Map<string, string>
  }
): Promise<Map<string, string>>  // Returns Map<email, employeeId>
```

**Generation order (top-down hierarchy):**

1. **C-Suite (7 people)** - Named personas, report to CEO (CEO has no manager)
2. **Division VPs (4 people)** - Named personas, report to COO
3. **Compliance Team (5-10 people)** - Named personas, report to CCO
4. **Regional HRBPs (3+ per region)** - Named personas, report to CHRO
5. **BU Heads (~10 people)** - Report to Division VPs, VP level
6. **Department Heads (~25 people)** - Report to BU Heads, Director level
7. **Team Leads (~60 people)** - Report to Department Heads, Manager level
8. **Bulk Employees (~19,850 people)** - Distributed by division weight, report to Team Leads

**Division distribution (from CONTEXT.md):**
- Healthcare: 50% (~10,000 employees)
- Tech: 20% (~4,000 employees)
- Retail: 20% (~4,000 employees)
- Energy: 10% (~2,000 employees)

**Location distribution:**
- Match division to region (e.g., Healthcare has more US locations due to regulations)
- Tech employees distributed more evenly (remote-friendly)
- Ensure each location has reasonable headcount

**Work mode by division:**
- Healthcare: 80% onsite, 15% hybrid, 5% remote
- Tech: 60% remote, 30% hybrid, 10% onsite
- Retail: 50% onsite, 40% hybrid, 10% remote
- Energy: 40% onsite, 40% hybrid, 20% remote

**Language distribution (multi-language workforce):**
- US locations: 95% English, 5% Spanish
- EMEA locations: Local language (German, French, Spanish, Italian, etc.) or English
- APAC locations: Local language (Japanese, Mandarin, Korean, Hindi) or English

**Job levels within bulk employees:**
- IC: 85%
- Manager: 10%
- Director: 4%
- VP: 1%

**Batch processing:**
- Use createMany with 500 employees per batch for performance
- Progress logging every 2,000 employees

**Each employee has:**
- Full reporting chain (managerId links up to division VP)
- Appropriate location for their division/team
- Work mode matching division defaults
- Language matching location
- Realistic hire dates (tenure distribution: 1-15 years, weighted toward 2-5)
- Employment status: 95% ACTIVE, 3% ON_LEAVE, 2% INACTIVE
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Employee seeder generates 20,000 employees with full reporting chains, division-appropriate work modes, multi-language support, and realistic tenure distribution.
  </done>
</task>

<!-- ============================================== -->
<!-- TASK 6: Integrate Seeders into Main Script     -->
<!-- ============================================== -->

<task type="auto">
  <name>Task 6: Integrate all seeders into main seed script</name>
  <files>apps/backend/prisma/seed.ts</files>
  <action>
Update seed.ts to call all seeders in the correct order.

**Modifications:**
```typescript
import { seedLocations } from './seeders/location.seeder';
import { seedDivisions } from './seeders/division.seeder';
import { seedEmployees } from './seeders/employee.seeder';

// After organization creation:

console.log('Seeding locations...');
const locationMap = await seedLocations(prisma, organization.id);
console.log(`Created ${locationMap.size} locations`);

console.log('Seeding divisions and org structure...');
const orgStructure = await seedDivisions(prisma, organization.id);
console.log(`Created ${orgStructure.divisions.size} divisions, ${orgStructure.businessUnits.size} BUs, ${orgStructure.departments.size} departments, ${orgStructure.teams.size} teams`);

console.log('Seeding employees (this may take a few minutes)...');
const employeeMap = await seedEmployees(prisma, organization.id, locationMap, orgStructure);
console.log(`Created ${employeeMap.size} employees`);
```

**Seed order is now:**
1. Create/upsert organization
2. Seed categories (from 02-02)
3. Seed locations (52 global locations)
4. Seed divisions/BUs/departments/teams
5. Seed employees (20,000 with full hierarchy)
6. Create/upsert demo users (links to employee records where applicable)
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
seed.ts orchestrates all seeders in correct dependency order, with progress logging for the large employee dataset.
  </done>
</task>

</tasks>

<verification>
1. Prisma generates successfully: `cd apps/backend && npx prisma generate`
2. TypeScript compiles: `cd apps/backend && npx tsc --noEmit`
3. Location model has all fields (region, timezone, real cities)
4. Division/BU/Department/Team hierarchy is correct (4 levels)
5. Employee model has job levels, work modes, compliance roles, named persona support
6. 20,000 employees generated with full reporting chains
7. Division weights respected (Healthcare 50%, Tech 20%, Retail 20%, Energy 10%)
8. Named executives are memorable and have correct roles
9. Multi-language workforce matches geographic distribution
10. Work modes match division patterns (Tech remote, Healthcare onsite)
</verification>

<success_criteria>
- Location model exists with 50+ global locations across US, EMEA, APAC
- 4-level organizational hierarchy established (Division -> BU -> Department -> Team)
- 20,000 employees generated with realistic distribution
- Full reporting chains from IC to division VP
- Named executive personas created (CCO, division heads, investigators, HRBPs)
- Work modes are division-specific (Tech mostly remote, Healthcare mostly onsite)
- Multi-language workforce matching global footprint
- All seeders integrated into main seed script
- Seed completes successfully (may take several minutes for 20K employees)
</success_criteria>

<output>
After completion, create `.planning/phases/02-demo-tenant-seed-data/02-03-SUMMARY.md`
</output>
