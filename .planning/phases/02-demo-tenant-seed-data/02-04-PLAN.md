---
phase: 02-demo-tenant-seed-data
plan: 04
type: execute
wave: 3
depends_on: ["02-01", "02-02"]
files_modified:
  - apps/backend/prisma/seeders/riu.seeder.ts
  - apps/backend/prisma/seeders/utils/seasonality.ts
  - apps/backend/prisma/seeders/data/narrative-templates.ts
  - apps/backend/prisma/seed.ts
autonomous: true

must_haves:
  truths:
    - "5,000 RIUs exist distributed across all 8 RIU types"
    - "RIUs have realistic historical dates spread over 3 years with seasonality spikes"
    - "Type-specific content generated with AI-quality realistic narratives"
    - "Channel distribution: 60% phone, 30% web, 10% other (hotline-heavy)"
    - "Anonymity: 40% anonymous overall, with category-based variation (harassment more anonymous)"
    - "Timestamps are time-zone realistic (EMEA cases filed during EMEA hours)"
    - "Some RIUs are linked (multiple reporters for same incident)"
    - "Edge cases included: very long narratives, Unicode characters, boundary dates"
  artifacts:
    - path: "apps/backend/prisma/seeders/riu.seeder.ts"
      provides: "RIU factory with type-specific content generation and pattern support"
      exports: ["seedRius"]
    - path: "apps/backend/prisma/seeders/utils/seasonality.ts"
      provides: "Seasonality spike calculation for temporal distribution"
      exports: ["applySeasonality", "SEASONALITY_CONFIG"]
    - path: "apps/backend/prisma/seeders/data/narrative-templates.ts"
      provides: "AI-quality narrative templates for realistic complaint descriptions"
      exports: ["NARRATIVE_TEMPLATES"]
  key_links:
    - from: "apps/backend/prisma/seeders/riu.seeder.ts"
      to: "apps/backend/prisma/seeders/utils/temporal.ts"
      via: "generateHistoricalDate with seasonality"
      pattern: "generateHistoricalDate"
    - from: "apps/backend/prisma/seeders/riu.seeder.ts"
      to: "apps/backend/prisma/seeders/utils/seasonality.ts"
      via: "applySeasonality for spike periods"
      pattern: "applySeasonality"
    - from: "apps/backend/prisma/seeders/riu.seeder.ts"
      to: "apps/backend/prisma/seeders/utils/weighted-random.ts"
      via: "weightedRandom for type/severity/reporter type"
      pattern: "weightedRandom"
    - from: "apps/backend/prisma/seeders/riu.seeder.ts"
      to: "apps/backend/prisma/seeders/data/narrative-templates.ts"
      via: "NARRATIVE_TEMPLATES for realistic content"
      pattern: "import"
---

<objective>
Create the RIU (Risk Intelligence Unit) seeder to generate 5,000 historical intake records across all RIU types with realistic patterns.

Purpose: RIUs are the immutable intake records - the foundation of the demo data. They represent 3 years of hotline calls, web form submissions, disclosure responses, and other compliance inputs. Cases will be created from these RIUs in the next plan.

Output: RIU seeder that creates 5,000 RIUs with:
- AI-quality realistic narratives (not lorem ipsum)
- Hotline-heavy channel distribution (60% phone, 30% web, 10% other)
- Category-based anonymity rates (harassment more anonymous)
- Seasonality spikes (after reorgs, holidays, policy changes)
- Multi-reporter incidents (some RIUs link to same underlying incident)
- Time-zone realistic timestamps (EMEA cases during EMEA hours)
- Edge cases (long narratives, Unicode, boundary dates)
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-demo-tenant-seed-data/02-CONTEXT.md (authoritative requirements)
@.planning/phases/02-demo-tenant-seed-data/02-RESEARCH.md
@.planning/phases/02-demo-tenant-seed-data/02-01-PLAN.md (utilities)
@.planning/phases/02-demo-tenant-seed-data/02-02-PLAN.md (categories)
@apps/backend/prisma/schema.prisma (RiskIntelligenceUnit model)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create seasonality utility for temporal spike patterns</name>
  <files>apps/backend/prisma/seeders/utils/seasonality.ts</files>
  <action>
Create seasonality.ts to handle realistic temporal distribution with spike periods.

**Seasonality Configuration:**
```typescript
export const SEASONALITY_CONFIG = {
  // Spike periods (probability multipliers)
  spikePeriods: [
    // Post-holiday spikes (January, early February)
    { startMonth: 1, startDay: 2, endMonth: 2, endDay: 15, multiplier: 1.4, reason: 'post_holiday' },
    // Q1 reorg period (March)
    { startMonth: 3, startDay: 1, endMonth: 3, endDay: 31, multiplier: 1.3, reason: 'q1_reorg' },
    // Mid-year review period (June-July)
    { startMonth: 6, startDay: 15, endMonth: 7, endDay: 31, multiplier: 1.25, reason: 'midyear_review' },
    // Policy change rollout (September)
    { startMonth: 9, startDay: 1, endMonth: 9, endDay: 30, multiplier: 1.35, reason: 'policy_changes' },
    // Year-end stress (November-December)
    { startMonth: 11, startDay: 15, endMonth: 12, endDay: 20, multiplier: 1.2, reason: 'yearend_stress' },
  ],
  // Low periods (summer lull, holiday weeks)
  lowPeriods: [
    { startMonth: 7, startDay: 1, endMonth: 8, endDay: 15, multiplier: 0.7, reason: 'summer_lull' },
    { startMonth: 12, startDay: 21, endMonth: 1, endDay: 1, multiplier: 0.5, reason: 'holiday_break' },
  ],
  baseMultiplier: 1.0,
};

export function getSeasonalityMultiplier(date: Date): { multiplier: number; reason: string | null } {
  // Check spike periods first, then low periods, return base if no match
}

export function applySeasonality(
  baseDate: Date,
  config: typeof SEASONALITY_CONFIG = SEASONALITY_CONFIG
): { date: Date; seasonalityApplied: string | null } {
  // Adjust date based on seasonality to create realistic clustering
}

export function generateSeasonalHistoricalDate(options: {
  yearsBack?: number;
  recentBias?: number;
}): { date: Date; seasonalityApplied: string | null } {
  // Combine with temporal.ts generateHistoricalDate but apply seasonality
}
```

This utility will be used to create realistic spikes after reorgs, holidays, and policy changes.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Seasonality utility created with spike periods (post-holiday, reorg, policy changes) and low periods (summer, holidays).
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AI-quality narrative templates</name>
  <files>apps/backend/prisma/seeders/data/narrative-templates.ts</files>
  <action>
Create narrative-templates.ts with realistic, AI-quality complaint descriptions.

**IMPORTANT:** These are NOT lorem ipsum. They should read like real compliance reports.

```typescript
export const NARRATIVE_TEMPLATES = {
  // Harassment narratives (tend to be more anonymous - 55% anonymous rate)
  harassment: {
    anonymityRate: 0.55, // Higher than baseline 40%
    templates: [
      {
        opener: "I've been hesitant to come forward, but the situation has become unbearable.",
        body: "For the past {duration}, {subject_role} has been making comments about my {attribute}. It started with what seemed like jokes, but has escalated to {specific_behavior}. Other team members have witnessed this, including on {date_reference}.",
        detail_variations: [
          "appearance during team meetings",
          "personal life choices in front of clients",
          "background in ways that made me uncomfortable",
        ],
      },
      // 5-10 more templates per category
    ],
  },

  // Financial misconduct (moderate anonymity - 35%)
  financial_misconduct: {
    anonymityRate: 0.35,
    templates: [
      {
        opener: "I have documentation that suggests improper financial practices.",
        body: "While reviewing {document_type} for {time_period}, I noticed {discrepancy}. The amounts involved appear to be approximately {amount_range}. I have copies of {evidence_type} that support my concerns.",
      },
    ],
  },

  // Safety violations (lower anonymity - 30%, people want action)
  safety: {
    anonymityRate: 0.30,
    templates: [
      {
        opener: "This is a safety concern that needs immediate attention.",
        body: "On {date}, I observed {safety_issue} in {location}. This violates {regulation_reference}. {consequence_statement}",
      },
    ],
  },

  // Conflict of interest
  conflict_of_interest: {
    anonymityRate: 0.25, // Often self-disclosures
    templates: [...],
  },

  // Retaliation (highest anonymity - 70%)
  retaliation: {
    anonymityRate: 0.70,
    templates: [
      {
        opener: "I believe I am being retaliated against for my previous report.",
        body: "Since I reported {original_issue} on {date}, I have experienced {retaliation_actions}. My performance reviews were {review_change} despite no change in my work quality.",
      },
    ],
  },

  // Edge case: Very long narrative (for testing)
  edge_case_long: {
    // 2000+ character narratives with detailed timelines
  },

  // Edge case: Unicode characters
  edge_case_unicode: {
    // Names with accents, non-Latin scripts, emoji in quotes
    templates: [
      "My colleague Müller said '这不公平' when discussing the situation with François...",
    ],
  },
};

export function generateNarrative(
  category: string,
  options?: { forceAnonymous?: boolean; includeLongNarrative?: boolean }
): { narrative: string; suggestedAnonymityRate: number } {
  // Select template, fill placeholders with faker, return complete narrative
}
```
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
AI-quality narrative templates created for all categories with category-based anonymity rates and edge cases.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create RIU type templates with channel distribution</name>
  <files>apps/backend/prisma/seeders/riu.seeder.ts</files>
  <action>
Create riu.seeder.ts with type-specific content templates.

**Channel Distribution (60% phone, 30% web, 10% other):**
```typescript
const CHANNEL_DISTRIBUTION = {
  PHONE: 60,      // Hotline calls
  WEB_FORM: 30,   // Web submissions
  OTHER: 10,      // Chatbot, proxy, email, etc.
};

const RIU_TYPE_TEMPLATES: Record<RiuType, RiuTypeTemplate> = {
  HOTLINE_REPORT: {
    sourceChannel: 'PHONE',
    channelWeight: 60, // Primary driver of phone channel
    generateDetails: (category: string) => {
      // Use NARRATIVE_TEMPLATES based on category
      const { narrative } = generateNarrative(category);
      return narrative;
    },
    severityDistribution: { CRITICAL: 5, HIGH: 25, MEDIUM: 50, LOW: 20 },
  },
  WEB_FORM_SUBMISSION: {
    sourceChannel: 'WEB_FORM',
    channelWeight: 30,
    generateDetails: (category: string) => {
      const { narrative } = generateNarrative(category);
      return narrative;
    },
    severityDistribution: { CRITICAL: 3, HIGH: 20, MEDIUM: 55, LOW: 22 },
  },
  // ... other types with appropriate channels
  CHATBOT_TRANSCRIPT: {
    sourceChannel: 'CHATBOT',
    channelWeight: 4, // Part of "other" 10%
    generateDetails: (category: string) => {
      return `[Chatbot Transcript - ${new Date().toISOString()}]\n\n` +
        `User: I need to report something confidential.\n` +
        `Bot: I understand. I'm here to help you file a report securely. Can you tell me more about your concern?\n` +
        `User: ${generateNarrative(category).narrative}\n` +
        `Bot: Thank you for sharing this. I've captured your report and it will be reviewed by our compliance team.`;
    },
    severityDistribution: { CRITICAL: 2, HIGH: 15, MEDIUM: 50, LOW: 33 },
  },
  // PROXY_REPORT, INCIDENT_FORM, etc.
};
```

**Type distribution to achieve channel targets:**
- HOTLINE_REPORT: 55% (drives phone to ~60%)
- WEB_FORM_SUBMISSION: 25% (drives web to ~30%)
- DISCLOSURE_RESPONSE: 8% (campaign channel)
- ATTESTATION_RESPONSE: 5% (campaign channel)
- INCIDENT_FORM: 3% (web channel)
- PROXY_REPORT: 2% (other channel)
- CHATBOT_TRANSCRIPT: 1.5% (other channel)
- SURVEY_RESPONSE: 0.5% (campaign channel)

Define the interface and helper types needed for this template structure.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
RIU type templates created with channel-weighted distribution achieving 60% phone, 30% web, 10% other.
  </done>
</task>

<task type="auto">
  <name>Task 4: Implement category-based anonymity rates</name>
  <files>apps/backend/prisma/seeders/riu.seeder.ts</files>
  <action>
Add category-based anonymity determination to the RIU seeder.

**Anonymity Rates by Category (40% overall, but varies):**
```typescript
const CATEGORY_ANONYMITY_RATES: Record<string, number> = {
  // High anonymity categories
  'harassment': 0.55,
  'retaliation': 0.70,
  'discrimination': 0.50,
  'workplace_violence': 0.60,

  // Moderate anonymity
  'financial_misconduct': 0.35,
  'policy_violation': 0.35,
  'data_privacy': 0.40,

  // Low anonymity (often self-disclosures or want action)
  'conflict_of_interest': 0.25,
  'safety': 0.30,
  'gifts_entertainment': 0.20,

  // Default
  'default': 0.40,
};

function determineReporterType(categoryCode: string): 'ANONYMOUS' | 'CONFIDENTIAL' | 'IDENTIFIED' {
  const anonymityRate = CATEGORY_ANONYMITY_RATES[categoryCode] ?? CATEGORY_ANONYMITY_RATES.default;

  const roll = faker.number.float({ min: 0, max: 1 });
  if (roll < anonymityRate) {
    return 'ANONYMOUS';
  } else if (roll < anonymityRate + 0.25) {
    return 'CONFIDENTIAL';
  } else {
    return 'IDENTIFIED';
  }
}
```

This ensures harassment reports are more often anonymous (55%) while COI disclosures are more often identified (75%).
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Category-based anonymity implemented with harassment at 55% anonymous and COI at 25% anonymous.
  </done>
</task>

<task type="auto">
  <name>Task 5: Implement multi-reporter incident linking</name>
  <files>apps/backend/prisma/seeders/riu.seeder.ts</files>
  <action>
Add support for multiple reporters filing about the same incident.

**Multi-Reporter Pattern:**
```typescript
interface LinkedIncident {
  incidentId: string;        // Shared identifier for related RIUs
  primaryRiuId: string;      // First report
  relatedRiuIds: string[];   // Subsequent reports
  incidentDate: Date;        // When the incident occurred
  category: string;          // Same category for all related RIUs
  department?: string;       // Same location
}

// ~5% of RIUs should be linked (multi-reporter incidents)
const LINKED_INCIDENT_RATE = 0.05;
const LINKED_INCIDENT_SIZE = { min: 2, max: 4 }; // 2-4 reporters per incident

function generateLinkedIncidents(
  totalRius: number,
  categoryIds: string[],
): LinkedIncident[] {
  const numLinkedIncidents = Math.floor(totalRius * LINKED_INCIDENT_RATE / 2.5); // Average 2.5 per incident
  const incidents: LinkedIncident[] = [];

  for (let i = 0; i < numLinkedIncidents; i++) {
    const size = faker.number.int(LINKED_INCIDENT_SIZE);
    incidents.push({
      incidentId: faker.string.uuid(),
      primaryRiuId: '', // Will be set during generation
      relatedRiuIds: [],
      incidentDate: generateSeasonalHistoricalDate({ yearsBack: 3 }).date,
      category: faker.helpers.arrayElement(categoryIds),
    });
  }
  return incidents;
}

// When generating RIUs, some will reference the same incident
// Related RIUs should:
// - Have similar (not identical) narratives ("I also witnessed..." vs "I saw...")
// - Be filed within 1-14 days of each other
// - Reference the same general incident but from different perspectives
// - Store incidentId in metadata for case consolidation demos
```

This enables case consolidation demos where multiple RIUs relate to the same underlying incident.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Multi-reporter incident linking implemented with ~5% of RIUs linked to shared incidents.
  </done>
</task>

<task type="auto">
  <name>Task 6: Implement time-zone realistic timestamps</name>
  <files>apps/backend/prisma/seeders/riu.seeder.ts</files>
  <action>
Add time-zone awareness so EMEA cases are filed during EMEA business hours.

**Time-Zone Configuration:**
```typescript
const TIMEZONE_CONFIG = {
  // Map regions to their typical business hours (UTC)
  AMERICAS: { startHour: 13, endHour: 23 },  // 8am-6pm ET = 13:00-23:00 UTC
  EMEA: { startHour: 7, endHour: 17 },       // 8am-6pm CET = 07:00-17:00 UTC
  APAC: { startHour: 23, endHour: 9 },       // 8am-6pm JST = 23:00-09:00 UTC (wraps)
};

// Regional distribution based on Acme's footprint
const REGIONAL_DISTRIBUTION = {
  AMERICAS: 50,  // 50% of reports
  EMEA: 35,      // 35% of reports
  APAC: 15,      // 15% of reports
};

function adjustTimestampForRegion(
  baseDate: Date,
  region: 'AMERICAS' | 'EMEA' | 'APAC'
): Date {
  const config = TIMEZONE_CONFIG[region];

  // Get the date portion, then set a realistic hour within business hours
  const result = new Date(baseDate);
  const businessHour = faker.number.int({ min: config.startHour, max: config.endHour });

  // Handle APAC wrap-around (23:00-09:00)
  if (region === 'APAC' && businessHour < config.startHour) {
    result.setUTCDate(result.getUTCDate() + 1);
  }

  result.setUTCHours(businessHour);
  result.setUTCMinutes(faker.number.int({ min: 0, max: 59 }));

  return result;
}

function determineRegionFromEmployee(employeeId: string, employeeMap: Map<string, Employee>): string {
  // Look up employee's location to determine region
  // Or use weighted random if employee not specified
}
```

This ensures realistic patterns like EMEA reports clustering around European business hours.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Time-zone realistic timestamps implemented with EMEA cases during European hours and APAC during Asian hours.
  </done>
</task>

<task type="auto">
  <name>Task 7: Add edge cases (long narratives, Unicode, boundary dates)</name>
  <files>apps/backend/prisma/seeders/riu.seeder.ts</files>
  <action>
Add edge case generation for testing robustness.

**Edge Cases to Include:**
```typescript
const EDGE_CASE_CONFIG = {
  // Very long narratives (test text fields, search indexing)
  longNarratives: {
    count: 50, // 1% of 5000
    minLength: 5000,
    maxLength: 15000,
    // Include detailed timelines, multiple incidents, extensive documentation references
  },

  // Unicode characters (test encoding, search, display)
  unicodeNarratives: {
    count: 100, // 2% of 5000
    // Include: accented names (Müller, François), non-Latin scripts, emoji in quotes
    examples: [
      "Employee 李明 (Li Ming) reported that...",
      "The email subject was '¡Urgente! Revisión necesaria'",
      "Witness statement from Björk Guðmundsdóttir confirms...",
      "The message included the phrase '这是不可接受的' which translates to...",
    ],
  },

  // Boundary dates (test date handling)
  boundaryDates: {
    count: 20,
    // Include: Jan 1 (year boundary), Feb 29 (leap year), Dec 31, DST transitions
    dates: [
      new Date('2024-02-29'), // Leap year
      new Date('2023-01-01'), // Year boundary
      new Date('2024-12-31'), // Year end
      new Date('2024-03-10'), // DST spring forward (US)
      new Date('2024-11-03'), // DST fall back (US)
    ],
  },

  // Empty/minimal content (test null handling)
  minimalContent: {
    count: 10,
    // RIUs with minimal valid data (just required fields)
  },
};

function shouldGenerateEdgeCase(index: number, totalRius: number): EdgeCaseType | null {
  // Deterministically assign edge cases to specific indices
  // Ensures reproducible edge case distribution
}

function generateEdgeCaseContent(type: EdgeCaseType): string {
  switch (type) {
    case 'long':
      return generateLongNarrative();
    case 'unicode':
      return generateUnicodeNarrative();
    case 'boundary_date':
      // Date is handled separately
      return generateNarrative('default').narrative;
    case 'minimal':
      return 'Report filed.'; // Minimal valid content
  }
}
```
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
Edge cases implemented: 50 long narratives, 100 Unicode narratives, 20 boundary dates, 10 minimal content.
  </done>
</task>

<task type="auto">
  <name>Task 8: Implement main seedRius function with 5,000 RIUs</name>
  <files>apps/backend/prisma/seeders/riu.seeder.ts</files>
  <action>
Implement the main seedRius function that creates 5,000 RIUs with all patterns.

**Export function:**
```typescript
export async function seedRius(
  prisma: PrismaClient,
  organizationId: string,
  userIds: string[],
  categoryMap: Map<string, { id: string; code: string }>,
  employeeMap: Map<string, { id: string; locationId: string; region: string }>,
): Promise<{ riuIds: string[]; linkedIncidents: LinkedIncident[] }>
```

**Implementation details:**
- Use faker.seed(SEED_CONFIG.masterSeed + 4000) at start
- Target: 5,000 RIUs (SEED_CONFIG.volumes.rius)
- Use BATCH_SIZE = 100 for insertions

**Generation flow:**
1. Generate linked incidents first (defines some RIU relationships)
2. For each RIU:
   - Determine if it's part of a linked incident
   - Generate type using weighted distribution (55% hotline, 25% web, etc.)
   - Get template from RIU_TYPE_TEMPLATES
   - Apply seasonality to date generation
   - Determine anonymity based on category
   - Adjust timestamp for region
   - Check for edge cases
   - Generate narrative using AI-quality templates
   - Create RIU record

**Reference number format:**
```typescript
function generateReferenceNumber(prefix: string, date: Date, index: number): string {
  const year = date.getFullYear();
  const paddedIndex = String(index + 1).padStart(5, '0');
  return `${prefix}-${year}-${paddedIndex}`;
}
```

**Progress tracking:**
```typescript
// Log progress every 500 RIUs
if (index % 500 === 0) {
  console.log(`  Generated ${index}/${targetCount} RIUs...`);
}
```

Return array of all created RIU IDs and linked incidents for case seeder.
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
RIU seeder creates 5,000 RIUs with all patterns: seasonality, category-based anonymity, linked incidents, time-zone aware timestamps, and edge cases.
  </done>
</task>

<task type="auto">
  <name>Task 9: Integrate RIU seeder into main seed script</name>
  <files>apps/backend/prisma/seed.ts</files>
  <action>
Update seed.ts to call the RIU seeder after employees.

**Modifications:**
1. Import { seedRius } from './seeders/riu.seeder'
2. After employee seeding:
   ```typescript
   // Collect user IDs for seeding
   const users = await prisma.user.findMany({
     where: { organizationId: organization.id },
     select: { id: true },
   });
   const userIds = users.map(u => u.id);

   // Build category map (id -> code for anonymity lookup)
   const categories = await prisma.category.findMany({
     where: { organizationId: organization.id },
     select: { id: true, code: true },
   });
   const categoryMap = new Map(categories.map(c => [c.id, { id: c.id, code: c.code }]));

   // Build employee map (for regional timestamp adjustment)
   const employees = await prisma.employee.findMany({
     where: { organizationId: organization.id },
     select: { id: true, locationId: true },
     include: { location: { select: { region: true } } },
   });
   const employeeMap = new Map(employees.map(e => [
     e.id,
     { id: e.id, locationId: e.locationId, region: e.location?.region ?? 'AMERICAS' }
   ]));

   // Seed RIUs
   console.log('Seeding RIUs...');
   const { riuIds, linkedIncidents } = await seedRius(
     prisma,
     organization.id,
     userIds,
     categoryMap,
     employeeMap,
   );
   console.log(`Created ${riuIds.length} RIUs (${linkedIncidents.length} linked incidents)`);
   ```

Seed order is now:
1. Organization
2. Categories
3. Locations
4. Employees
5. Users
6. RIUs (5,000)
  </action>
  <verify>
TypeScript check: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
seed.ts calls RIU seeder with category and employee maps for pattern generation.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `cd apps/backend && npx tsc --noEmit`
2. RIU seeder exports seedRius function
3. All 8 RIU types have content templates with AI-quality narratives
4. Channel distribution achieves 60% phone, 30% web, 10% other
5. Category-based anonymity rates implemented (harassment 55%, COI 25%, overall 40%)
6. Seasonality spikes present (post-holiday, reorg, policy changes)
7. Multi-reporter linked incidents (~5% of RIUs linked)
8. Time-zone realistic timestamps (EMEA during European hours)
9. Edge cases included (long narratives, Unicode, boundary dates)
10. Reference number generation works correctly
</verification>

<success_criteria>
- 5,000 RIUs created with type distribution achieving channel targets
- Channel distribution: 60% phone, 30% web, 10% other (hotline-heavy)
- Anonymity distribution: 40% overall, with category-based variation
  - Harassment: 55% anonymous
  - Retaliation: 70% anonymous
  - COI: 25% anonymous
- Seasonality patterns present:
  - Spikes in January (post-holiday), March (Q1 reorg), September (policy changes)
  - Lulls in July-August (summer) and late December (holidays)
- ~250 RIUs (~5%) linked as multi-reporter incidents (2-4 reporters each)
- Timestamps reflect regional business hours (EMEA cases 07:00-17:00 UTC)
- Edge cases present: 50 long narratives, 100 Unicode, 20 boundary dates
- Each RIU has AI-quality realistic narrative (not lorem ipsum)
- All RIUs linked to valid category and user
</success_criteria>

<output>
After completion, create `.planning/phases/02-demo-tenant-seed-data/02-04-SUMMARY.md`
</output>
