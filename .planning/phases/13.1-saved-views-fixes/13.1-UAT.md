---
status: complete
phase: 13.1-saved-views-fixes
source: 13.1-01-SUMMARY.md
started: 2026-02-09T14:30:00Z
updated: 2026-02-09T14:45:00Z
verification_method: automated_subagents
---

## Current Test

[testing complete]

## Tests

### 1. Board View Card Priority Field

expected: cardConfig.priorityField is set to 'priority' (not 'severity')
result: pass
evidence: Line 465 in cases.config.ts: `priorityField: "priority",`

### 2. Board View Card Owner Field

expected: cardConfig.ownerField is set to 'assignee.name' (not 'createdBy.firstName')
result: pass
evidence: Line 466 in cases.config.ts: `ownerField: "assignee.name",`

### 3. BoardCard Width Class

expected: BoardCard has w-full class for proper lane width
result: pass
evidence: Line 85 in BoardCard.tsx includes `w-full` in className

### 4. BoardCard Nested Field Accessor

expected: getValue/getStringValue handle nested paths like 'assignee.name'
result: pass
evidence: Lines 46-58 in BoardCard.tsx implement dot-notation path splitting

### 5. Drag-Drop Single Status Mutation

expected: singleStatusMutation exists using PATCH /cases/:id/status
result: pass
evidence: Lines 169-191 in useCasesView.ts configure the mutation

### 6. Drag-Drop Rationale Field

expected: Status change includes rationale for audit trail
result: pass
evidence: Line 181: `rationale: \`Status changed to ${status} via board view\``

### 7. handleStatusChange Integration

expected: handleStatusChange calls singleStatusMutation for board drag-drop
result: pass
evidence: Lines 340-345 in useCasesView.ts properly integrate the mutation

### 8. Investigations Service findAll()

expected: findAll() method exists with pagination and case details
result: pass
evidence: InvestigationsService has findAll() with limit/page, includes case and primaryInvestigator

### 9. Investigations GET Endpoint

expected: GET /api/v1/investigations endpoint exists with filtering
result: pass
evidence: InvestigationsController line has @Get() with InvestigationQueryDto

### 10. Investigations Module Configuration

expected: InvestigationsModule properly configured
result: pass
evidence: Module imports PrismaModule, CasesModule, ExportsModule; exports services

### 11. Search Vector SQL in Seeder

expected: Case seeder populates search_vector after creation
result: pass
evidence: Lines 644-653 in case.seeder.ts execute UPDATE with tsvector

### 12. Search Vector Weights

expected: Weighted tsvector (A: referenceNumber/summary, B: details, C: aiSummary)
result: pass
evidence: SQL uses setweight with A, A, B, C weights respectively

### 13. Cases Export Endpoint

expected: POST /api/v1/cases/export exists
result: pass
evidence: Line 333 in cases.controller.ts has @Post("export")

### 14. Cases Module ExportsModule Import

expected: CasesModule imports ExportsModule
result: pass
evidence: cases.module.ts line 7 imports, line 10 includes in imports array

### 15. Policies Export Endpoint

expected: POST /api/v1/policies/export exists
result: pass
evidence: Line 277 in policies.controller.ts has @Post("export")

### 16. Policies Module ExportsModule Import

expected: PoliciesModule imports ExportsModule
result: pass
evidence: policies.module.ts line 7 imports, line 72 includes in imports array

### 17. Investigations Export Endpoint

expected: POST /api/v1/investigations/export exists
result: pass
evidence: Line 354 in investigations.controller.ts has @Post("export")

### 18. Investigations Module ExportsModule Import

expected: InvestigationsModule imports ExportsModule
result: pass
evidence: investigations.module.ts line 9 imports, line 32 includes in imports array

## Summary

total: 18
passed: 18
issues: 0
pending: 0
skipped: 0

## Gaps

[none]

## Verification Details

### Agent 1: Board View Card Fix

All 4 items verified:

- Priority field correctly mapped to 'priority'
- Owner field correctly mapped to 'assignee.name'
- BoardCard has w-full class
- Nested field accessor implemented

### Agent 2: Drag-Drop Persistence

All 3 items verified:

- singleStatusMutation properly configured
- Rationale field included for audit trail
- handleStatusChange integration correct

### Agent 3: Investigations Endpoint

All 3 items verified:

- Service findAll() with pagination
- Controller GET endpoint with filters
- Module properly configured

### Agent 4: Search Vector Population

All 2 items verified:

- SQL UPDATE in seeder after case creation
- Weighted tsvector with correct weights

### Agent 5: Export Endpoints

All 6 items verified:

- Cases: endpoint + module import
- Policies: endpoint + module import
- Investigations: endpoint + module import
