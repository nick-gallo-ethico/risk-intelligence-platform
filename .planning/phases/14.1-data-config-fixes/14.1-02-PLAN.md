---
phase: 14.1-data-config-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/backend/prisma/seed.ts
  - apps/backend/prisma/seeders/activity.seeder.ts
autonomous: true

must_haves:
  truths:
    - "Audit log page shows activity records for demo tenant"
    - "Activity timeline entries exist for cases and investigations"
    - "~15,000 audit log entries seeded for realistic activity"
  artifacts:
    - path: "apps/backend/prisma/seed.ts"
      provides: "Orchestrator with activity seeding"
      contains: "seedActivities"
  key_links:
    - from: "apps/backend/prisma/seed.ts"
      to: "apps/backend/prisma/seeders/activity.seeder.ts"
      via: "import and call seedActivities()"
      pattern: "seedActivities"
---

<objective>
Wire the existing activity.seeder.ts into the seed orchestrator so audit log has data.

Purpose: The activity.seeder.ts already exists but is NOT called in seed.ts, leaving the audit log empty. This is a simple wiring fix.
Output: ~15,000 AuditLog entries for cases and investigations.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@apps/backend/prisma/seeders/activity.seeder.ts (existing seeder - NOT called)
@apps/backend/prisma/seed.ts (seeder orchestration - missing activity call)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire activity seeder into seed.ts</name>
  <files>apps/backend/prisma/seed.ts</files>
  <action>
The activity.seeder.ts file already exists and exports `seedActivities(prisma, organizationId)`. It just needs to be wired into the seed orchestrator.

1. Add import at top (after other seeder imports):
   `import { seedActivities } from './seeders/activity.seeder';`

2. Add seeding call after seedInvestigations (before seedSavedViews):
   ```typescript
   // Seed activity timeline entries (AuditLog)
   console.log('\nSeeding activity timeline (~15,000 audit entries)...');
   await seedActivities(prisma, organization.id);
   ```

3. Update demo summary output section to show audit log count:
   ```typescript
   // After the patterns section, before saved views
   const auditLogCount = await prisma.auditLog.count({ where: { organizationId: organization.id } });
   console.log(`Audit Log Entries: ${auditLogCount}`);
   ```

The activity seeder queries existing cases and investigations from the DB, so it must run AFTER seedInvestigations.
  </action>
  <verify>
TypeScript compiles: `cd apps/backend && npx tsc --noEmit`
Grep for seedActivities in seed.ts shows import and call
  </verify>
  <done>
seed.ts imports and calls seedActivities after investigations, before saved views
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify activity seeder compatibility</name>
  <files>apps/backend/prisma/seeders/activity.seeder.ts</files>
  <action>
Review activity.seeder.ts to ensure it:
1. Exports `seedActivities(prisma: PrismaClient, organizationId: string)` function
2. Queries cases and investigations from database (doesn't require them as params)
3. Uses proper AuditLog field names matching schema.prisma

If the export signature is different (e.g., `seedActivity` vs `seedActivities`), update the import in seed.ts accordingly.

Check the export at the bottom of the file and match the function name exactly in seed.ts.
  </action>
  <verify>
`grep -n "export.*seed" apps/backend/prisma/seeders/activity.seeder.ts` shows export
TypeScript compiles: `cd apps/backend && npx tsc --noEmit`
  </verify>
  <done>
activity.seeder.ts export signature verified and matched in seed.ts import
  </done>
</task>

</tasks>

<verification>
1. `cd apps/backend && npx tsc --noEmit` - no TypeScript errors
2. `grep -n "seedActivities" apps/backend/prisma/seed.ts` - shows import and function call
3. Activity seeder runs after investigations (has required data)
</verification>

<success_criteria>
- seed.ts imports seedActivities from activity.seeder.ts
- seedActivities is called after seedInvestigations, before seedSavedViews
- TypeScript compiles without errors
- Demo summary shows audit log count
</success_criteria>

<output>
After completion, create `.planning/phases/14.1-data-config-fixes/14.1-02-SUMMARY.md`
</output>
