---
phase: 14.1-data-config-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/backend/prisma/seeders/notification.seeder.ts
  - apps/backend/prisma/seed.ts
autonomous: true

must_haves:
  truths:
    - "Notifications page shows seeded notification records"
    - "Demo users have mix of read and unread notifications"
    - "Notifications cover multiple event types"
  artifacts:
    - path: "apps/backend/prisma/seeders/notification.seeder.ts"
      provides: "Notification record seeder"
      min_lines: 100
  key_links:
    - from: "apps/backend/prisma/seed.ts"
      to: "apps/backend/prisma/seeders/notification.seeder.ts"
      via: "import and call seedNotifications()"
      pattern: "seedNotifications"
---

<objective>
Create notification seed data so the Notifications page displays records instead of being blank.

Purpose: Demo users need to see realistic notification activity to demonstrate the notification center functionality.
Output: 50-100 notification records per demo user covering various notification types.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@apps/backend/prisma/schema.prisma (Notification model at line ~2272)
@apps/backend/prisma/seeders/user.seeder.ts (demo user definitions)
@apps/backend/prisma/seed.ts (seeder orchestration)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create notification.seeder.ts</name>
  <files>apps/backend/prisma/seeders/notification.seeder.ts</files>
  <action>
Create notification seeder that generates realistic notifications for demo users.

Requirements:
1. Export `seedNotifications(prisma, organizationId, userIds, caseIds)` function
2. Generate 50-100 notifications per demo user
3. Mix of notification types:
   - CASE_ASSIGNED (30%)
   - CASE_STATUS_CHANGED (20%)
   - CASE_COMMENT (15%)
   - SLA_WARNING (10%)
   - DEADLINE_APPROACHING (10%)
   - WORKFLOW_STEP (10%)
   - SYSTEM_ANNOUNCEMENT (5%)
4. Mix of channels: IN_APP (80%), EMAIL (20%)
5. Mix of read/unread: 70% read, 30% unread
6. Timestamps spread over last 30 days
7. Link to real case entities when applicable
8. Use deterministic seeding (faker.seed)

Reference the existing seeders for patterns (category.seeder.ts, saved-views.seeder.ts).
Use the Notification model fields from schema.prisma:
- id, organizationId, userId, channel, type, status, title, body
- entityType, entityId, templateId, isRead, readAt, createdAt, updatedAt
  </action>
  <verify>
TypeScript compiles: `cd apps/backend && npx tsc --noEmit`
File exists and exports seedNotifications function
  </verify>
  <done>
notification.seeder.ts exists with seedNotifications export that creates diverse notification records
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire notification seeder into seed.ts</name>
  <files>apps/backend/prisma/seed.ts</files>
  <action>
Add notification seeding to the main seed orchestrator.

1. Add import at top:
   `import { seedNotifications } from './seeders/notification.seeder';`

2. Add seeding call after saved views (before demo metrics section):
   ```typescript
   // Seed notifications for demo users
   console.log('\nSeeding notifications...');
   const notificationCount = await seedNotifications(prisma, organization.id, demoUserIds, caseIds);
   console.log(`Created ${notificationCount} notifications for demo users`);
   ```

3. Add to demo summary output section:
   ```typescript
   console.log(`Notifications: ${notificationCount}`);
   ```

Note: The seeder needs caseIds to link notifications to real cases. Pass the caseIds from seedCases return.
  </action>
  <verify>
TypeScript compiles: `cd apps/backend && npx tsc --noEmit`
Grep for seedNotifications in seed.ts shows import and call
  </verify>
  <done>
seed.ts imports and calls seedNotifications, passing required parameters
  </done>
</task>

</tasks>

<verification>
1. `cd apps/backend && npx tsc --noEmit` - no TypeScript errors
2. `grep -n "seedNotifications" apps/backend/prisma/seed.ts` - shows import and function call
3. Seeder file structure matches existing patterns (faker seed, batch inserts, proper typing)
</verification>

<success_criteria>
- notification.seeder.ts exports seedNotifications function
- seed.ts orchestrator calls seedNotifications
- TypeScript compiles without errors
- Seeder creates 50-100 notifications per demo user with diverse types
</success_criteria>

<output>
After completion, create `.planning/phases/14.1-data-config-fixes/14.1-01-SUMMARY.md`
</output>
