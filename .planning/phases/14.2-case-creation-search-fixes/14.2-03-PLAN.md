---
phase: 14.2-case-creation-search-fixes
plan: 03
type: execute
wave: 2
depends_on: ["14.2-01", "14.2-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Case creation form shows working Category dropdown"
    - "Subcategory dropdown populates correctly"
    - "Created cases have category IDs persisted"
    - "Search returns results for case content"
    - "Search returns results for case numbers"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 14.2 fixes are working correctly through human testing.

Purpose: Confirm both the category dropdown and search fixes work end-to-end in the running application. Human verification catches issues that automated tests might miss.

Output: Verified fixes or documented issues requiring additional work.
</objective>

<execution_context>
@C:\Users\cu0718\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\cu0718\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14.2-case-creation-search-fixes/14.2-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Phase 14.2 implemented two fixes:
1. Category/Subcategory dropdowns added to case creation form
2. PostgreSQL FTS fallback for unified search when Elasticsearch unavailable
  </what-built>
  <how-to-verify>
**Prerequisites:**
- Backend running: `cd apps/backend && npm run start:dev`
- Frontend running: `cd apps/frontend && npm run dev`
- Logged in as a demo user (e.g., sarah.chen@acme.local)

**Test 1: Category Dropdown in Case Creation**

1. Navigate to Cases page
2. Click "Create Case" or "+ New" button
3. In the case creation form, verify:
   - [ ] Category dropdown appears (after Source, Type, Severity row)
   - [ ] Dropdown contains 7 categories: Harassment, Fraud & Financial, Conflicts of Interest, Safety & Health, Data & Privacy, Policy Violations, Request for Information
4. Select "Harassment" category, verify:
   - [ ] Subcategory dropdown appears
   - [ ] Contains: Sexual Harassment, Discriminatory Harassment, Bullying/Hostile Work Environment, Retaliation
5. Select "Sexual Harassment" subcategory
6. Fill in required fields (Source: Direct Entry, Details: "Test case for category verification")
7. Submit the case
8. On the case detail page or in the database, verify:
   - [ ] Case has primaryCategoryId set
   - [ ] Case has secondaryCategoryId set

**Test 2: Unified Search Returns Results**

1. In the global search bar (top navigation)
2. Search for "harassment":
   - [ ] Results appear in the dropdown/panel
   - [ ] Case results show reference numbers and snippets
3. Search for a case number (e.g., "CASE-2025"):
   - [ ] Matching cases appear in results
4. Click a search result:
   - [ ] Navigates to the correct case detail page

**Test 3: Edge Cases**

1. Category change resets subcategory:
   - [ ] Select a category with subcategories
   - [ ] Select a subcategory
   - [ ] Change the category to a different one
   - [ ] Subcategory should reset (empty)

2. Search with no results:
   - [ ] Search for gibberish like "xyzzy12345"
   - [ ] Should show "No results" message (not error)

3. Empty search:
   - [ ] Clear search box
   - [ ] Should not show any results or error

**Report any issues found with specific details.**
</how-to-verify>
<resume-signal>
Type "verified" if all tests pass, or describe any issues found with specifics (which test failed, what happened, expected vs actual).
</resume-signal>
</task>

</tasks>

<verification>
All Phase 14.2 success criteria from ROADMAP.md verified:
1. Case creation form shows Category dropdown with all level-0 categories
2. Subcategory dropdown populates based on selected category (level-1 categories)
3. Created cases have correct primaryCategoryId and secondaryCategoryId
4. Unified search returns results for case content (e.g., "harassment")
5. Unified search returns results for case numbers (e.g., "CASE-2025")
</verification>

<success_criteria>
All human verification tests pass without issues.
</success_criteria>

<output>
After completion, create `.planning/phases/14.2-case-creation-search-fixes/14.2-03-SUMMARY.md` documenting verification results.
</output>
